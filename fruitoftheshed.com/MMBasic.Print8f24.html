

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Sprite-Demonstration-part-of-the-original-MMBasic-library&Discuss=1 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:24:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	Sprite Demonstration - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.Sprite-Demonstration-part-of-the-original-MMBasic-library&amp;Discuss=1" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQFvRo8aDEgY2xhc3M9InBhZ2V0aXRsZSI+U3ByaXRlIERlbW9uc3RyYXRpb24gLSBEaXNjdXNzaW9uPC9oMT48ZGl2IGNsYXNzPSJyb290bWVzc2FnZWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibWVzc2FnZWhlYWRlciI+MjAxOC8wNy8zMCAxODowNSBieSA8YSBocmVmPSJNTUJhc2ljLlVzZXIuYXNweD9Vc2VybmFtZT1lbmdlbGVuIj5yYXZlPC9hPjxiciAvPjxzcGFuIGNsYXNzPSJtZXNzYWdlc3ViamVjdCI+QnVnIGluIGNvZGU8L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz0ibWVzc2FnZWJvZHkiPlRoaXMgZXhhbXBsZSBoYXMgYSBidWcgcmVzdWx0aW5nIGluIGEgc3ByaXRlIHRvIGJvdW5jZSBiZXR3ZWVuIHR3byBzcHJpdGVzIG9yIHRoZSB3YWxsIGluZGVmaW5pdGVseSwgd2l0aG91dCBvdGhlciBzcHJpdGVzIG1vdmluZy48YnIgLz48YnIgLz5IZXJlIGlzIGEgc2ltcGxlIGZpeDo8YnIgLz48YnIgLz48cHJlPk1PREUgMyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIFNldCB2aWRlbyBtb2RlDQpMT0FEQk1QImJhY2tkcm9wIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBMb2FkIGJhY2tkcm9wIGltYWdlDQpTUFJJVEUgTE9BRCAic3ByaXRlcyIgICAgICAgICAgICAgICAgICAgICAgICAgJyBMb2FkIHNwcml0ZSBkZWZpbml0aW9ucw0KDQpESU0gcCg4LDQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBEZWZpbmUgYXJyYXkgc2l6ZQ0KDQpGT1Igbj0xIFRPIDggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBTZXQgYWxsIDggc3ByaXRlcyBkYXRhDQogIHAobiwxKT1uJiM0MjsyNSsxMjUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgICBYIGNvLW9yZGluYXRlDQogIHAobiwyKT0yMTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyAgIFkgY28tb3JkaW5hdGUNCiAgcChuLDMpPUZJWChSTkQmIzQyOzQpKzEgICAgICAgICAgICAgICAgICAgICAgICAgJyAgIFJhbmRvbSA0IGRpcmVjdGlvbg0KICBTUFJJVEUgb24gbixuJiM0MjsyNSsxMjUsMjE2ICAgICAgICAgICAgICAgICAgICAnIFR1cm4gb24gc3ByaXRlDQpORVhUIG4NCg0KR0FNRUxPT1AmIzU4Ow0KDQogIEZPUiBuPTEgVE8gOCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBTdGFydCBvZiBtYWluIGdhbWUgbG9vcA0KDQogICAgTU9WRUdIT1NUJiM1ODsNCiAgICBPTiBwKG4sMykgR09UTyBMRUZULFJJR0hULFVQLERPV04gICAgICAgICAnIEJyYW5jaCB0byBkaXJlY3Rpb24NCg0KICAgICAgTEVGVCYjNTg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIE1vdmUgc3ByaXRlIGxlZnQNCiAgICAgIFNQUklURSBjb3B5IDExK2IgVE8gbiAgICAgICAgICAgICAgICAgICAnIENvcHkgc3ByaXRlIGJ1ZmZlciBncmFwaGljcw0KICAgICAgcChuLDEpPXAobiwxKS0xICAgICAgICAgICAgICAgICAgICAgICAgICcgRGVjcmVtZW50IFggY28tb3JkaW5hdGUNCiAgICAgIEdPVE8gUkVEUkFXICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIEJyYW5jaCB0byBzcHJpdGUgcmVkcmF3DQoNCiAgICAgIFJJR0hUJiM1ODsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBNb3ZlIHNwcml0ZSByaWdodA0KICAgICAgU1BSSVRFIGNvcHkgOStiIFRPIG4gICAgICAgICAgICAgICAgICAgICcgQ29weSBzcHJpdGUgYnVmZmVyIGdyYXBoaWNzDQogICAgICBwKG4sMSk9cChuLDEpKzEgICAgICAgICAgICAgICAgICAgICAgICAgJyBJbmNyZW1lbnQgWCBjby1vcmRpbmF0ZQ0KICAgICAgR09UTyBSRURSQVcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgQnJhbmNoIHRvIHNwcml0ZSByZWRyYXcNCg0KICAgICAgVVAmIzU4OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIE1vdmUgc3ByaXRlIHVwDQogICAgICBTUFJJVEUgY29weSAxMytiIFRPIG4gICAgICAgICAgICAgICAgICAgJyBDb3B5IHNwcml0ZSBidWZmZXIgZ3JhcGhpY3MNCiAgICAgIHAobiwyKT1wKG4sMiktMSAgICAgICAgICAgICAgICAgICAgICAgICAnIERlY3JlbWVudCBZIGNvLW9yZGluYXRlDQogICAgICBHT1RPIFJFRFJBVyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBCcmFuY2ggdG8gc3ByaXRlIHJlZHJhdw0KDQogICAgICBET1dOJiM1ODsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgTW92ZSBzcHJpdGUgZG93bg0KICAgICAgU1BSSVRFIGNvcHkgMTUrYiBUTyBuICAgICAgICAgICAgICAgICAgICcgQ29weSBzcHJpdGUgYnVmZmVyIGdyYXBoaWNzDQogICAgICBwKG4sMik9cChuLDIpKzEgICAgICAgICAgICAgICAgICAgICAgICAgJyBJbmNyZW1lbnQgWSBjby1vcmRpbmF0ZQ0KDQogICAgUkVEUkFXJiM1ODsNCg0KICAgICAgU1BSSVRFIG1vdmUgbixwKG4sMSkscChuLDIpICAgICAgICAgICAgICcgTW92ZSBjdXJyZW50IHNwcml0ZQ0KDQogICAgSUYgQ09MTElTSU9OKG4sZWRnZSkmZ3Q7MCBUSEVOICAgICAgICAgICAgICAgJyBUZXN0IGZvciBlZGdlIG9mIHNjcmVlbg0KICAgICAgR09TVUIgQk9VTkNFDQoNCiAgICBFTFNFSUYgQ09MTElTSU9OKG4sc3ByaXRlKSZndDswIFRIRU4gICAgICAgICAnIFRlc3QgZm9yIGFub3RoZXIgc3ByaXRlDQogICAgICBHT1NVQiBCT1VOQ0UNCg0KICAgIEVMU0VJRiBSTkQmZ3Q7Ljk5IFRIRU4gICAgICAgICAgICAgICAgICAgICAgICcgUmFuZG9tbHkgZGVjaWRlIHRvIHR1cm4NCiAgICAgIHAobiwzKT1GSVgoUk5EJiM0Mjs0KSsxDQoNCiAgICBFTkRJRg0KDQogICAgTkVYVCBuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBMb29wIGJhY2sgZm9yIG5leHQgc3ByaXRlDQoNCmM9YysxICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIENvdW50ZXIgZm9yIHNwcml0ZSBhbmltYXRlDQpJRiBjJmd0OzggVEhFTiBiPWIgWE9SIDEmIzU4O2M9MCAgICAgICAgICAgICAgICAgICAgICcgU2V0cyBzcGVlZCBvZiBhbmltYXRpb24NCg0KR09UTyBHQU1FTE9PUCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgRG8gaXQgYWxsIGFnYWluDQoNCg0KQk9VTkNFJiM1ODsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHJldmVyc2Ugc3ByaXRlIGRpcmVjdGlvbg0KICBwKG4sMyk9cChuLDMpKzEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgUmV2ZXJzZSBkaXJlY3Rpb24NCiAgSUYgcChuLDMpPTMgVEhFTiBwKG4sMyk9MQ0KICBJRiBwKG4sMyk9NSBUSEVOIHAobiwzKT0zDQogIFJFVFVSTiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBHbyBiYWNrIHRvIHJlZHJhdyBzcHJpdGUNCjwvcHJlPjwvZGl2PjwvZGl2PmRkVqPoJ8xEot/6wPrkzgRwOZG9+og=" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">Sprite Demonstration - Discussion</h1><div class="rootmessagecontainer"><div class="messageheader">2018/07/30 18:05 by <a href="MMBasic.Userfdbc.html?Username=engelen">rave</a><br /><span class="messagesubject">Bug in code</span></div><div class="messagebody">This example has a bug resulting in a sprite to bounce between two sprites or the wall indefinitely, without other sprites moving.<br /><br />Here is a simple fix:<br /><br /><pre>MODE 3                                        ' Set video mode
LOADBMP"backdrop"                             ' Load backdrop image
SPRITE LOAD "sprites"                         ' Load sprite definitions

DIM p(8,4)                                    ' Define array size

FOR n=1 TO 8                                  ' Set all 8 sprites data
  p(n,1)=n&#42;25+125                             '   X co-ordinate
  p(n,2)=216                                  '   Y co-ordinate
  p(n,3)=FIX(RND&#42;4)+1                         '   Random 4 direction
  SPRITE on n,n&#42;25+125,216                    ' Turn on sprite
NEXT n

GAMELOOP&#58;

  FOR n=1 TO 8                                ' Start of main game loop

    MOVEGHOST&#58;
    ON p(n,3) GOTO LEFT,RIGHT,UP,DOWN         ' Branch to direction

      LEFT&#58;                                   ' Move sprite left
      SPRITE copy 11+b TO n                   ' Copy sprite buffer graphics
      p(n,1)=p(n,1)-1                         ' Decrement X co-ordinate
      GOTO REDRAW                             ' Branch to sprite redraw

      RIGHT&#58;                                  ' Move sprite right
      SPRITE copy 9+b TO n                    ' Copy sprite buffer graphics
      p(n,1)=p(n,1)+1                         ' Increment X co-ordinate
      GOTO REDRAW                             ' Branch to sprite redraw

      UP&#58;                                     ' Move sprite up
      SPRITE copy 13+b TO n                   ' Copy sprite buffer graphics
      p(n,2)=p(n,2)-1                         ' Decrement Y co-ordinate
      GOTO REDRAW                             ' Branch to sprite redraw

      DOWN&#58;                                   ' Move sprite down
      SPRITE copy 15+b TO n                   ' Copy sprite buffer graphics
      p(n,2)=p(n,2)+1                         ' Increment Y co-ordinate

    REDRAW&#58;

      SPRITE move n,p(n,1),p(n,2)             ' Move current sprite

    IF COLLISION(n,edge)&gt;0 THEN               ' Test for edge of screen
      GOSUB BOUNCE

    ELSEIF COLLISION(n,sprite)&gt;0 THEN         ' Test for another sprite
      GOSUB BOUNCE

    ELSEIF RND&gt;.99 THEN                       ' Randomly decide to turn
      p(n,3)=FIX(RND&#42;4)+1

    ENDIF

    NEXT n                                    ' Loop back for next sprite

c=c+1                                         ' Counter for sprite animate
IF c&gt;8 THEN b=b XOR 1&#58;c=0                     ' Sets speed of animation

GOTO GAMELOOP                                 ' Do it all again


BOUNCE&#58;                                       ' reverse sprite direction
  p(n,3)=p(n,3)+1                             ' Reverse direction
  IF p(n,3)=3 THEN p(n,3)=1
  IF p(n,3)=5 THEN p(n,3)=3
  RETURN                                      ' Go back to redraw sprite
</pre></div></div>
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Sprite-Demonstration-part-of-the-original-MMBasic-library&Discuss=1 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:24:41 GMT -->
</html>
