

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from fruitoftheshed.com/MMBasic.History.aspx?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&Revision=10 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:50:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=8" /><title>
	Page History - Fruit Of The Shed
</title><script type="text/javascript" src="JS/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="JS/Scripts.js"></script>
<script type="text/javascript" src="JS/SearchHighlight.js"></script>
<link rel="stylesheet" media="print" href="Themes/Default/Print_Styles.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles%20-%20Copy.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles.css" type="text/css" />
<link rel="stylesheet" href="Themes/Editor.css" type="text/css" />
<link rel="search" href="searchf7b1.xml?OpenSearch=1" type="application/opensearchdescription+xml" title="Fruit Of The Shed - Search" /><script src="Themes/Default/Scripts.js" type="text/javascript"></script>
<link rel="shortcut icon" href="Themes/Default/Icon.ico" type="image/x-icon" />
</head>
<body>
    <form name="aspnetForm" method="post" action="http://fruitoftheshed.com/History.aspx?NS=MMBasic&amp;Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Revision=10" id="aspnetForm">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTEzMjI3OTE2NTkPZBYCZg9kFgICAQ9kFgICCQ9kFggCAQ8WAh4EVGV4dAVIUGFnZSBIaXN0b3J5OiBNTUJhc2ljIGNvZGUtcGFjayB0byBSZWFkIGFuZCBXcml0ZSBXaW5ib25kIEZsYXNoIE1lbW9yaWVzZAIFDxBkEBUPAjE0AjEzAjEyAjExAjEwATkBOAE3ATYBNQE0ATMBMgExATAVDwIxNAIxMwIxMgIxMQIxMAE5ATgBNwE2ATUBNAEzATIBMQEwFCsDD2dnZ2dnZ2dnZ2dnZ2dnZ2RkAgcPEGQQFRAHQ3VycmVudAIxNAIxMwIxMgIxMQIxMAE5ATgBNwE2ATUBNAEzATIBMQEwFRAHQ3VycmVudAIxNAIxMwIxMgIxMQIxMAE5ATgBNwE2ATUBNAEzATIBMQEwFCsDEGdnZ2dnZ2dnZ2dnZ2dnZ2dkZAILDxYCHwAF17gBPHRhYmxlIGNsYXNzPSJib3giIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCI+PHRyPjx0ZD48cCBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyOyI+PGI+PGEgaHJlZj0iTU1CYXNpYy5IaXN0b3J5LmFzcHg/UGFnZT1NTUJhc2ljLk1NQmFzaWMtY29kZS1wYWNrLXRvLVJlYWQtYW5kLVdyaXRlLVdpbmJvbmQtRmxhc2gtTWVtb3JpZXMmYW1wO1JldmlzaW9uPTAwMDA5Ij4mbGFxdW87IE9sZGVyIFJldmlzaW9uPC9hPiAtIDxhIGhyZWY9Ik1NQmFzaWMuSGlzdG9yeS5hc3B4P1BhZ2U9TU1CYXNpYy5NTUJhc2ljLWNvZGUtcGFjay10by1SZWFkLWFuZC1Xcml0ZS1XaW5ib25kLUZsYXNoLU1lbW9yaWVzIj5CYWNrIHRvIFBhZ2UgSGlzdG9yeTwvYT4gLSA8YSBocmVmPSJNTUJhc2ljLkhpc3RvcnkuYXNweD9QYWdlPU1NQmFzaWMuTU1CYXNpYy1jb2RlLXBhY2stdG8tUmVhZC1hbmQtV3JpdGUtV2luYm9uZC1GbGFzaC1NZW1vcmllcyZhbXA7UmV2aXNpb249MDAwMTEiPk5ld2VyIFJldmlzaW9uICZyYXF1bzs8L2E+PC9iPjwvcD48L3RkPjwvdHI+PC90YWJsZT48YnIgLz48aDMgY2xhc3M9InNlcGFyYXRvciI+UGFnZSBSZXZpc2lvbjogMjAxOS8xMi8xMiAxMDo0NjwvaDM+PGJyIC8+V2luYm9uZCBmbGFzaCBtZW1vcmllcyBwcm92aWRlIGFuIGV4Y2VsbGVudCBtZXRob2Qgb2Ygc3RvcmluZyB1cCB0byAxNk1CIG9mIGRhdGEgaW4gYSB0aW55IFNQSSBkcml2ZW4gY2hpcC4gQXQgYXJvdW5kICQwLjUwIGVhY2ggKHZhcmllcykgdGhlc2Ugb2ZmZXIgYW4gYW1hemluZyBzdG9yYWdlL3ByaWNlIGRlbnNpdHkgYW5kIGFyZSB1c2VkIGluIG1hbnkgZGV2aWNlcyB0byBzdG9yZSBjb25maWd1cmF0aW9uIGFuZCBmaXJtd2FyZS4gVGhyb3dpbmcgb3V0IGFuIG9sZCBEU0wgcm91dGVyPyBDaGVjayB0aGUgYm9hcmQgLSB0aGVyZSBpcyBsaWtlbHkgYSBGbGFzaCBtZW1vcnkgdGhhdCBjYW4gYmUgcmVjb3ZlcmVkIGFuZCByZS11c2VkLjxiciAvPjxiciAvPlNQSSBpcyB2ZXJ5IG11Y2ggZmFzdGVyIGFuZCBlYXNpZXIgdG8gZHJpdmUgdGhhbiBJPHN1cD4yPC9zdXA+Qy4gVGhlIHJvdXRpbmVzIGhlcmUgd29yayBmbGF3bGVzc2x5IGF0IDIwTUh6IGFuZCB3ZXJlIGluc3BpcmVkIGJ5IHdvcmsgTWF0aGVyUCBwdWJsaXNoZWQgb24gdGhlIEJhY2tTaGVkIGhlcmUgPGEgY2xhc3M9ImV4dGVybmFsbGluayIgaHJlZj0iaHR0cHM6Ly93d3cudGhlYmFja3NoZWQuY29tL2ZvcnVtL1ZpZXdUb3BpYy5waHA/VElEPTg0OTIiIHRpdGxlPSJodHRwczovL3d3dy50aGViYWNrc2hlZC5jb20vZm9ydW0vVmlld1RvcGljLnBocD9USUQ9ODQ5MiIgdGFyZ2V0PSJfYmxhbmsiPmh0dHBzOi8vd3d3LnRoZWJhY2tzaGVkLmNvbS9mb3J1bS9WaWV3VG9waWMucGhwP1RJRD04NDkyPC9hPjxiciAvPjxiciAvPlRoYXQgd29yayB1c2VkIENTdWJzIHRvIGFjY2VzcyB0aGUgRmxhc2ggYW5kIHdoZXJlYXMgdGhleSBhcmUgdmVyeSBxdWljaywgdGhleSBleGNsdWRlIHVzZXJzIG9mIHRoZSBiaWdnZXIgJ01pdGUgcGxhdGZvcm1zIC0gdGhlIE1NWCBhbmQgU1QncyBBcm0gYmFzZSBwcm9jZXNzb3JzIC0gdGhlIEg3L0Y0IHBsYXRmb3Jtcy4gVGhlIHJvdXRpbmVzIGJlbG93IGFyZSBhIHB1cmVseSBNTUJhc2ljIHNvbHV0aW9uIGFuZCBzbyBjYW4gYmUgdXNlZCBvbiBhbnkgTU1CYXNpYyBwbGF0Zm9ybSBzdXBwb3J0aW5nIHRoZSBTUEkgYnVzLjxiciAvPjxiciAvPlRoZSBhcHByb2FjaCB3aXRoIHRoZSBjb2RlIGhlcmUgaXMgY29tcGFyYWJsZSB0byBhIHNlcXVlbnRpYWwgZmlsZS4gRGF0YSBpcyB3cml0dGVuIHVzaW5nIG9uZSBmdW5jdGlvbiBhbmQgcmVhZCBiYWNrIHdpdGggYW5vdGhlci4gV2hlbiBkYXRhIGlzIGV4aGF1c3RlZCBhIG1hcmtlciwgQ0hSJCgyNTUpLCBpcyByZWFjaGVkLiBUaGlzIGlzIGFuYWxhZ291cyB3aXRoIHRoZSBFT0YgY2hhcmFjdGVyIG9mIGRpc2sgZmlsaW5nIHN5c3RlbXMuIFRoaXMgY29kZSBwcm92aWRlcyBhIHNpbXBsZSBsb2dnaW5nIHN5c3RlbSBvZiBzdHJpbmdzIGluLCBzdHJpbmdzIG91dC4gSXQgaGFuZGxlcyB0aGlzIC0geW91IGRlY2lkZSB3aGF0IHlvdSB3YW50IHRvIGRvIHdpdGggdGhlbS4gVXNpbmcgYSBzdHJ1Y3R1cmVkIGxvZ2dpbmcgbWV0aG9kIGUuZy4gPGEgY2xhc3M9InBhZ2VsaW5rIiBocmVmPSJNTUJhc2ljLlVsdHJhLUNvbXBhY3QtTG9nZ2luZy13aXRoLUZsYXNoLVN0b3JhZ2Utb24tc21hbGwtTWljcm9NaXRlcy5hc2h4IiB0aXRsZT0iVWx0cmEtQ29tcGFjdCBMb2dnaW5nIHdpdGggRmxhc2ggU3RvcmFnZSBvbiBzbWFsbCBNaWNyb01pdGVzIj5VbHRyYS1Db21wYWN0IExvZ2dpbmcgd2l0aCBGbGFzaCBTdG9yYWdlIG9uIHNtYWxsIE1pY3JvTWl0ZXM8L2E+IGl0IHdvdWxkIGJlIHBvc3NpYmxlIHRvIGxvZyBjb250aW51b3VzbHkgYXQgb25lIHNlY29uZCBpbnRlcnZhbHMgZm9yIGVpZ2h0IGRheXMgc3RyYWlnaHQgb24gYSA0TUIgY2hpcC4gV2l0aCBhcmJpdHJhcnkgc3RyaW5ncyBvZiBhdmVyYWdlIGxlbmd0aCA1MCBieXRlcywgaW4gZXhjZXNzIG9mIDgzLDAwMCBsaW5lcyBjb3VsZCBiZSBzdG9yZWQuPGJyIC8+PGJyIC8+PGEgaHJlZj0iTU1CYXNpYy5FZGl0LmFzcHg/UGFnZT1NTUJhc2ljLk1NQmFzaWMtY29kZS1wYWNrLXRvLVJlYWQtYW5kLVdyaXRlLVdpbmJvbmQtRmxhc2gtTWVtb3JpZXMmYW1wO1NlY3Rpb249MCIgY2xhc3M9ImVkaXRzZWN0aW9ubGluayI+PC9hPjxoMSBjbGFzcz0ic2VwYXJhdG9yIj5PcmdhbmlzYXRpb24gb2YgU3RyaW5ncyBpbiBNZW1vcnk8YSBjbGFzcz0iaGVhZGVyYW5jaG9yIiBpZD0iT3JnYW5pc2F0aW9uX29mX1N0cmluZ3NfaW5fTWVtb3J5XzAiIGhyZWY9IiNPcmdhbmlzYXRpb25fb2ZfU3RyaW5nc19pbl9NZW1vcnlfMCIgdGl0bGU9IkxpbmsgdG8gdGhpcyBTZWN0aW9uIj4mIzAxODI7PC9hPjwvaDE+VGhlIEZsYXNoIHRlY2hub2xvZ3kgcHJvdmlkZXMgY29udGludW91cyByZWFkaW5nIHN0YXJ0aW5nIGZyb20gYSBzaW5nbGUgMjQgYml0IGFkZHJlc3MuIE9uY2UgbGF0Y2hlZCwgdGhlIGFkZHJlc3MgaW5jcmVtZW50cyB3aXRoIGVhY2ggcmVhZCBhbmQgc28gdGhlIGVudGlyZSBtZW1vcnkgY291bGQgYmUgcmFwaWRseSByZWFkIG91dCB3aXRoIG9ubHkgYSBzaW5nbGUgYWRkcmVzcyBzZXR1cCAtIGF0IDIwTUh6IHRoaXMgY291bGQgYmUgbGl0dGxlIG1vcmUgdGhhbiA0MDBuUyBwZXIgPHU+Ynl0ZTwvdT4hIFdyaXRpbmcgdGhlIGRldmljZXMgaXMgbW9yZSBpbnZvbHZlZC4gVGhlIG1lbW9yeSBpcyBhcnJhbmdlZCBpbnRvIFBhZ2VzIG9mIDI1NiBieXRlcyBhbmQgdGhlIGFkZHJlc3MgbGF0Y2hlZCwgYWx0aG91Z2ggMjQgYml0cywgb25seSB3b3JrcyB3aXRoaW4gdGhlIHNlbGVjdGVkIHBhZ2UuIFRoZSByb3V0aW5lcyB0YWtlIGNhcmUgb2YgdGhpcyBhbmQgcmVhZGluZy93cml0aW5nIGlzIHRyYW5zcGFyZW50IHRvIHRoZSB1c2VyLjxiciAvPjxiciAvPlRoZSBtZXRob2QgdXNlZCB0byBzdG9yZSBzdHJpbmdzIGluIHRoZSBGbGFzaCBtZW1vcnkgaXMgc2hvd24gYmVsb3cuIEVhY2ggY2VsbCByZXByZXNlbnRzIGEgYnl0ZSBpbiBGbGFzaCAtIGhlcmUgdGhlIHN0cmluZyAiSUlJSUkiPGJyIC8+PGEgY2xhc3M9InVua25vd25saW5rIiBocmVmPSJNTUJhc2ljLi5hc2h4IiB0aXRsZT0iTU1CYXNpYy4iPjwvYT48aW1nIHNyYz0iR2V0RmlsZS5hc3B4P0ZpbGU9L2ZsYXNoX3N0cmluZ3N0b3JlLnBuZyIgYWx0PSJJbWFnZSIgLz48YnIgLz5JdCBjYW4gYmUgc2VlbiBmcm9tIHRoaXMgdGhhdCBzdHJpbmdzIGFyZSBsaW1pdGVkIHRvIHRoZSBjaGFyYWN0ZXJzIDEgdG8gMjU0IC0gaS5lLiB5b3VyIHN0cmluZyBjYW5ub3QgY29udGFpbiBDSFIkKDApIG9yIENIUiQoMjU1KSBhbmQgdGhhdCBpcyB0aGUgb25seSBsaW1pdGF0aW9uLjxiciAvPjAgaXMgdXNlZCBhcyB0aGUgc3RyaW5nIGRlbGltaXRlciBpbiBtZW1vcnkgYW5kIDI1NSBpcyB0aGUgYmxhbmsgbWVtb3J5IGJ5dGUuPGJyIC8+PGJyIC8+PGEgaHJlZj0iTU1CYXNpYy5FZGl0LmFzcHg/UGFnZT1NTUJhc2ljLk1NQmFzaWMtY29kZS1wYWNrLXRvLVJlYWQtYW5kLVdyaXRlLVdpbmJvbmQtRmxhc2gtTWVtb3JpZXMmYW1wO1NlY3Rpb249MSIgY2xhc3M9ImVkaXRzZWN0aW9ubGluayI+PC9hPjxoMSBjbGFzcz0ic2VwYXJhdG9yIj5Db252ZW50aW9ucyB3aXRoIHRoaXMgQ29kZVBhY2s8YSBjbGFzcz0iaGVhZGVyYW5jaG9yIiBpZD0iQ29udmVudGlvbnNfd2l0aF90aGlzX0NvZGVQYWNrXzEiIGhyZWY9IiNDb252ZW50aW9uc193aXRoX3RoaXNfQ29kZVBhY2tfMSIgdGl0bGU9IkxpbmsgdG8gdGhpcyBTZWN0aW9uIj4mIzAxODI7PC9hPjwvaDE+VGhlIGluaXRpYWxpemF0aW9uIHJvdXRpbmUgcGVyZm9ybXMgc2V2ZXJhbCB1c2VmdWwgYW5kIHZpdGFsIGZ1bmN0aW9uczo8YnIgLz48dWw+PGJyIC8+PGxpPiBJdCBpZGVudGlmaWVzIHRoZSB0eXBlIG9mIEZsYXNoIGF0dGFjaGVkIChpZiBhbnkpIGFuZCBzZXRzIHRoZSBtYXhpbXVtIGFkZHJlc3MgdmFyaWFibGUgV0IuVG9wIHRvIHRoZSBsYXN0IGF2YWlsYWJsZSBtZW1vcnkgbG9jYXRpb24uPC9saT48YnIgLz48bGk+IEl0IHJhcGlkbHkgZGV0ZXJtaW5lcyB0aGUgZmlyc3QgdW51c2VkIGJ5dGUgaW4gdGhlIG1lbW9yeSAobW9yZSBvbiB0aGlzIGxhdGVyKSBhbmQgc2V0cyB0aGUgV0IuV1JwdHIgdmFyaWFibGUgc28gYXMgbm90IHRvIHRyYW1wbGUgb24gcHJldmlvdXNseSBzdG9yZWQgZGF0YTwvbGk+PGJyIC8+PC91bD48YnIgLz48YnIgLz48YSBocmVmPSJNTUJhc2ljLkVkaXQuYXNweD9QYWdlPU1NQmFzaWMuTU1CYXNpYy1jb2RlLXBhY2stdG8tUmVhZC1hbmQtV3JpdGUtV2luYm9uZC1GbGFzaC1NZW1vcmllcyZhbXA7U2VjdGlvbj0yIiBjbGFzcz0iZWRpdHNlY3Rpb25saW5rIj48L2E+PGgxIGNsYXNzPSJzZXBhcmF0b3IiPk1ldGhvZDxhIGNsYXNzPSJoZWFkZXJhbmNob3IiIGlkPSJNZXRob2RfMiIgaHJlZj0iI01ldGhvZF8yIiB0aXRsZT0iTGluayB0byB0aGlzIFNlY3Rpb24iPiYjMDE4Mjs8L2E+PC9oMT5UaGVyZSBhcmUgdHdvIGFkZHJlc3MgcG9pbnRlcnMsIG9uZSBmb3IgcmVhZCBhbmQgYW5vdGhlciBmb3Igd3JpdGUgLSB0aGlzIGdpdmVzIGFuIGVhc3kgYWNjZXNzIG1ldGhvZCBhbmQgdGhleSBkb24ndCBjbGFzaC4gSW4gbm9ybWFsIHVzZSwgdGhleSBhcmUgb2Ygbm8gY29uY2VybiBhbmQgYW55IHByb2dyYW0gd2lsbCBzaW1wbHkgdXNlIHRoZSBXQi5XUnN0cigpIGFuZCBXQi5SRHN0ciQoKSByb3V0aW5lcy48YnIgLz48YnIgLz48YnIgLz5Xcml0aW5nOjxiciAvPkFuIGVyYXNlZCBGbGFzaCBoYXMgYWxsIGxvY2F0aW9ucyBzZXQgdG8gMjU1IHNvIGl0IGZvbGxvd3MgdGhlIGxvd2VzdCBzdWNoIGJ5dGUgaXMgdGhlIGZpcnN0IHBsYWNlIHdlIGNhbiB3cml0ZSBkYXRhIHdpdGhvdXQgb3Zlci13cml0aW5nIGVhcmxpZXIgZGF0YSAobm93IGl0IGlzIGNsZWFyIHdoeSBDSFIkKDI1NSkgaXMgcHJvaGliaXRlZCBpbiBzdHJpbmdzKS4gTk9URTogTmV3IEZsYXNoIGNoaXBzIGFyZSBub3QgbmVjZXNzYXJpbHkgaW4gYW4gZXJhc2VkIHN0YXRlLiBOZXcgY2hpcHMgc2hvdWxkIGJlIGZvcm1hdHRlZCBiZWZvcmUgdXNlLiA8YnIgLz48YnIgLz5XQi5XUnB0ciBwb2ludHMgdG8gdGhlIGZpcnN0IHN1Y2ggbWVtb3J5IGxvY2F0aW9uIGkuZS4gdGhlIHBvc2l0aW9uIG5ldyBkYXRhIGNhbiBiZSByZWxpYWJseSBzdG9yZWQuIEZsYXNoIG1lbW9yaWVzIHJldGFpbiBkYXRhIGZvciB1cCB0byAyMCB5ZWFycyBhbmQgd2l0aCBzdWNoIGxhcmdlIGNhcGFjaXRpZXMsIGl0IGlzIGhpZ2hseSBsaWtlbHkgdGhhdCBkYXRhIHdpbGwgYmUgYWdncmVnYXRlZCBvdmVyIHBvd2VyLWN5Y2xlcy4gQXQgaW5pdGlhbGl6YXRpb24sIHRoZSBmaXJzdCBGRmggYnl0ZSBpcyBhc2NlcnRhaW5lZCBieSBhIHJhcGlkIHN1Y2Nlc3NpdmUgYXBwcm94aW1hdGlvbiBhbGdvcml0aG0gdGhhdCB3aWxsIHJldHVybiB0aGUgZmlyc3Qgc3VjaCBieXRlIGluIGFyb3VuZCA4MG1TIG9uIGEgNE1CIGNoaXAgd2l0aCA0OE1IeiBNaWNyb01pdGUuIFRoaXMgYWRkcmVzcyBpcyBub3Qgc3RvcmVkIGludGVybmFsbHkgdG8gdGhlIEZsYXNoIC0gaXQgaXMgZGV0ZXJtaW5lZCB3aXRoIGVhY2ggY2FsbCB0byBXQi5Jbml0LCB0aGUgZW50aXJlIG1lbW9yeSBpcyBhdmFpbGFibGUgZm9yIHVzZS4gPGJyIC8+PGEgY2xhc3M9InVua25vd25saW5rIiBocmVmPSJNTUJhc2ljLi5hc2h4IiB0aXRsZT0iTU1CYXNpYy4iPjwvYT48aW1nIHNyYz0iR2V0RmlsZS5hc3B4P0ZpbGU9L2ZsYXNocG9pbnRlcnMxLnBuZyIgYWx0PSJJbWFnZSIgLz48YnIgLz48YnIgLz5SZWFkaW5nOjxiciAvPkVhY2ggYnl0ZSBpcyByZWFkIGZyb20gbWVtb3J5IGFuZCBidWlsdCB1cCBpbiBhIHN0cmluZyB1bnRpbCBhIDAgaXMgcmVhZCB3aGVuY2UgdGhlIHN0cmluZyBpcyByZXR1cm5lZCAodGhlIDAgZG9lcyBub3QgZm9ybSBwYXJ0IG9mIHRoYXQgc3RyaW5nKS4gV0IuUkRwdHIgaXMgaW5jcmVtZW50ZWQgdG8ga2VlcCB0cmFjayBvZiB3aGVyZSByZWFkaW5nIG9jY3VycyBhbmQgd2lsbCBiZSBsZWZ0IHBvaW50aW5nIGF0IHRoZSBzdGFydCBvZiB0aGUgbmV4dCBzdHJpbmcuIElmIGFuIGF0dGVtcHQgdG8gcmVhZCBwYXN0IGFueSBkYXRhIGlzIG1hZGUsIENIUiQoMjU1KSBpcyByZXR1cm5lZCBhbmQgdGhlIHJlYWQgcG9pbnRlciBpcyBub3QgaW5jcmVtZW50ZWQuIFdoZW4gYWRkaXRpb25hbCBkYXRhIGlzIHdyaXR0ZW4sIHRoZSBuZXh0IHJlYWQgd2lsbCByZXR1cm4gdGhlIG5ldyBkYXRhIGFuZCBzbyBvbi4uLiBUaHVzLCB0aGUgcmVhZCBwb2ludGVyIHdpbGwgaGFwcGlseSB0cm90IGFsb25nIGJlaGluZCB0aGUgd3JpdGUgcG9pbnRlciBidXQgbmV2ZXIgcGFzcyBpdC48YnIgLz48YSBjbGFzcz0idW5rbm93bmxpbmsiIGhyZWY9Ik1NQmFzaWMuLmFzaHgiIHRpdGxlPSJNTUJhc2ljLiI+PC9hPjxpbWcgc3JjPSJHZXRGaWxlLmFzcHg/RmlsZT0vZmxhc2hwb2ludGVyczIucG5nIiBhbHQ9IkltYWdlIiAvPjxiciAvPjxiciAvPjxhIGhyZWY9Ik1NQmFzaWMuRWRpdC5hc3B4P1BhZ2U9TU1CYXNpYy5NTUJhc2ljLWNvZGUtcGFjay10by1SZWFkLWFuZC1Xcml0ZS1XaW5ib25kLUZsYXNoLU1lbW9yaWVzJmFtcDtTZWN0aW9uPTMiIGNsYXNzPSJlZGl0c2VjdGlvbmxpbmsiPjwvYT48aDEgY2xhc3M9InNlcGFyYXRvciI+R2xvYmFsIFZhcmlhYmxlczxhIGNsYXNzPSJoZWFkZXJhbmNob3IiIGlkPSJHbG9iYWxfVmFyaWFibGVzXzMiIGhyZWY9IiNHbG9iYWxfVmFyaWFibGVzXzMiIHRpdGxlPSJMaW5rIHRvIHRoaXMgU2VjdGlvbiI+JiMwMTgyOzwvYT48L2gxPlRoZSBwb2ludGVyIGZvciB0aGUgbmV4dCByZWFkIHN0cmluZyBvcGVyYXRpb248YnIgLz5JbnRlZ2VyIDxiPldCLlJEcHRyPC9iPjxiciAvPjxiciAvPlRoZSBwb2ludGVyIGZvciB0aGUgbmV4dCB3cml0ZSBzdHJpbmcgb3BlcmF0aW9uPGJyIC8+SW50ZWdlciA8Yj5XQi5XUnB0cjwvYj48YnIgLz48YnIgLz5UaGUgSkVERUMgaWRlbnRpZmllciBvZiB0aGUgRmxhc2ggaW5jbHVkaW5nIHRoZSBtYW51ZmFjdHVyZXIgYW5kIHRoZW4gdGhlIDIgYnl0ZSBkZXZpY2UgSUQ8YnIgLz5JbnRlZ2VyIDxiPldCLklEPC9iPjxiciAvPjxiciAvPkEgaHVtYW4gZnJpZW5kbHkgdmVyc2lvbiBvZiB0aGUgSUQgZS5nLiBXMjVRMzIgZXRjLjxiciAvPlN0cmluZyA8Yj5XQiQ8L2I+PGJyIC8+PGJyIC8+VGhlIHRvcC1tb3N0IGF2YWlsYWJsZSBtZW1vcnkgbG9jYXRpb248YnIgLz5JbnRlZ2VyIDxiPldCLlRvcDwvYj48YnIgLz48YnIgLz48YnIgLz48YSBocmVmPSJNTUJhc2ljLkVkaXQuYXNweD9QYWdlPU1NQmFzaWMuTU1CYXNpYy1jb2RlLXBhY2stdG8tUmVhZC1hbmQtV3JpdGUtV2luYm9uZC1GbGFzaC1NZW1vcmllcyZhbXA7U2VjdGlvbj00IiBjbGFzcz0iZWRpdHNlY3Rpb25saW5rIj48L2E+PGgxIGNsYXNzPSJzZXBhcmF0b3IiPlRoZSBSb3V0aW5lczxhIGNsYXNzPSJoZWFkZXJhbmNob3IiIGlkPSJUaGVfUm91dGluZXNfNCIgaHJlZj0iI1RoZV9Sb3V0aW5lc180IiB0aXRsZT0iTGluayB0byB0aGlzIFNlY3Rpb24iPiYjMDE4Mjs8L2E+PC9oMT5EaXNjb3ZlciB3aGF0IHR5cGUgb2YgRmxhc2ggYW5kIEluaXRpYWxpc2UgdGhlIGludGVybmFsIHBvaW50ZXJzPGJyIC8+PGI+V0IuSW5pdDwvYj48YnIgLz48YnIgLz5SZWFkIHRoZSB0aHJlZSBzdGF0dXMgcmVnaXN0ZXJzPGJyIC8+PGI+PVdCLlN0YXQxUkQoKTwvYj48YnIgLz48Yj49V0IuU3RhdDJSRCgpPC9iPjxiciAvPjxiPj1XQi5TdGF0M1JEKCk8L2I+PGJyIC8+PGJyIC8+V2FpdCBmb3IgdGhlIEZsYXNoIHRvIGJlY29tZSBpZGxlIC0geW91IG1heSBuZWVkIHRvIHB1dCBhIFdBVENIRE9HIGluIGhlcmUgc28geW91ciBjb2RlIGRvZXNuJ3QgcmVzdGFydCBvbiBsb25nIHdhaXRzPGJyIC8+PGI+V0IuV2FpdEJ1c3k8L2I+PGJyIC8+PGJyIC8+Y2hlY2sgaWYgdGhlIEZsYXNoIGlzIGJ1c3kgd2l0aG91dCB3YWl0aW5nPGJyIC8+PGI+PVdCLlRlc3RCdXN5KCk8L2I+PGJyIC8+PGJyIC8+UGVlayBhIGJ5dGUgYXQgdGhlIGdpdmVuIGFkZHJlc3MgaW4gRmxhc2guIEZsYXNoIGlzIGVyYXNlZCB0byBGRiBzbyB3aGVuIHdlIHBlZWsgdGhlIG5leHQgYWRkcmVzczxiciAvPmFmdGVyIGEgc3RyaW5nIHdlIGNhbiB0ZWxsIGlmIHdlIGFyZSBhdCBFT0Y8YnIgLz48Yj49V0IuUGVlayhhZGRyZXNzKTwvYj48YnIgLz48YnIgLz5SZWFkIGEgc3RyaW5nIGZyb20gdGhlIGN1cnJlbnQgcmVhZCBwb2ludGVyIGFuZCBpbmNyZW1lbnQgdGhlIHBvaW50ZXI8YnIgLz5yZXR1cm5zIENociQoMjU1KSBpZiB3ZSBhcmUgYXQgdGhlIGVuZCBvZiB0aGUgZGF0YTxiciAvPjxiPj1XQi5SZWFkU3RyJCgpPC9iPjxiciAvPjxiciAvPldyaXRlIGEgc3RyaW5nIHRvIHRoZSBjdXJyZW50IHdyaXRlIHBvaW50ZXIgYW5kIGluY3JlbWVudCB0aGUgcG9pbnRlcjxiciAvPnJldHVybnMgYSB6ZXJvIGlmIHN1Y2Nlc3NmdWwgYW5kIDEgaWYgdGhlIHdyaXRlIHdvdWxkIGV4Y2VlZCBGbGFzaCBzdG9yYWdlPGJyIC8+PGI+PVdCLldyaXRlU3RyKGEkKTwvYj48YnIgLz48YnIgLz5FcmFzZSB0aGUgZW50aXJlIEZsYXNoOyBzZXRzIGFsbCBtZW1vcnkgbG9jYXRpb25zIHRvIGNvbnRhaW4gMEZGaCAtIGRvZXMgYW4gaW5pdGlhbGl6YXRpb24gYWZ0ZXJ3YXJkcyB0byByZXNldCBhbGwgdGhlIHBvaW50ZXJzLiBOZXcgRmxhc2ggY2hpcHMgc2hvdWxkIGJlIGZvcm1hdHRlZCBiZWZvcmUgdXNlIGFzIHRoZXkgbWF5IGNvbnRhaW4gcmFuZG9tIGRhdGEgdGhhdCB3aWxsIGNvbmZ1c2UgV0IuSW5pdCBhbmQgcmV0dXJuIGR1YmlvdXMgIHVzYWdlIGZpZ3VyZXMuPGJyIC8+PGI+V0IuRm9ybWF0PC9iPjxiciAvPjxiciAvPlN1cHBvcnQgcm91dGluZXMgLSB1bmxpa2VseSB0byBiZSB1c2VmdWwgaW4geW91ciBjb2RlOjxiciAvPjxiciAvPmxhdGNoIGEgdGhyZWUgYnl0ZSBhZGRyZXNzIGluIHRoZSBGbGFzaDxiciAvPjxiPldCLkFkZHIoYWRkcmVzcyk8L2I+PGJyIC8+PGJyIC8+RW5hYmxlL0Rpc2FibGUgd3JpdGUgZnVuY3Rpb248YnIgLz48Yj5XQi5XUkVuYWJsZSgwfDEpPC9iPjxiciAvPjxiciAvPlNldCB1cCB0aGUgcGFnZSBhZGRyZXNzIGR1cmluZyBhIHdyaXRlPGJyIC8+PGI+V0IuU2V0UGFnZTwvYj48YnIgLz48YnIgLz48YnIgLz48YSBocmVmPSJNTUJhc2ljLkVkaXQuYXNweD9QYWdlPU1NQmFzaWMuTU1CYXNpYy1jb2RlLXBhY2stdG8tUmVhZC1hbmQtV3JpdGUtV2luYm9uZC1GbGFzaC1NZW1vcmllcyZhbXA7U2VjdGlvbj01IiBjbGFzcz0iZWRpdHNlY3Rpb25saW5rIj48L2E+PGgxIGNsYXNzPSJzZXBhcmF0b3IiPkV4YW1wbGU8YSBjbGFzcz0iaGVhZGVyYW5jaG9yIiBpZD0iRXhhbXBsZV81IiBocmVmPSIjRXhhbXBsZV81IiB0aXRsZT0iTGluayB0byB0aGlzIFNlY3Rpb24iPiYjMDE4Mjs8L2E+PC9oMT48cHJlPg0KJyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsNCicgeW91ciBzZXR1cCBjb2RlIGdvZXMgIGhlcmUNCicmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7DQpJbml0JiM1ODsNCglDUFUgNDgNCgknT3B0aW9uIEF1dG9ydW4gT24NCgknT3B0aW9uIEJhdWRyYXRlIDk2MDANCglPcHRpb24gRXhwbGljaXQNCglPcHRpb24gQmFzZSAwDQoNCglDb25zdCBWZXIkPSIwLjIwIG9mIDI0LU5PVi0yMDE5Ig0KDQonJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7LQ0KJ1RoZSBvbmx5IGNvbmZpZyB5b3Ugc2hvdWxkIG5lZWQgdG8gZG8mIzU4Ow0KJ2NoYW5nZSB0aGUgZm9sbG93aW5nIHRvIHRoZSBDUyBwaW4gZm9yIHRoZSBGbGFzaCBtZW1vcnkNCglDb25zdCBXQi5DUz0yMw0KJ2NoYW5nZSB0aGUgZm9sbG93aW5nIHRvIHRoZSBTUEkgY2hhbm5lbCB3aGVyZSB5b3VyIEZsYXNoIGNoaXAgaXMgKGl0J3MgdXN1YWxseSBPSyB0byBsZWF2ZSBpdCBvcGVuDQonc28gbG9uZyBhcyBub3RoaW5nIGVsc2UgaXMgY29tcGV0aW5nIGFuZCBjbG9zZXMgaXQgYWZ0ZXIgdXNlIC0gZS5nLiBMQ0QgcGFuZWxzKQ0KCVNQSSBPcGVuIDIwMDAwMDAwLDAsOCcyME1IeiwgbW9kZSAwLCA4IGJpdHMuLi4gc2VlbXMgaGFwcHkgYXQgMjBNSHogYnV0IGRyb3AgdGhpcyBkb3duIGlmIHlvdSBnZXQgcHJvYnMNCicmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTstDQoNCg0KJ21hbmRhdG9yeSB2YXJpYWJsZXMgaW4geW91ciBwcm9ncmFtJiM1ODsNCicmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTstDQoJRGltIEludGVnZXIgV0IuUkRwdHIsV0IuV1JwdHIsV0IuVG9wLFdCLklELHgsbg0KCURpbSBXQiQNCicmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTstDQoNCglXQi5Jbml0J3NpbmdsZSBzdWIgaWQncyB0aGUgZGV2aWNlLCBzZXRzIG1lbSBzaXplIGFuZCBmaW5kcyBmaXJzdCB1c2FibGUgYWRkcmVzcw0KCQkJJ3lvdXIgY29kZSBzaG91bGQgY2hlY2sgV0IuVG9wIGFmdGVyIHRoaXMgY2FsbC4gaWYgbm8gRmxhc2ggZm91bmQgb3IgY291bGRuJ3QgYmUgaWRlbnRpZmllZCwgV0IuVG9wPS0xDQoNCg0KDQoNCicmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7DQonIHlvdXIgcHJvZ3JhbSBnb2VzICBoZXJlDQonJiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOw0KDQoNCidBIGxpdHRsZSBkZW1vbnN0cmF0aW9uIGNvZGUuLi4NCg0KCURpbSB5JA0KDQoJZGltIGludGVnZXIgbQ0KDQoJSWYgV0IuVG9wPS0xIHRoZW4NCgkJPyAiVW5kZXRlY3RlZCBvciB1bmtub3duIEZsYXNoIGRldmljZSAiK0hleCQoV0IuSUQsNikNCglFbHNlDQoJCT8gIkZvdW5kICI7V0IkOyIgKCI7SGV4JChXQi5JRCw2KTsiKSINCgkJPyAibWVtb3J5IHNpemUgaXMiOyhXQi5Ub3ArMSkvMTAyNDsiS0IgKDAtIitIZXgkKFdCLlRvcCkrIikiDQoJCT8gIkZpcnN0IGJsYW5rIGFkZHJlc3MgaXMgIjtIZXgkKFdCLldScHRyKTsiaCINCglFbmRJZg0KCQ0KCSdXQi5FcmFzZUFsbA0KCSdlbmQNCg0KJ3Nob3cgdGhlIHN0YXR1c2VzIGp1c3QgZm9yIGZ1biwgbm90IG5lY2Vzc2FyeQ0KCSdhPVdCLlN0YXQxUkQoKQ0KCSc/IlN0YXR1cyBSZWcgMSIsaGV4JChhLDIpLGJpbiQoYSw4KSdhbmQgc3RhdDEgc2hvd3MgdGhlIFdFTCBmbGFnIChiaXQgMSkNCgknYT1XQi5TdGF0MlJEKCkNCgknPyJTdGF0dXMgUmVnIDIiLGhleCQoYSwyKSxiaW4kKGEsOCkNCgknYT1XQi5TdGF0M1JEKCkNCgknPyJTdGF0dXMgUmVnIDMiLGhleCQoYSwyKSxiaW4kKGEsOCkNCg0KCT8NCg0KJ3dyaXRlIHNvbWUgcmFuZG9tIHN0cmluZ3MgdG8gRmxhc2ggd2l0aCB0aW1pbmdzDQoJPyIiLCJXUiBUaW1lIg0KCT8iJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyINCgknPyAiU3RyaW5nMSAiOw0KCSd0aW1lcj0wJiM1ODt4PVdCLldyaXRlU3RyKCJzIDEiKSYjNTg7P3RpbWVyOyJtUyINCgknPyAiU3RyaW5nMiAiOw0KCSd0aW1lcj0wJiM1ODt4PVdCLldyaXRlU3RyKHN0cmluZyQoMjU1LDQ4K3JuZCYjNDI7NzApKSYjNTg7P3RpbWVyOyJtUyINCgknPyAiU3RyaW5nMyAiOw0KCSd0aW1lcj0wJiM1ODt4PVdCLldyaXRlU3RyKHN0cmluZyQoMjU1LDQ4K3JuZCYjNDI7NzApKSYjNTg7P3RpbWVyOyJtUyINCgknPyAiU3RyaW5nNCAiOw0KCSd0aW1lcj0wJiM1ODt4PVdCLldyaXRlU3RyKHN0cmluZyQoMjU1LDQ4K3JuZCYjNDI7NzApKSYjNTg7P3RpbWVyOyJtUyINCgknPyAiU3RyaW5nNSAiOw0KCSd0aW1lcj0wJiM1ODt4PVdCLldyaXRlU3RyKCJzIDUiKSYjNTg7P3RpbWVyOyJtUyINCgkNCglmb3Igbj0xIHRvIDEwDQoJCT8gbiwNCgkJdGltZXI9MCYjNTg7eD1XQi5Xcml0ZVN0cihzdHJpbmckKDMwLDQ4K3JuZCYjNDI7NzApKSYjNTg7P3RpbWVyOyJtUyINCgluZXh0DQoNCidyZWFkIGJhY2sgdGhlIHN0cmluZ3MgLSBkZW1vbnN0cmF0ZXMgY2hyJCgyNTUpIGlmIGF0dGVtcHRpbmcgdG8gcmVhZA0KCT8mIzU4Oz8iTm93IHJlYWRpbmcgYmFjayBhbGwgc3RyaW5ncy4uLiINCgkJPyJUaW1lIiwiQWRkciIsIkRhdGEiDQoJPyImIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7Ig0KCURvIA0KCQl0aW1lcj0wJiM1ODt5JD1XQi5SZWFkU3RyJCgpJiM1ODsgPyB0aW1lciwNCgkJPyBIZXgkKFdCLlJEcHRyLDQpOyJoIix5JA0KCUxvb3Agd2hpbGUgeSQmbHQ7Jmd0O2NociQoMjU1KQ0KDQoNCglGb3Igbj0wIFRvIDEwMjMgU3RlcCAxNg0KCQl5JD0iIg0KCQk/IEhleCQobiw0KTsiICAiOw0KCQlGb3IgbT0wIFRvIDE1DQoJCQl4PVdCLlBlZWsobittKQ0KCQkJPyBIZXgkKHgsMik7IiAgIjsNCgkJCUlmIHgmbHQ7MzIgT3IgeCZndDsxMjYgVGhlbiB4PSZhbXA7aDJlDQoJCQl5JD15JCtDaHIkKHgpDQoJCU5leHQNCgkJPyB5JA0KCU5leHQNCg0KDQoJSW5wdXQgIkRvIHlvdSB3YW50IHRvIGVyYXNlIHRoZSBGbGFzaCAoWS9OKT8iLHkkDQoJeSQ9VUNhc2UkKHkkKQ0KCUlmIHkkPSJZIiBUaGVuDQoJCT8gIndhaXQgYSBtb21lbnQiDQoJCXRpbWVyPTAmIzU4O1dCLkZvcm1hdCYjNTg7P3RpbWVyOyJtUyINCglFbmRJZg0KDQoJRW5kDQo8L3ByZT48YnIgLz5UaGUgcm91dGluZXMgYXJlIGZhaXJseSBicmlzayBhbmQgbnVtZXJvdXMgdGVzdGluZyAvYWRqdXN0bWVudCBwaGFzZXMgaGF2ZSByZXN1bHRlZCBpbiBzb21lIHRyaWNrcyB0byBtYWtlIHRoZW0gYXMgZmFzdCBhcyBwb3NzaWJsZS48YnIgLz48YnIgLz5IZXJlIGFyZSBzb21lIHRpbWluZ3MgZm9yIHN0YXNoaW5nIDEwIHRoaXJ0eS1ieXRlIHN0cmluZ3Mgb24gYSA0OE1IeiAnMTcwPGJyIC8+PGNvZGU+PGJyIC8+CVdSIFRpbWU8YnIgLz48aHI+PGJyIC8+IDEJIDIybVM8YnIgLz4gMgkgMjFtUzxiciAvPiAzCSAyMW1TPGJyIC8+IDQJIDIybVM8YnIgLz4gNQkgMjJtUzxiciAvPiA2CSAyMW1TPGJyIC8+IDcJIDIybVM8YnIgLz4gOAkgMjJtUzxiciAvPiA5CSAyOW1TPGJyIC8+IDEwCSAyMm1TPGJyIC8+PGJyIC8+Tm93IHJlYWRpbmcgYmFjayBhbGwgc3RyaW5ncy4uLjxiciAvPlRpbWUJQWRkcglEYXRhPGJyIC8+PGhyPjxiciAvPiAxMgkwMDFGaAl1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXU8YnIgLz4gMTIJMDAzRWgJPDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PDw8PGJyIC8+IDExCTAwNURoCU5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTjxiciAvPiAxMgkwMDdDaAlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVk8YnIgLz4gMTIJMDA5QmgJampqampqampqampqampqampqampqampqampqampqPGJyIC8+IDEyCTAwQkFoCWxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbDxiciAvPiAxMgkwMEQ5aAlRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVE8YnIgLz4gMTEJMDBGOGgJWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZPGJyIC8+IDEyCTAxMTdoCVZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVjxiciAvPiAxMgkwMTM2aAk3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc8YnIgLz48L2NvZGU+PGJyIC8+PGJyIC8+bm90ZSB0aGUgc2xpZ2h0bHkgaW5jcmVhc2VkIHRpbWUgdG8gd3JpdGUgc3RyaW5nIDk/IFRoaXMgaXMgZHVlIHRvIHRoZSBzdHJpbmcgY3Jvc3NpbmcgYSBwYWdlIGJvdW5kYXJ5IGFuZCBoYXZpbmcgdG8gcmVzZXQgdGhlIHBhZ2UgYWRkcmVzczxiciAvPjxiciAvPjxiciAvPjxhIGhyZWY9Ik1NQmFzaWMuRWRpdC5hc3B4P1BhZ2U9TU1CYXNpYy5NTUJhc2ljLWNvZGUtcGFjay10by1SZWFkLWFuZC1Xcml0ZS1XaW5ib25kLUZsYXNoLU1lbW9yaWVzJmFtcDtTZWN0aW9uPTYiIGNsYXNzPSJlZGl0c2VjdGlvbmxpbmsiPjwvYT48aDEgY2xhc3M9InNlcGFyYXRvciI+VGhlIENvZGU8YSBjbGFzcz0iaGVhZGVyYW5jaG9yIiBpZD0iVGhlX0NvZGVfNiIgaHJlZj0iI1RoZV9Db2RlXzYiIHRpdGxlPSJMaW5rIHRvIHRoaXMgU2VjdGlvbiI+JiMwMTgyOzwvYT48L2gxPjxwcmU+DQonRGlzY292ZXIgdGhlIGF0dGFjaGVkIGZsYXNoIG1lbW9yeSBhbmQgaW5pdGlhbGllIGFsbCB0aGUgcG9pbnRlcnMgYW5kIHN0dWZmDQonc2V0cyB1cCB0aGUgQ1MgcGluIGFuZCBvcGVucyB0aGUgU1BJIGNoYW5uZWwNCglTdWIgV0IuSW5pdCgpDQoJCUxvY2FsIEludGVnZXIgbg0KCQknUGluKFdCLkNTKT0xDQoJCSdTZXRQaW4gV0IuQ1MsRE9VVA0KCQlXQi5Ub3A9LTEmIzU4O1dCLldScHRyPS0xDQoJCSdpZGVudGlmeSB0aGUgRmxhc2ggcmFtIGJ5IHJlYWRpbmcgdGhlIEpFREVDIElEIGFuZCBzZXR0aW5nIHNvbWUga2V5IHZhbHVlcw0KCQlQaW4oV0IuQ1MpPTANCgkJCXg9U1BJKCZhbXA7aDlGKQ0KCQkJV0IuSUQ9NjU1MzYmIzQyO1NQSSgwKSsyNTYmIzQyO1NQSSgwKStTUEkoMCkNCgkJUGluKFdCLkNTKT0xDQoJCSdpZiB5b3VyIGRldmljZSBpcyBub3QgbGlzdGVkIG9yIGNvbWVzIHVwIHVua25vd24sIHlvdSdsbCBoYXZlIHRvIGRldGVybWluZSB0aGUgY29ycmVjdCBJRA0KCQknZnJvbSB0aGUgZGV2aWNlIFBERiBhbmQgYWRkIGl0IGJlbG93LiBHb29kIG5ld3MgaXMsIGl0IGxvb2tzIGxpa2UgYWxsIHRoZSBXaW5ib25kIFcyNSYjNDI7IGFyZQ0KCQknNEtCIHNlY3RvcnMgYW5kIDI1NkIgcGFnZSBzaXplIHNvIHRoZSBjb2RlICYjNDI7c2hvdWxkJiM0Mjsgd29yayB3aXRob3V0IGFueSBjaGFuZ2VzIC0gbm8gZ3VhcmFudGVlcw0KCQknb25seSBrbm93biBwcm9ibGVtIGlzIHRoZSBjb2RlIGFzc3VtZXMgYSAyNCBiaXQgYWRkcmVzcyB3aGljaCBicmVha3MgZm9yICZndDsxNk1CIGRldmljZXMgYW5kIG1heWJlDQoJCSdvdGhlcnMgd2hpY2ggbWlnaHQgb25seSBwcm92aWRlIGEgMTYgYml0IGFkZHJlc3MgLSBoYXZlbid0IGxvb2tlZCBhdCB0aGUgUERGLg0KCQknVGhlIFdpbmJvbmQgcHJvZHVjdCBzZWxlY3RvciBzaG93cyB0aGVzZSBjaGlwcyBidXQgSSBjb3VsZG4ndCBmaW5kIFBERnMgZm9yIHRoZW0mIzU4Ow0KCQknVzI1UTAySlYJMjU2TUINCgkJJ1cyNVEwMUpWCTEyOE1CDQoNCgkJU2VsZWN0IENhc2UgV0IuSUQNCgkJCScmIzQyOyYjNDI7JiM0MjsgVGVzdGVkDQoJCQlDYXNlICZhbXA7aEVGNDAxOCYjNTg7V0IkPSJXMjVRMTI4IicxNk1CDQoJCQkJV0IuVG9wPTE2Mzg0DQoJCQlDYXNlICZhbXA7aEVGNDAxNyYjNTg7V0IkPSJXMjVRNjQiJzhNQg0KCQkJCVdCLlRvcD04MTkyDQoJCQlDYXNlICZhbXA7aEVGNDAxNiYjNTg7V0IkPSJXMjVRMzIiJzRNQg0KCQkJCVdCLlRvcD00MDk2DQoNCgkJCScmIzQyOyYjNDI7JiM0MjsgVW5UZXN0ZWQNCgkJCUNhc2UgJmFtcDtoRUY0MDIwJiM1ODtXQiQ9IlcyNVE1MTIiJzY0TUIgLSBwcm9iYWJseSB3b24ndCB3b3JrIHdpdGggdGhpcyBjb2RlIGFzICZndDsyNGJpdCBhZGRyZXNzDQoJCQkJV0IuVG9wPTY1NTM2DQoJCQlDYXNlICZhbXA7aEVGNDAxOSYjNTg7V0IkPSJXMjVRMjU2IiczMk1CIC0gcHJvYmFibHkgd29uJ3Qgd29yayB3aXRoIHRoaXMgY29kZSBhcyAmZ3Q7MjRiaXQgYWRkcmVzcw0KCQkJCVdCLlRvcD0zMjc2OA0KDQoJCQlDYXNlICZhbXA7aEVGNDAxNSYjNTg7V0IkPSJXMjVRMTYiJzJNQg0KCQkJCVdCLlRvcD0yMDQ4DQoJCQlDYXNlICZhbXA7aEVGNDAxNCYjNTg7V0IkPSJXMjVRODAiJzFNQg0KCQkJCVdCLlRvcD0xMDI0DQoJCQlDYXNlICZhbXA7aEVGNDAxMyYjNTg7V0IkPSJXMjVRNDAiJzUxMktCDQoJCQkJV0IuVG9wPTUxMg0KCQkJQ2FzZSAmYW1wO2hFRjUwMTImIzU4O1dCJD0iVzI1UTIwIicyNTZLQg0KCQkJCVdCLlRvcD0yNTYNCgkJCUNhc2UgJmFtcDtoRUY2MDExJiM1ODtXQiQ9IlcyNVExMCInMTI4S0INCgkJCQlXQi5Ub3A9MTI4DQoJCQlDYXNlICZhbXA7aEVGMzAxMCYjNTg7V0IkPSJXMjVYMDUiJzY0S0INCgkJCQlXQi5Ub3A9NjQNCgkJCUNhc2UgJmFtcDtoQkYyNjQyJiM1ODtXQiQ9IlNTVDI2VkYwMzIiJ01pY3JvY2hpcCA0TUIgcGluIGFuZCBjb2RlIGNvbXBhdGlibGUgLSBuZWVkcyB3b3JrIG9uIGdsb2JhbCBlbmFibGUNCgkJCQlXQi5Ub3A9NDA5Ng0KCQkJQ2FzZSBFbHNlDQoJCQkJV0IuVG9wPS0xJiM1ODtTUEkgQ2xvc2UmIzU4O0V4aXQgU3ViJ2Nhbid0IGlkZW50aWZ5DQoJCUVuZCBTZWxlY3QNCg0KCQlXQi5Ub3A9KFdCLlRvcCYjNDI7MTAyNCktMSdzZXQgdGhlIHRvcCBtZW1vcnkgbG9jYXRpb24NCg0KJ2ZpbmQgdGhlIGZpcnN0ICg9bG93ZXN0IGFkZHJlc3Mgd2l0aCkgRkYgYnl0ZQ0KCQlJZiBXQi5QZWVrKDApPTI1NSBUaGVuIFdCLldScHRyPTAmIzU4O0V4aXQgU3ViJ2JsYW5rIEZsYXNoIGVhcmx5IGJhdGgNCidvdGhlcndpc2UgZmluZCBieSBzdWNjZXNzaXZlIGFwcHJveGltYXRpb24gLSB2ZXJ5IGZhc3QsIHNlYXJjaGVzIDRNQiBpcyA4MG1TDQoJCVdCLldScHRyPShXQi5Ub3ArMSlcMiYjNTg7bj1XQi5XUnB0clwyJ3N0YXJ0IGF0IHRoZSBtaWRkbGUgYW5kIGdvIGluIHNtYWxsZXIgYW5kIHNtYWxsZXIgaGFsdmVzDQoJCURvDQoJCQlJZiBXQi5QZWVrKFdCLldScHRyKT0yNTUgVGhlbg0KCQkJCVdCLldScHRyPVdCLldScHRyLW4nc3RpbGwgaW4gdm9pZCBzbyBnbyBkb3duIGJ5IGhhbGYgdGhlIHJlbWFpbmRlcg0KCQkJRWxzZQ0KCQkJCVdCLldScHRyPVdCLldScHRyK24nd2UgYXJlIGluIHRoZSBzdHJpbmdzIHNvIGdvIHVwIGJ5IGhhbGYgdGhlIHJlbWFpbmRlcg0KCQkJRW5kSWYNCgkJCUlmIG4mbHQ7Jmd0OzEgVGhlbiBuPW5cMidzbWFsbGVyIGFuZCBzbWFsbGVyIGhhbHZlcw0KCQlMb29wIFVudGlsIFdCLlBlZWsoV0IuV1JwdHIpPTI1NSBBbmQgV0IuUGVlayhXQi5XUnB0ci0xKSZsdDsmZ3Q7MjU1J2lzIHRoZSBieXRlIGJlZm9yZSB0aGUgRkYgIUZGPyBpcyBzbywgd2UgYXJlIGRvbmUNCglFbmQgU3ViDQoNCidzZXQgb3IgY2xlYXIgZmxhc2ggd3JpdGUgZW5hYmxlIGZsYWcNCglTdWIgV0IuV1JFbmFibGUoYSBBcyBJbnRlZ2VyKQ0KCQlJZiBXQi5Ub3A9LTEgVGhlbiBFeGl0IFN1Yg0KCQlMb2NhbCBJbnRlZ2VyIHgNCgkJUGluKFdCLkNTKT0wDQoJCQlJZiBhPTAgVGhlbg0KCQkJCXg9U1BJKDQpDQoJCQlFbHNlDQoJCQkJeD1TUEkoNikNCgkJCUVuZElmDQoJCVBpbihXQi5DUyk9MQ0KCQlXQi5XYWl0QnVzeQ0KCUVuZCBTdWINCg0KJ3dhaXQgd2hpbGUgRmxhc2ggaXMgYnVzeQ0KCVN1YiBXQi5XYWl0QnVzeQ0KCQlJZiBXQi5Ub3A9LTEgVGhlbiBFeGl0IFN1Yg0KCQlEbyBXaGlsZSBXQi5UZXN0QnVzeSgpDQoJCSd5b3UgbWlnaHQgd2FudCB0byBwdXQgYSBXQVRDSERPRyBoZXJlLiBMb25nIG9wZXJhdGlvbnMgY291bGQgYnJlYWsgeW91ciBwcm9ncmFtDQoJCUxvb3ANCglFbmQgU3ViDQoNCid0ZXN0IEJVU1kgZmxhZyBpbiBTVEFUMQ0KCUZ1bmN0aW9uIFdCLlRlc3RCdXN5KCkgQXMgSW50ZWdlcg0KCQlJZiBXQi5Ub3A9LTEgVGhlbiBFeGl0IEZ1bmN0aW9uDQoJCVdCLlRlc3RCdXN5PShXQi5TdGF0MVJEKCkgQW5kIDEpDQoJRW5kIEZ1bmN0aW9uDQoNCglGdW5jdGlvbiBXQi5TdGF0MVJEKCkgQXMgSW50ZWdlcg0KCQlJZiBXQi5Ub3A9LTEgVGhlbiBFeGl0IEZ1bmN0aW9uDQoJCUxvY2FsIEludGVnZXIgeA0KCQlQaW4oV0IuQ1MpPTANCgkJCXg9U1BJKDUpDQoJCQlXQi5TdGF0MVJEPVNQSSgwKQ0KCQlQaW4oV0IuQ1MpPTENCglFbmQgRnVuY3Rpb24NCg0KCUZ1bmN0aW9uIFdCLlN0YXQyUkQoKSBBcyBJbnRlZ2VyDQoJCUlmIFdCLlRvcD0tMSBUaGVuIEV4aXQgRnVuY3Rpb24NCgkJTG9jYWwgSW50ZWdlciB4DQoJCVBpbihXQi5DUyk9MA0KCQkJeD1TUEkoJmFtcDtoMzUpDQoJCQlXQi5TdGF0MlJEPVNQSSgwKQ0KCQlQaW4oV0IuQ1MpPTENCglFbmQgRnVuY3Rpb24NCg0KCUZ1bmN0aW9uIFdCLlN0YXQzUkQoKSBBcyBJbnRlZ2VyDQoJCUlmIFdCLlRvcD0tMSBUaGVuIEV4aXQgRnVuY3Rpb24NCgkJTG9jYWwgSW50ZWdlciB4DQoJCVBpbihXQi5DUyk9MA0KCQkJeD1TUEkoJmFtcDtoMTUpDQoJCQlXQi5TdGF0M1JEPVNQSSgwKQ0KCQlQaW4oV0IuQ1MpPTENCglFbmQgRnVuY3Rpb24NCg0KJ3NlbmQgYSAzIGJ5dGUgYWRkcmVzcyB0byBGbGFzaA0KCVN1YiBXQi5BZGRyKGEgQXMgSW50ZWdlcikNCgkJTG9jYWwgSW50ZWdlciB4DQoJCXg9U1BJKChhJmd0OyZndDsxNikgQW5kIDI1NSkNCgkJeD1TUEkoKGEmZ3Q7Jmd0OzgpIEFuZCAyNTUpDQoJCXg9U1BJKGEgQW5kIDI1NSkNCglFbmQgU3ViDQoNCidzZXQgdGhlIGFkZHJlc3MgZm9yIHBhZ2Ugd3JpdGluZw0KCVN1YiBXQi5TZXRQYWdlDQoJCUxvY2FsIEludGVnZXIgeA0KCQlQaW4oV0IuQ1MpPTENCgkJV0IuV2FpdEJ1c3kNCgkJV0IuV1JFbmFibGUgMQ0KCQlXQi5XYWl0QnVzeQ0KCQlQaW4oV0IuQ1MpPTANCgkJeD1TUEkoMikNCgkJV0IuQWRkciBXQi5XUnB0cidzZXR1cCB0aGUgYWRkcmVzcw0KCUVuZCBTdWINCg0KJ2VyYXNlIHRoZSBlbnRpcmUgY2hpcCAtIENBVVRJT04gdGFrZXMgYSBsb25nIHRpbWUuLi4gNyBzZWNvbmRzIG9uIGEgNE1CIGNoaXAsIDM4cyBvbiBhIDE2TUIuDQoJU3ViIFdCLkZvcm1hdCgpDQoJCUlmIFdCLlRvcD0tMSBUaGVuIEV4aXQgU3ViDQoJCUxvY2FsIEludGVnZXIgeA0KCQlXQi5XUkVuYWJsZSAxDQoJCVdCLldhaXRCdXN5DQoJCVBpbihXQi5DUyk9MA0KCQkJeD1TUEkoJmFtcDtoNjApJ3N0YXJ0IHRoZSBlcmFzZSAtIHdpbGwgdGFrZSBzb21lIHRpbWUNCgkJUGluKFdCLkNTKT0xDQoJCVdCLldhaXRCdXN5DQoJCVdCLkluaXQNCglFbmQgU3ViDQoNCicJUGVlayBhbnkgYWRkcmVzcyBpbiBGbGFzaA0KCUZ1bmN0aW9uIFdCLlBlZWsoYSBBcyBJbnRlZ2VyKSBBcyBJbnRlZ2VyDQoJCUlmIFdCLlRvcD0tMSBUaGVuIEV4aXQgRnVuY3Rpb24NCgkJTG9jYWwgSW50ZWdlciB4DQoJCVBpbihXQi5DUyk9MA0KCQkJeD1TUEkoMykncmVhZCBhdCB0aGUgZ2l2ZW4gYWRkcmVzcw0KCQkJV0IuQWRkciBhDQoJCQlXQi5QZWVrPVNQSSgwKSdncmFiIG9uZSBieXRlDQoJCVBpbihXQi5DUyk9MQ0KCUVuZCBGdW5jdGlvbg0KDQonUmVhZCBhIHN0cmluZyBmcm9tIHRoZSBSZWFkIEFkZHJlc3MgdXNpbmcgdGhlIGdsb2JhbCBXQi5SRHB0ciB2YXJpYWJsZQ0KCUZ1bmN0aW9uIFdCLlJlYWRTdHIkKCkNCgkJSWYgV0IuVG9wPS0xIFRoZW4gRXhpdCBGdW5jdGlvbg0KCQlMb2NhbCBJbnRlZ2VyIHgseg0KCQlMb2NhbCBhJA0KCQlXQi5XYWl0QnVzeSd3YWl0IGZvciB0aGUgRmxhc2ggdG8gYmUgaWRsZQ0KCQlQaW4oV0IuQ1MpPTANCgkJeD1TUEkoMykNCgkJV0IuQWRkciBXQi5SRHB0cg0KCQlGb3Igej0xIHRvIDI1NidzdHJlYW0gdGhlIGRhdGEgZnJvbSBGbGFzaCBpbnRvIGEkLCAyNTYgY292ZXJzIG1heCBsZW5ndGgrY2hyJCgwKSwgd2UgYmFpbCBlYXJseSBpZiBuZWVkZWQNCgkJCXg9U1BJKDApJ2dldCB0aGUgY2hhcmFjdGVyDQoJCQlTZWxlY3QgY2FzZSB4DQoJCQkJQ2FzZSAwICdicmVhayBvdXQgb24gdGhlIGRlbGltaXRlcg0KCQkJCQlQb2tlIFZhciBhJCwwLHotMQ0KCQkJCQlXQi5SRHB0cj1XQi5SRHB0citMZW4oYSQpKzEnYnVtcCB0aGUgYWRkcmVzcyBhbG9uZyBieSB0aGUgbnVtYmVyIG9mIGJ5dGVzIHdlIHJlYWQgKzEgZm9yIHRoZSBkZWxpbWl0ZXINCgkJCQkJRXhpdCBGb3INCgkJCQlDYXNlIDI1NSAnYnJlYWsgb3V0IG9uIEVPRg0KCQkJCQlXQi5SRHB0cj1XQi5SRHB0citMZW4oYSQpJ3Nob3VsZCBuZXZlciBoYXBwZW4NCgkJCQkJYSQ9Q2hyJCh4KSdzaW5nbGUgY2hhcj8NCgkJCQkJRXhpdCBGb3INCgkJCQlDYXNlIEVsc2UNCgkJCQkJUG9rZSBWYXIgYSQseix4DQoJCQlFbmQgc2VsZWN0DQoJCU5leHQNCgkJUGluKFdCLkNTKT0xDQoJCVdCLlJlYWRTdHIkPWEkDQoJRW5kIEZ1bmN0aW9uDQoNCid3cml0ZSBhIHN0cmluZyB0byB0aGUgbmV4dCBhdmFpbGFibGUgcG9zaXRpb24uIFJldHVybiAwIGlmIHN1Y2Nlc3NmdWwNCglGdW5jdGlvbiBXQi5Xcml0ZVN0cihhJCkgQXMgSW50ZWdlcg0KCQlJZiBXQi5Ub3A9LTEgVGhlbiBFeGl0IEZ1bmN0aW9uDQoJCUlmIFdCLldScHRyK0xlbihhJCkrMSZndDs9V0IuVG9wIFRoZW4gV0IuV3JpdGVTdHI9MSYjNTg7RXhpdCBGdW5jdGlvbg0KCQlMb2NhbCBJbnRlZ2VyIG4seA0KCQlXQi5TZXRQYWdlDQoJCUZvciBuPTEgVG8gTGVuKGEkKQ0KCQkJeD1TUEkoUGVlayhWYXIgYSQsbikpDQoJCQlXQi5XUnB0cj1XQi5XUnB0cisxDQoJCQlJZiBOb3QoV0IuV1JwdHIgTW9kIDI1NikgVGhlbiAnY2hlY2tpbmcgZm9yIGEgcGFnZSBib3VuZGFyeSBhZnRlciBlYWNoIHdyaXRlIGRvZXMgbm90IGltcGFjdCANCgkJCQlXQi5TZXRQYWdlICAgICAgICAgICAgJ3RoZSB0aW1lIG92ZXJseS4gT25seSAxbXMgb24gYSAnMTcwIHdpdGggYSA2NWNoYXIgc3RyaW5nDQoJCQlFbmRJZg0KCQlOZXh0DQoJCUlmIE5vdChXQi5XUnB0ciBNb2QgMjU2KSBUaGVuDQoJCQlXQi5TZXRQYWdlDQoJCUVuZElmDQoJCXg9U1BJKDApDQoJCVBpbihXQi5DUyk9MQ0KCQlXQi5XUnB0cj1XQi5XUnB0cisxDQoJRW5kIEZ1bmN0aW9uDQo8L3ByZT48YnIgLz48YnIgLz5kZP1KMqvAdDm/eRzlR2D9gPNPi9C5" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="2068001F" />
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWIQLztdjKCgK9z4TRAwK9z4DRAwK9z7zRAwK9z7jRAwK9z7TRAwKlz/TSAwKqz/TSAwK7z/TSAwK4z/TSAwK5z/TSAwK+z/TSAwK/z/TSAwK8z/TSAwK9z/TSAwKiz/TSAwK3j57gBwLC5qa8BQLC5qK8BQLC5p68BQLC5pq8BQLC5pa8BQLa5ta/BQLV5ta/BQLE5ta/BQLH5ta/BQLG5ta/BQLB5ta/BQLA5ta/BQLD5ta/BQLC5ta/BQLd5ta/BQL9yYWiCfUFkMrfPK1sJYBIPkIvg54UqGxi" />
</div>
		<script type="text/javascript">
<!--
__BaseName = "ctl00_CphMaster_";
__ConfirmMessage = "Are you sure you want to proceed?";
// -->
</script>
		<script type="text/javascript">
		<!--
			function __GetServerElementById(id) {
				return document.getElementById(__BaseName + id);
			}
			function __RequestConfirm() {
				return confirm(__ConfirmMessage);
			}
		// -->
		</script>
    
        <div id="HeaderDiv">
            <div style="float: right;">Welcome <a href="MMBasic.Language.html" class="systemlink" title="Select your language">Guest</a>, you are in: <select class="namespacedropdown" onchange="javascript:var sel = this.value; document.location = (sel != '' ? (sel + '.') : '') + 'Default.aspx';"><option value="">&lt;root&gt;</option><option value="Circuit Ideas">Circuit Ideas</option><option value="Colour MaxiMite 2 (CMM2)">Colour MaxiMite 2 (CMM2)</option><option value="GCB">GCB</option><option value="MicroMite ArmMite and MMX Hardware">MicroMite ArmMite and MMX Hardware</option><option selected="selected" value="MMBasic">MMBasic</option><option value="PIC ASM">PIC ASM</option><option value="Platform Agnostic">Platform Agnostic</option></select> &bull; <a href="MMBasic.Logina549.html?Redirect=http%3a%2f%2ffruitoftheshed.com%2fHistory.aspx%3fNS%3dMMBasic%26Page%3dMMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories%26Revision%3d10" class="systemlink" title="Login">Login</a></div><h1>Fruit Of The Shed</h1>
        </div>
                   
        <div id="ContainerDiv">
                 
            <div id="SidebarDiv">
                <div id="SidebarHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="SidebarContentDiv">
                    <div style="float: right;"> </div><h3 class="separator">Navigation (MMBasic)<a class="headeranchor" id="Navigation_NAMESPACE_0" href="#Navigation_NAMESPACE_0" title="Link to this Section">&#0182;</a></h3><ul><li><b><a class="pagelink" href="MMBasic.MainPage.html" title="_MMBasic Code Library">Main Page</a></b></li><li><a class="pagelink" href="MainPage.html" title="Home Page">Main Page (root)</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.EggDrop-part-of-the-original-MMBasic-libraryc674.html" title="Random Page">Random Page</a></li><li><a class="systemlink" href="MMBasic.AllPages.html" title="All Pages">All Pages</a><br /> </li><li><a class="systemlink" href="Logina75d.html" title="Create a new Page">Create a new Page</a><br /></li></ul><br /><ul><li><a class="systemlink" href="Logine894.html" title="Administration">Administration</a></li><li><a class="systemlink" href="MMBasic.Upload.html" title="File Management">File Management</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="My Account">My Account</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="Create Account">Create Account</a><br /></li></ul><br /><small><b>Search the wiki</b></small><br /><br /><script type="text/javascript"><!--
function _DoSearch_SBf63524b4df3e46d58daced6fab3b588b() { document.location = 'MMBasic.Search.aspx?AllNamespaces=1&FilesAndAttachments=1&Query=' + encodeURI(document.getElementById('SBf63524b4df3e46d58daced6fab3b588b').value); }
// -->
</script><input class="txtsearchbox" type="text" id="SBf63524b4df3e46d58daced6fab3b588b" onkeydown="javascript:var keycode; if(window.event) keycode = event.keyCode; else keycode = event.which; if(keycode == 10 || keycode == 13) { _DoSearch_SBf63524b4df3e46d58daced6fab3b588b(); return false; }" /> <big><a href="#" onclick="javascript:_DoSearch_SBf63524b4df3e46d58daced6fab3b588b(); return false;">&raquo;</a></big><br /><br /><br />
                </div>
                <div id="SidebarFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>
            <div id="MainDiv">
                <div id="MainHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="PageInternalHeaderDiv"></div>
                

    <h1 class="pagetitlesystem">Page History: MMBasic code-pack to Read and Write Winbond Flash Memories</h1>
    <p>Compare Page Revisions</p> 
    <select name="ctl00$CphMaster$lstRev1" id="ctl00_CphMaster_lstRev1">
	<option value="14">14</option>
	<option value="13">13</option>
	<option value="12">12</option>
	<option value="11">11</option>
	<option value="10">10</option>
	<option value="9">9</option>
	<option value="8">8</option>
	<option value="7">7</option>
	<option value="6">6</option>
	<option value="5">5</option>
	<option value="4">4</option>
	<option value="3">3</option>
	<option value="2">2</option>
	<option value="1">1</option>
	<option value="0">0</option>

</select>
    <select name="ctl00$CphMaster$lstRev2" id="ctl00_CphMaster_lstRev2">
	<option value="Current">Current</option>
	<option value="14">14</option>
	<option value="13">13</option>
	<option value="12">12</option>
	<option value="11">11</option>
	<option value="10">10</option>
	<option value="9">9</option>
	<option value="8">8</option>
	<option value="7">7</option>
	<option value="6">6</option>
	<option value="5">5</option>
	<option value="4">4</option>
	<option value="3">3</option>
	<option value="2">2</option>
	<option value="1">1</option>
	<option value="0">0</option>

</select>
    <input type="submit" name="ctl00$CphMaster$btnCompare" value="Compare" id="ctl00_CphMaster_btnCompare" />
    <br /><br />
    
    <table class="box" cellpadding="0" cellspacing="0"><tr><td><p style="text-align: center;"><b><a href="MMBasic.Historyd866.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Revision=00009">&laquo; Older Revision</a> - <a href="MMBasic.History75a6.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories">Back to Page History</a> - <a href="MMBasic.Historyeeef.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Revision=00011">Newer Revision &raquo;</a></b></p></td></tr></table><br /><h3 class="separator">Page Revision: 2019/12/12 10:46</h3><br />Winbond flash memories provide an excellent method of storing up to 16MB of data in a tiny SPI driven chip. At around $0.50 each (varies) these offer an amazing storage/price density and are used in many devices to store configuration and firmware. Throwing out an old DSL router? Check the board - there is likely a Flash memory that can be recovered and re-used.<br /><br />SPI is very much faster and easier to drive than I<sup>2</sup>C. The routines here work flawlessly at 20MHz and were inspired by work MatherP published on the BackShed here <a class="externallink" href="https://www.thebackshed.com/forum/ViewTopic.php?TID=8492" title="https://www.thebackshed.com/forum/ViewTopic.php?TID=8492" target="_blank">https://www.thebackshed.com/forum/ViewTopic.php?TID=8492</a><br /><br />That work used CSubs to access the Flash and whereas they are very quick, they exclude users of the bigger 'Mite platforms - the MMX and ST's Arm base processors - the H7/F4 platforms. The routines below are a purely MMBasic solution and so can be used on any MMBasic platform supporting the SPI bus.<br /><br />The approach with the code here is comparable to a sequential file. Data is written using one function and read back with another. When data is exhausted a marker, CHR$(255), is reached. This is analagous with the EOF character of disk filing systems. This code provides a simple logging system of strings in, strings out. It handles this - you decide what you want to do with them. Using a structured logging method e.g. <a class="pagelink" href="MMBasic.Ultra-Compact-Logging-with-Flash-Storage-on-small-MicroMites.html" title="Ultra-Compact Logging with Flash Storage on small MicroMites">Ultra-Compact Logging with Flash Storage on small MicroMites</a> it would be possible to log continuously at one second intervals for eight days straight on a 4MB chip. With arbitrary strings of average length 50 bytes, in excess of 83,000 lines could be stored.<br /><br /><a href="Login12f0.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Section=0" class="editsectionlink"></a><h1 class="separator">Organisation of Strings in Memory<a class="headeranchor" id="Organisation_of_Strings_in_Memory_0" href="#Organisation_of_Strings_in_Memory_0" title="Link to this Section">&#0182;</a></h1>The Flash technology provides continuous reading starting from a single 24 bit address. Once latched, the address increments with each read and so the entire memory could be rapidly read out with only a single address setup - at 20MHz this could be little more than 400nS per <u>byte</u>! Writing the devices is more involved. The memory is arranged into Pages of 256 bytes and the address latched, although 24 bits, only works within the selected page. The routines take care of this and reading/writing is transparent to the user.<br /><br />The method used to store strings in the Flash memory is shown below. Each cell represents a byte in Flash - here the string "IIIII"<br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="flash_stringstore03d8.png?File=/flash_stringstore.png" alt="Image" /><br />It can be seen from this that strings are limited to the characters 1 to 254 - i.e. your string cannot contain CHR$(0) or CHR$(255) and that is the only limitation.<br />0 is used as the string delimiter in memory and 255 is the blank memory byte.<br /><br /><a href="Login15e1.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Section=1" class="editsectionlink"></a><h1 class="separator">Conventions with this CodePack<a class="headeranchor" id="Conventions_with_this_CodePack_1" href="#Conventions_with_this_CodePack_1" title="Link to this Section">&#0182;</a></h1>The initialization routine performs several useful and vital functions:<br /><ul><br /><li> It identifies the type of Flash attached (if any) and sets the maximum address variable WB.Top to the last available memory location.</li><br /><li> It rapidly determines the first unused byte in the memory (more on this later) and sets the WB.WRptr variable so as not to trample on previously stored data</li><br /></ul><br /><br /><a href="Login9413.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Section=2" class="editsectionlink"></a><h1 class="separator">Method<a class="headeranchor" id="Method_2" href="#Method_2" title="Link to this Section">&#0182;</a></h1>There are two address pointers, one for read and another for write - this gives an easy access method and they don't clash. In normal use, they are of no concern and any program will simply use the WB.WRstr() and WB.RDstr$() routines.<br /><br /><br />Writing:<br />An erased Flash has all locations set to 255 so it follows the lowest such byte is the first place we can write data without over-writing earlier data (now it is clear why CHR$(255) is prohibited in strings). NOTE: New Flash chips are not necessarily in an erased state. New chips should be formatted before use. <br /><br />WB.WRptr points to the first such memory location i.e. the position new data can be reliably stored. Flash memories retain data for up to 20 years and with such large capacities, it is highly likely that data will be aggregated over power-cycles. At initialization, the first FFh byte is ascertained by a rapid successive approximation algorithm that will return the first such byte in around 80mS on a 4MB chip with 48MHz MicroMite. This address is not stored internally to the Flash - it is determined with each call to WB.Init, the entire memory is available for use. <br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="flashpointers1857e.png?File=/flashpointers1.png" alt="Image" /><br /><br />Reading:<br />Each byte is read from memory and built up in a string until a 0 is read whence the string is returned (the 0 does not form part of that string). WB.RDptr is incremented to keep track of where reading occurs and will be left pointing at the start of the next string. If an attempt to read past any data is made, CHR$(255) is returned and the read pointer is not incremented. When additional data is written, the next read will return the new data and so on... Thus, the read pointer will happily trot along behind the write pointer but never pass it.<br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="flashpointers210f7.png?File=/flashpointers2.png" alt="Image" /><br /><br /><a href="Login1cae.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Section=3" class="editsectionlink"></a><h1 class="separator">Global Variables<a class="headeranchor" id="Global_Variables_3" href="#Global_Variables_3" title="Link to this Section">&#0182;</a></h1>The pointer for the next read string operation<br />Integer <b>WB.RDptr</b><br /><br />The pointer for the next write string operation<br />Integer <b>WB.WRptr</b><br /><br />The JEDEC identifier of the Flash including the manufacturer and then the 2 byte device ID<br />Integer <b>WB.ID</b><br /><br />A human friendly version of the ID e.g. W25Q32 etc.<br />String <b>WB$</b><br /><br />The top-most available memory location<br />Integer <b>WB.Top</b><br /><br /><br /><a href="Login3af4.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Section=4" class="editsectionlink"></a><h1 class="separator">The Routines<a class="headeranchor" id="The_Routines_4" href="#The_Routines_4" title="Link to this Section">&#0182;</a></h1>Discover what type of Flash and Initialise the internal pointers<br /><b>WB.Init</b><br /><br />Read the three status registers<br /><b>=WB.Stat1RD()</b><br /><b>=WB.Stat2RD()</b><br /><b>=WB.Stat3RD()</b><br /><br />Wait for the Flash to become idle - you may need to put a WATCHDOG in here so your code doesn't restart on long waits<br /><b>WB.WaitBusy</b><br /><br />check if the Flash is busy without waiting<br /><b>=WB.TestBusy()</b><br /><br />Peek a byte at the given address in Flash. Flash is erased to FF so when we peek the next address<br />after a string we can tell if we are at EOF<br /><b>=WB.Peek(address)</b><br /><br />Read a string from the current read pointer and increment the pointer<br />returns Chr$(255) if we are at the end of the data<br /><b>=WB.ReadStr$()</b><br /><br />Write a string to the current write pointer and increment the pointer<br />returns a zero if successful and 1 if the write would exceed Flash storage<br /><b>=WB.WriteStr(a$)</b><br /><br />Erase the entire Flash; sets all memory locations to contain 0FFh - does an initialization afterwards to reset all the pointers. New Flash chips should be formatted before use as they may contain random data that will confuse WB.Init and return dubious  usage figures.<br /><b>WB.Format</b><br /><br />Support routines - unlikely to be useful in your code:<br /><br />latch a three byte address in the Flash<br /><b>WB.Addr(address)</b><br /><br />Enable/Disable write function<br /><b>WB.WREnable(0|1)</b><br /><br />Set up the page address during a write<br /><b>WB.SetPage</b><br /><br /><br /><a href="Login8d5b.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Section=5" class="editsectionlink"></a><h1 class="separator">Example<a class="headeranchor" id="Example_5" href="#Example_5" title="Link to this Section">&#0182;</a></h1><pre>
'&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;
' your setup code goes  here
'&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;
Init&#58;
	CPU 48
	'Option Autorun On
	'Option Baudrate 9600
	Option Explicit
	Option Base 0

	Const Ver$="0.20 of 24-NOV-2019"

'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-
'The only config you should need to do&#58;
'change the following to the CS pin for the Flash memory
	Const WB.CS=23
'change the following to the SPI channel where your Flash chip is (it's usually OK to leave it open
'so long as nothing else is competing and closes it after use - e.g. LCD panels)
	SPI Open 20000000,0,8'20MHz, mode 0, 8 bits... seems happy at 20MHz but drop this down if you get probs
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-


'mandatory variables in your program&#58;
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-
	Dim Integer WB.RDptr,WB.WRptr,WB.Top,WB.ID,x,n
	Dim WB$
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-

	WB.Init'single sub id's the device, sets mem size and finds first usable address
			'your code should check WB.Top after this call. if no Flash found or couldn't be identified, WB.Top=-1




'&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;
' your program goes  here
'&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;


'A little demonstration code...

	Dim y$

	dim integer m

	If WB.Top=-1 then
		? "Undetected or unknown Flash device "+Hex$(WB.ID,6)
	Else
		? "Found ";WB$;" (";Hex$(WB.ID,6);")"
		? "memory size is";(WB.Top+1)/1024;"KB (0-"+Hex$(WB.Top)+")"
		? "First blank address is ";Hex$(WB.WRptr);"h"
	EndIf
	
	'WB.EraseAll
	'end

'show the statuses just for fun, not necessary
	'a=WB.Stat1RD()
	'?"Status Reg 1",hex$(a,2),bin$(a,8)'and stat1 shows the WEL flag (bit 1)
	'a=WB.Stat2RD()
	'?"Status Reg 2",hex$(a,2),bin$(a,8)
	'a=WB.Stat3RD()
	'?"Status Reg 3",hex$(a,2),bin$(a,8)

	?

'write some random strings to Flash with timings
	?"","WR Time"
	?"&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;"
	'? "String1 ";
	'timer=0&#58;x=WB.WriteStr("s 1")&#58;?timer;"mS"
	'? "String2 ";
	'timer=0&#58;x=WB.WriteStr(string$(255,48+rnd&#42;70))&#58;?timer;"mS"
	'? "String3 ";
	'timer=0&#58;x=WB.WriteStr(string$(255,48+rnd&#42;70))&#58;?timer;"mS"
	'? "String4 ";
	'timer=0&#58;x=WB.WriteStr(string$(255,48+rnd&#42;70))&#58;?timer;"mS"
	'? "String5 ";
	'timer=0&#58;x=WB.WriteStr("s 5")&#58;?timer;"mS"
	
	for n=1 to 10
		? n,
		timer=0&#58;x=WB.WriteStr(string$(30,48+rnd&#42;70))&#58;?timer;"mS"
	next

'read back the strings - demonstrates chr$(255) if attempting to read
	?&#58;?"Now reading back all strings..."
		?"Time","Addr","Data"
	?"&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;"
	Do 
		timer=0&#58;y$=WB.ReadStr$()&#58; ? timer,
		? Hex$(WB.RDptr,4);"h",y$
	Loop while y$&lt;&gt;chr$(255)


	For n=0 To 1023 Step 16
		y$=""
		? Hex$(n,4);"  ";
		For m=0 To 15
			x=WB.Peek(n+m)
			? Hex$(x,2);"  ";
			If x&lt;32 Or x&gt;126 Then x=&amp;h2e
			y$=y$+Chr$(x)
		Next
		? y$
	Next


	Input "Do you want to erase the Flash (Y/N)?",y$
	y$=UCase$(y$)
	If y$="Y" Then
		? "wait a moment"
		timer=0&#58;WB.Format&#58;?timer;"mS"
	EndIf

	End
</pre><br />The routines are fairly brisk and numerous testing /adjustment phases have resulted in some tricks to make them as fast as possible.<br /><br />Here are some timings for stashing 10 thirty-byte strings on a 48MHz '170<br /><code><br />	WR Time<br /><hr><br /> 1	 22mS<br /> 2	 21mS<br /> 3	 21mS<br /> 4	 22mS<br /> 5	 22mS<br /> 6	 21mS<br /> 7	 22mS<br /> 8	 22mS<br /> 9	 29mS<br /> 10	 22mS<br /><br />Now reading back all strings...<br />Time	Addr	Data<br /><hr><br /> 12	001Fh	uuuuuuuuuuuuuuuuuuuuuuuuuuuuuu<br /> 12	003Eh	<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<br /> 11	005Dh	NNNNNNNNNNNNNNNNNNNNNNNNNNNNNN<br /> 12	007Ch	YYYYYYYYYYYYYYYYYYYYYYYYYYYYYY<br /> 12	009Bh	jjjjjjjjjjjjjjjjjjjjjjjjjjjjjj<br /> 12	00BAh	llllllllllllllllllllllllllllll<br /> 12	00D9h	QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ<br /> 11	00F8h	YYYYYYYYYYYYYYYYYYYYYYYYYYYYYY<br /> 12	0117h	VVVVVVVVVVVVVVVVVVVVVVVVVVVVVV<br /> 12	0136h	777777777777777777777777777777<br /></code><br /><br />note the slightly increased time to write string 9? This is due to the string crossing a page boundary and having to reset the page address<br /><br /><br /><a href="Login277a.html?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&amp;Section=6" class="editsectionlink"></a><h1 class="separator">The Code<a class="headeranchor" id="The_Code_6" href="#The_Code_6" title="Link to this Section">&#0182;</a></h1><pre>
'Discover the attached flash memory and initialie all the pointers and stuff
'sets up the CS pin and opens the SPI channel
	Sub WB.Init()
		Local Integer n
		'Pin(WB.CS)=1
		'SetPin WB.CS,DOUT
		WB.Top=-1&#58;WB.WRptr=-1
		'identify the Flash ram by reading the JEDEC ID and setting some key values
		Pin(WB.CS)=0
			x=SPI(&amp;h9F)
			WB.ID=65536&#42;SPI(0)+256&#42;SPI(0)+SPI(0)
		Pin(WB.CS)=1
		'if your device is not listed or comes up unknown, you'll have to determine the correct ID
		'from the device PDF and add it below. Good news is, it looks like all the Winbond W25&#42; are
		'4KB sectors and 256B page size so the code &#42;should&#42; work without any changes - no guarantees
		'only known problem is the code assumes a 24 bit address which breaks for &gt;16MB devices and maybe
		'others which might only provide a 16 bit address - haven't looked at the PDF.
		'The Winbond product selector shows these chips but I couldn't find PDFs for them&#58;
		'W25Q02JV	256MB
		'W25Q01JV	128MB

		Select Case WB.ID
			'&#42;&#42;&#42; Tested
			Case &amp;hEF4018&#58;WB$="W25Q128"'16MB
				WB.Top=16384
			Case &amp;hEF4017&#58;WB$="W25Q64"'8MB
				WB.Top=8192
			Case &amp;hEF4016&#58;WB$="W25Q32"'4MB
				WB.Top=4096

			'&#42;&#42;&#42; UnTested
			Case &amp;hEF4020&#58;WB$="W25Q512"'64MB - probably won't work with this code as &gt;24bit address
				WB.Top=65536
			Case &amp;hEF4019&#58;WB$="W25Q256"'32MB - probably won't work with this code as &gt;24bit address
				WB.Top=32768

			Case &amp;hEF4015&#58;WB$="W25Q16"'2MB
				WB.Top=2048
			Case &amp;hEF4014&#58;WB$="W25Q80"'1MB
				WB.Top=1024
			Case &amp;hEF4013&#58;WB$="W25Q40"'512KB
				WB.Top=512
			Case &amp;hEF5012&#58;WB$="W25Q20"'256KB
				WB.Top=256
			Case &amp;hEF6011&#58;WB$="W25Q10"'128KB
				WB.Top=128
			Case &amp;hEF3010&#58;WB$="W25X05"'64KB
				WB.Top=64
			Case &amp;hBF2642&#58;WB$="SST26VF032"'Microchip 4MB pin and code compatible - needs work on global enable
				WB.Top=4096
			Case Else
				WB.Top=-1&#58;SPI Close&#58;Exit Sub'can't identify
		End Select

		WB.Top=(WB.Top&#42;1024)-1'set the top memory location

'find the first (=lowest address with) FF byte
		If WB.Peek(0)=255 Then WB.WRptr=0&#58;Exit Sub'blank Flash early bath
'otherwise find by successive approximation - very fast, searches 4MB is 80mS
		WB.WRptr=(WB.Top+1)\2&#58;n=WB.WRptr\2'start at the middle and go in smaller and smaller halves
		Do
			If WB.Peek(WB.WRptr)=255 Then
				WB.WRptr=WB.WRptr-n'still in void so go down by half the remainder
			Else
				WB.WRptr=WB.WRptr+n'we are in the strings so go up by half the remainder
			EndIf
			If n&lt;&gt;1 Then n=n\2'smaller and smaller halves
		Loop Until WB.Peek(WB.WRptr)=255 And WB.Peek(WB.WRptr-1)&lt;&gt;255'is the byte before the FF !FF? is so, we are done
	End Sub

'set or clear flash write enable flag
	Sub WB.WREnable(a As Integer)
		If WB.Top=-1 Then Exit Sub
		Local Integer x
		Pin(WB.CS)=0
			If a=0 Then
				x=SPI(4)
			Else
				x=SPI(6)
			EndIf
		Pin(WB.CS)=1
		WB.WaitBusy
	End Sub

'wait while Flash is busy
	Sub WB.WaitBusy
		If WB.Top=-1 Then Exit Sub
		Do While WB.TestBusy()
		'you might want to put a WATCHDOG here. Long operations could break your program
		Loop
	End Sub

'test BUSY flag in STAT1
	Function WB.TestBusy() As Integer
		If WB.Top=-1 Then Exit Function
		WB.TestBusy=(WB.Stat1RD() And 1)
	End Function

	Function WB.Stat1RD() As Integer
		If WB.Top=-1 Then Exit Function
		Local Integer x
		Pin(WB.CS)=0
			x=SPI(5)
			WB.Stat1RD=SPI(0)
		Pin(WB.CS)=1
	End Function

	Function WB.Stat2RD() As Integer
		If WB.Top=-1 Then Exit Function
		Local Integer x
		Pin(WB.CS)=0
			x=SPI(&amp;h35)
			WB.Stat2RD=SPI(0)
		Pin(WB.CS)=1
	End Function

	Function WB.Stat3RD() As Integer
		If WB.Top=-1 Then Exit Function
		Local Integer x
		Pin(WB.CS)=0
			x=SPI(&amp;h15)
			WB.Stat3RD=SPI(0)
		Pin(WB.CS)=1
	End Function

'send a 3 byte address to Flash
	Sub WB.Addr(a As Integer)
		Local Integer x
		x=SPI((a&gt;&gt;16) And 255)
		x=SPI((a&gt;&gt;8) And 255)
		x=SPI(a And 255)
	End Sub

'set the address for page writing
	Sub WB.SetPage
		Local Integer x
		Pin(WB.CS)=1
		WB.WaitBusy
		WB.WREnable 1
		WB.WaitBusy
		Pin(WB.CS)=0
		x=SPI(2)
		WB.Addr WB.WRptr'setup the address
	End Sub

'erase the entire chip - CAUTION takes a long time... 7 seconds on a 4MB chip, 38s on a 16MB.
	Sub WB.Format()
		If WB.Top=-1 Then Exit Sub
		Local Integer x
		WB.WREnable 1
		WB.WaitBusy
		Pin(WB.CS)=0
			x=SPI(&amp;h60)'start the erase - will take some time
		Pin(WB.CS)=1
		WB.WaitBusy
		WB.Init
	End Sub

'	Peek any address in Flash
	Function WB.Peek(a As Integer) As Integer
		If WB.Top=-1 Then Exit Function
		Local Integer x
		Pin(WB.CS)=0
			x=SPI(3)'read at the given address
			WB.Addr a
			WB.Peek=SPI(0)'grab one byte
		Pin(WB.CS)=1
	End Function

'Read a string from the Read Address using the global WB.RDptr variable
	Function WB.ReadStr$()
		If WB.Top=-1 Then Exit Function
		Local Integer x,z
		Local a$
		WB.WaitBusy'wait for the Flash to be idle
		Pin(WB.CS)=0
		x=SPI(3)
		WB.Addr WB.RDptr
		For z=1 to 256'stream the data from Flash into a$, 256 covers max length+chr$(0), we bail early if needed
			x=SPI(0)'get the character
			Select case x
				Case 0 'break out on the delimiter
					Poke Var a$,0,z-1
					WB.RDptr=WB.RDptr+Len(a$)+1'bump the address along by the number of bytes we read +1 for the delimiter
					Exit For
				Case 255 'break out on EOF
					WB.RDptr=WB.RDptr+Len(a$)'should never happen
					a$=Chr$(x)'single char?
					Exit For
				Case Else
					Poke Var a$,z,x
			End select
		Next
		Pin(WB.CS)=1
		WB.ReadStr$=a$
	End Function

'write a string to the next available position. Return 0 if successful
	Function WB.WriteStr(a$) As Integer
		If WB.Top=-1 Then Exit Function
		If WB.WRptr+Len(a$)+1&gt;=WB.Top Then WB.WriteStr=1&#58;Exit Function
		Local Integer n,x
		WB.SetPage
		For n=1 To Len(a$)
			x=SPI(Peek(Var a$,n))
			WB.WRptr=WB.WRptr+1
			If Not(WB.WRptr Mod 256) Then 'checking for a page boundary after each write does not impact 
				WB.SetPage            'the time overly. Only 1ms on a '170 with a 65char string
			EndIf
		Next
		If Not(WB.WRptr Mod 256) Then
			WB.SetPage
		EndIf
		x=SPI(0)
		Pin(WB.CS)=1
		WB.WRptr=WB.WRptr+1
	End Function
</pre><br /><br />
    
    


                <div id="PageInternalFooterDiv"></div>
                <div id="MainFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>

        </div>
            
        <div id="FooterDiv">
             
        </div>

    </form>  
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.History.aspx?Page=MMBasic.MMBasic-code-pack-to-Read-and-Write-Winbond-Flash-Memories&Revision=10 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:50:53 GMT -->
</html>
