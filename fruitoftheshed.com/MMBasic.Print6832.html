

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Temperature-measurement-with-DS1621-with-i2c-bus-part-of-the-original-MMBasic-library by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:24:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	Temperature measurement with DS1621 with i2c bus - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.Temperature-measurement-with-DS1621-with-i2c-bus-part-of-the-original-MMBasic-library" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQF+g88aDEgY2xhc3M9InBhZ2V0aXRsZSI+VGVtcGVyYXR1cmUgbWVhc3VyZW1lbnQgd2l0aCBEUzE2MjEgd2l0aCBpMmMgYnVzPC9oMT48c21hbGw+TW9kaWZpZWQgb24gMjAxNi8xMi8yMyAyMzo0NyBieSBBZG1pbmlzdHJhdG9yICZtZGFzaDsgQ2F0ZWdvcml6ZWQgYXM6IEVsZWN0cm9uaWNzLCBpMmMsIF9MSUIgT3JpZ2luYWwgTU1CYXNpYzwvc21hbGw+PGJyIC8+PGJyIC8+PGgyIGNsYXNzPSJzZXBhcmF0b3IiPlRoaXMgbW9kdWxlIGlzIHBhcnQgb2YgdGhlIG9yaWdpbmFsIE1NQmFzaWMgbGlicmFyeS4gSXQgaXMgcmVwcm9kdWNlZCBoZXJlIHdpdGgga2luZCBwZXJtaXNzaW9uIG9mIEh1Z2ggQnVja2xlIGFuZCBHZW9mZiBHcmFoYW0uIEJlIGF3YXJlIGl0IG1heSByZWZlcmVuY2UgZnVuY3Rpb25hbGl0eSB3aGljaCBoYXMgY2hhbmdlZCBvciBpcyBkZXByZWNhdGVkIGluIHRoZSBsYXRlc3QgdmVyc2lvbnMgb2YgTU1CYXNpYy48YSBjbGFzcz0iaGVhZGVyYW5jaG9yIiBpZD0iVGhpc19tb2R1bGVfaXNfcGFydF9vZl90aGVfb3JpZ2luYWxfTU1CYXNpY19saWJyYXJ5X0l0X2lzX3JlcHJvZHVjZWRfaGVyZV93aXRoX2tpbmRfcGVybWlzc2lvbl9vZl9IdWdoX0J1Y2tsZV9hbmRfR2VvZmZfR3JhaGFtX0JlX2F3YXJlX2l0X21heV9yZWZlcmVuY2VfZnVuY3Rpb25hbGl0eV93aGljaF9oYXNfY2hhbmdlZF9vcl9pc19kZXByZWNhdGVkX2luX3RoZV9sYXRlc3RfdmVyc2lvbnNfb2ZfTU1CYXNpY18wIiBocmVmPSIjVGhpc19tb2R1bGVfaXNfcGFydF9vZl90aGVfb3JpZ2luYWxfTU1CYXNpY19saWJyYXJ5X0l0X2lzX3JlcHJvZHVjZWRfaGVyZV93aXRoX2tpbmRfcGVybWlzc2lvbl9vZl9IdWdoX0J1Y2tsZV9hbmRfR2VvZmZfR3JhaGFtX0JlX2F3YXJlX2l0X21heV9yZWZlcmVuY2VfZnVuY3Rpb25hbGl0eV93aGljaF9oYXNfY2hhbmdlZF9vcl9pc19kZXByZWNhdGVkX2luX3RoZV9sYXRlc3RfdmVyc2lvbnNfb2ZfTU1CYXNpY18wIiB0aXRsZT0iTGluayB0byB0aGlzIFNlY3Rpb24iPiYjMDE4Mjs8L2E+PC9oMj48Yj5Ob3RlPC9iPjogQW55IHJlcXVpcmVkIGZpbGUocykgYXJlIGF2YWlsYWJsZSBpbiB0aGUgYXR0YWNobWVudHMgdGFiICh0b3AgcmlnaHQpLjxiciAvPjxiciAvPjxiPkkyQy5CQVM8L2I+PGJyIC8+PHByZT4NCjEwIENMUw0KMjAgSU5QVVQgIkhvdyBtYW55IHNlY29uZHMgYmV0d2VlbiBUZW1wZXJhdHVyZSBtZWFzdXJlbWVudHMiOyBkZWxheQ0KMzAgQ0xTDQo0MCBkZWxheSA9IGRlbGF5ICYjNDI7IDEwMDANCjUwIGRzMTYyMV9hZGRyID0gJmFtcDtoNDgNCjYwIGNvbmZpZ19jbWQgPSAmYW1wO2hBQw0KNzAgJyBNU2IgQml0NiBCaXQ1IEJpdDQgQml0MyBCaXQyIEJpdDEgTFNiDQo4MCAnIERvbmUgVEhGIFRMRiBOVkIgWCBYIFBPTCAxU0hPVA0KOTAgY29uZmlnX3JlZyA9ICZhbXA7YjAwMDAwMDAxDQoxMDAgc3RhcnRfY29udmVydF9jbWQgPSAmYW1wO2hFRQ0KMTEwIHJlYWRfdGVtcF9jbWQgPSAmYW1wO2hBQQ0KMTIwIERJTSB0ZW1wKDIpDQoxMzAgSTJDRU4gMTAwLCAxMDANCjE0MCBETyBXSElMRSBhJCA9ICIiDQoxNTAgICBhJCA9IElOS0VZJA0KMTYwICAgSTJDU0VORCBkczE2MjFfYWRkciwgMSwgMiwgY29uZmlnX2NtZCwgY29uZmlnX3JlZw0KMTcwICAgSTJDU0VORCBkczE2MjFfYWRkciwgMCwgMSwgc3RhcnRfY29udmVydF9jbWQNCjE4MCAgIEkyQ1NFTkQgZHMxNjIxX2FkZHIsIDEsIDEsIHJlYWRfdGVtcF9jbWQNCjE5MCAgIEkyQ1JDViBkczE2MjFfYWRkciwgMCwgMiwgdGVtcCgwKQ0KMjAwICAgdGVtcCA9ICh0ZW1wKDApICYjNDI7IDI1NiArIHRlbXAoMSkpIC8gMTI4ICYjNDI7IDUgLyAxMA0KMjEwICAgSUYgdGVtcCgwKSAmZ3Q7PSAxMjggVEhFTg0KMjIwICAgICB0ZW1wID0gdGVtcCAtIDI1Ng0KMjMwICAgRU5ESUYNCjI0MCAgIExPQ0FURSA1MCwgNTANCjI1MCAgIFBSSU5UICJBcyBhdCAiIFRJTUUkICIgVGVtcGVyYXR1cmUgaXMiIHRlbXAgIiBkZWdyZWVzIEMgIg0KMjYwICAgUEFVU0UgZGVsYXkNCjI3MCBMT09QDQoyODAgSTJDRElTDQoNCjwvcHJlPmRkUlCDzevK/jHWy1+HPV1w3H47zhk=" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">Temperature measurement with DS1621 with i2c bus</h1><small>Modified on 2016/12/23 23:47 by Administrator &mdash; Categorized as: Electronics, i2c, _LIB Original MMBasic</small><br /><br /><h2 class="separator">This module is part of the original MMBasic library. It is reproduced here with kind permission of Hugh Buckle and Geoff Graham. Be aware it may reference functionality which has changed or is deprecated in the latest versions of MMBasic.<a class="headeranchor" id="This_module_is_part_of_the_original_MMBasic_library_It_is_reproduced_here_with_kind_permission_of_Hugh_Buckle_and_Geoff_Graham_Be_aware_it_may_reference_functionality_which_has_changed_or_is_deprecated_in_the_latest_versions_of_MMBasic_0" href="#This_module_is_part_of_the_original_MMBasic_library_It_is_reproduced_here_with_kind_permission_of_Hugh_Buckle_and_Geoff_Graham_Be_aware_it_may_reference_functionality_which_has_changed_or_is_deprecated_in_the_latest_versions_of_MMBasic_0" title="Link to this Section">&#0182;</a></h2><b>Note</b>: Any required file(s) are available in the attachments tab (top right).<br /><br /><b>I2C.BAS</b><br /><pre>
10 CLS
20 INPUT "How many seconds between Temperature measurements"; delay
30 CLS
40 delay = delay &#42; 1000
50 ds1621_addr = &amp;h48
60 config_cmd = &amp;hAC
70 ' MSb Bit6 Bit5 Bit4 Bit3 Bit2 Bit1 LSb
80 ' Done THF TLF NVB X X POL 1SHOT
90 config_reg = &amp;b00000001
100 start_convert_cmd = &amp;hEE
110 read_temp_cmd = &amp;hAA
120 DIM temp(2)
130 I2CEN 100, 100
140 DO WHILE a$ = ""
150   a$ = INKEY$
160   I2CSEND ds1621_addr, 1, 2, config_cmd, config_reg
170   I2CSEND ds1621_addr, 0, 1, start_convert_cmd
180   I2CSEND ds1621_addr, 1, 1, read_temp_cmd
190   I2CRCV ds1621_addr, 0, 2, temp(0)
200   temp = (temp(0) &#42; 256 + temp(1)) / 128 &#42; 5 / 10
210   IF temp(0) &gt;= 128 THEN
220     temp = temp - 256
230   ENDIF
240   LOCATE 50, 50
250   PRINT "As at " TIME$ " Temperature is" temp " degrees C "
260   PAUSE delay
270 LOOP
280 I2CDIS

</pre>
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Temperature-measurement-with-DS1621-with-i2c-bus-part-of-the-original-MMBasic-library by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:24:55 GMT -->
</html>
