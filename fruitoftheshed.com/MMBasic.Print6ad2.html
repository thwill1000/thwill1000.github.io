

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Determining-the-Number-of-Pins-on-the-Platform by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:15:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	Determining the Number of Pins on the Platform - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.Determining-the-Number-of-Pins-on-the-Platform" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQF5Q48aDEgY2xhc3M9InBhZ2V0aXRsZSI+RGV0ZXJtaW5pbmcgdGhlIE51bWJlciBvZiBQaW5zIG9uIHRoZSBQbGF0Zm9ybTwvaDE+PHNtYWxsPk1vZGlmaWVkIG9uIDIwMjIvMDEvMDEgMTE6MzYgYnkgQ2FwdGFpbkJvaW5nICZtZGFzaDsgQ2F0ZWdvcml6ZWQgYXM6IEF1dG8tY29uZmlndXJpbmcgY29kZSwgRWxlY3Ryb25pY3MsIEhhcmR3YXJlLCBQcm9ncmFtIEZsb3c8L3NtYWxsPjxiciAvPjxiciAvPkFsbCBNaWNyby1jb250cm9sbGVyIHBsYXRmb3JtcyBydW5uaW5nIE1NQmFzaWMgc2hvdyBhIHJlbWFya2FibGUgZGVncmVlIG9mIG5hdGl2ZSBjcm9zcy1wbGF0Zm9ybSBjb2RlLWNvbXBhdGliaWxpdHkuPGJyIC8+PGJyIC8+QXMgc3VjaCwgaXQgaXMgbm93IGNvbW1vbiB0byBzZWUgY29kZSB3aXRoIGlkaW9zeW5jcmF0aWMgY29uZmlndXJhdGlvbiBhbmQgc3dpdGNoaW5nIGNvZGUuPGJyIC8+PGJyIC8+T25lIHN1Y2ggcmVxdWlyZW1lbnQgY291bGQgYmUgZGV0ZXJtaW5pbmcgdGhlIG51bWJlciBvZiBwaW5zIG9uIGEgcGFydGljdWxhciBkZXZpY2UgdGh1cyBhbGxvd2luZyBjb2RlIHRvIGF1dG8tY29uZmlndXJlIGZvciwgc2F5LCB0aGUgMjggYW5kIDQ0IHBpbiB2YXJpYW50cyBvZiB0aGUgJzE3MC1iYXNlZCBNaWNyb01pdGUgTWsyPGJyIC8+PGJyIC8+VGhlcmUgaXMgYSBDRnVuY3Rpb24gd2hpY2ggY2FuIGRldGVybWluZSB0aGlzIChieSBpbXBsaWNhdGlvbikgb24gUElDMzJNWCBwbGF0Zm9ybXMgKGluIHRoZSAiRW1iZWRkZWQgQyBNb2R1bGVzIiBmb2xkZXIgb2YgdGhlIHNvZnR3YXJlIGRpc3RyaWJ1dGlvbiksIGJ1dCB0aGF0IGlzb2xhdGVzIGFueSBTVCBhbmQgUGkgcGxhdGZvcm1zIC0gdHJ1ZSBzb21lIG9mIHRoZW0gYXJlIGJlZ2lubmluZyB0byBzdXBwb3J0IENTdWJzIGJ1dCBjb2RlIGNvbXBhdGliaWx0eSByZW1haW5zIGEgc3BlY3RyZS48YnIgLz48YnIgLz5Hb29kIG5ld3M7IGl0IGlzIG5vdCB0cmlja3kgdG8gZG8gaW4gbmF0aXZlIE1NQmFzaWMuIEFsc28sIHRoZXJlIGlzIG1lcml0IGluIHN0YXlpbmcgd2l0aGluIE1NQmFzaWMgYW5kIG5vdCBiZWluZyBsaW1pdGVkIHRvIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgQ1N1YnMsIG1hY2hpbmUgY29kZSBjb21wYXRpYmlsaXR5IGFuZCB0aGUgcHJvZ3JhbS1zcGFjZSBzYXZpbmcgb24gbm9uLWxpYnJhcnktaXNlZCBjb2RlLjxiciAvPjxiciAvPlRoZSBiZWxvdyBjb2RlIHNuaXBwZXQgcXVpY2tseSByZXR1cm5zIHRoZSBudW1iZXIgb2YgcGlucyB3aGVuIHJ1biBvbiBhIFBJQzMyTVgxNzAuIFRoaXMgY291bGQgZWFzaWx5IGJlIGV4cGFuZGVkIHRvIHByb3ZpZGUgdGhlIGZ1bmN0aW9uYWxpdHkgb24gYW55IHBsYXRmb3JtLCB1c2luZyBNTS5EZXZpY2UkIHRvIGRldGVybWluZSBhIHNwZWNpZmljIHNldCBvZiB0ZXN0cyBmb3IgYSBnaXZlbiBzZXQgb2YgbGlrZSBwbGF0Zm9ybXMuPGJyIC8+PGJyIC8+PGI+VGhlIENvZGU6PC9iPjxiciAvPjxwcmU+DQonZGV0ZXJtaW5lIG51bWJlciBvZiBwaW5zDQogICAgICAgIG49MjggICAgICAgICAgICAgICAnZGVmYXVsdCB0byAyOCAtIGl0IHdpbGwgZ2V0IG92ZXItd3JpdHRlbiBpZiB0aGUgYmVsb3cgaXMgc3VjY2Vzc2Z1bA0KICAgICAgICBPbiBFcnJvciBTa2lwIDINCiAgICAgICAgU2V0cGluIDQ0LERJTiAgICAgICd0aGlzLi4uDQogICAgICAgIG49NDQgICAgICAgICAgICAgICAnLi4uYW5kIHRoaXMgYXJlIHNraXBwZWQgaWYgd2UgYnVtcCBpbnRvIGFuIGVycm9yIChwaW4gNDQgZG9lc24ndCBleGlzdCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICdzbyB0aGUgcGlucyBzdGF5IGF0IDI4DQonaGVyZSBuPW51bWJlciBvZiBwaW5zIG9uIGRldmljZQ0KICAgICAgICBQcmludCBuDQo8L3ByZT48YnIgLz5kZBW2cRFvnIwaIeCRit8yGSGwFvP+" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">Determining the Number of Pins on the Platform</h1><small>Modified on 2022/01/01 11:36 by CaptainBoing &mdash; Categorized as: Auto-configuring code, Electronics, Hardware, Program Flow</small><br /><br />All Micro-controller platforms running MMBasic show a remarkable degree of native cross-platform code-compatibility.<br /><br />As such, it is now common to see code with idiosyncratic configuration and switching code.<br /><br />One such requirement could be determining the number of pins on a particular device thus allowing code to auto-configure for, say, the 28 and 44 pin variants of the '170-based MicroMite Mk2<br /><br />There is a CFunction which can determine this (by implication) on PIC32MX platforms (in the "Embedded C Modules" folder of the software distribution), but that isolates any ST and Pi platforms - true some of them are beginning to support CSubs but code compatibilty remains a spectre.<br /><br />Good news; it is not tricky to do in native MMBasic. Also, there is merit in staying within MMBasic and not being limited to platforms that support CSubs, machine code compatibility and the program-space saving on non-library-ised code.<br /><br />The below code snippet quickly returns the number of pins when run on a PIC32MX170. This could easily be expanded to provide the functionality on any platform, using MM.Device$ to determine a specific set of tests for a given set of like platforms.<br /><br /><b>The Code:</b><br /><pre>
'determine number of pins
        n=28               'default to 28 - it will get over-written if the below is successful
        On Error Skip 2
        Setpin 44,DIN      'this...
        n=44               '...and this are skipped if we bump into an error (pin 44 doesn't exist)
                           'so the pins stay at 28
'here n=number of pins on device
        Print n
</pre><br />
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Determining-the-Number-of-Pins-on-the-Platform by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:15:38 GMT -->
</html>
