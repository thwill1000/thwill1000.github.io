

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from fruitoftheshed.com/MMBasic.A-Simple-GUI-pack.ashx?NS=MMBasic by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:34:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=8" /><title>
	A Simple GUI pack - Fruit Of The Shed
</title><script type="text/javascript" src="JS/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="JS/Scripts.js"></script>
<script type="text/javascript" src="JS/SearchHighlight.js"></script>
<link rel="stylesheet" media="print" href="Themes/Default/Print_Styles.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles%20-%20Copy.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles.css" type="text/css" />
<link rel="stylesheet" href="Themes/Editor.css" type="text/css" />
<link rel="search" href="searchf7b1.xml?OpenSearch=1" type="application/opensearchdescription+xml" title="Fruit Of The Shed - Search" /><script src="Themes/Default/Scripts.js" type="text/javascript"></script>
<link rel="shortcut icon" href="Themes/Default/Icon.ico" type="image/x-icon" />
</head>
<body>
    <form name="aspnetForm" method="post" action="http://fruitoftheshed.com/Default.aspx?Page=A-Simple-GUI-pack&amp;NS=MMBasic" id="aspnetForm">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUJMTQ3NjA4MDI2D2QWAmYPZBYCAgEPZBYCAgkPZBYEAhsPDxYCHg1BbnRoZW1WaXNpYmxlaGRkAicPDxYCHgdWaXNpYmxlaGQWAmYPFgIeC18hSXRlbUNvdW50ZmRkL9X+pH8J+jB1IIJZx71WjgOrjyw=" />
</div>

<script type="text/javascript">
//<![CDATA[
var Anthem_FormID = "aspnetForm";
//]]>
</script>
<script src="WebResource3c0c.axd?d=wu8PDPV1hmKciPrhUAi9NEjQUBbOefrIXCaRPwGH8Q5jrvPZFuGbKmycL3GXDKGD1_JZ083oQl1Kpd_P7rg1V93MtYOS3Vb-0Eztmu5VDCWQxc7l0&amp;t=636158881040000000" type="text/javascript"></script>
<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="CA0B0334" />
</div>
		<script type="text/javascript">
<!--
__BaseName = "ctl00_CphMaster_";
__ConfirmMessage = "Are you sure you want to proceed?";
// -->
</script>
		<script type="text/javascript">
		<!--
			function __GetServerElementById(id) {
				return document.getElementById(__BaseName + id);
			}
			function __RequestConfirm() {
				return confirm(__ConfirmMessage);
			}
		// -->
		</script>
    
        <div id="HeaderDiv">
            <div style="float: right;">Welcome <a href="MMBasic.Language.html" class="systemlink" title="Select your language">Guest</a>, you are in: <select class="namespacedropdown" onchange="javascript:var sel = this.value; document.location = (sel != '' ? (sel + '.') : '') + 'Default.aspx';"><option value="">&lt;root&gt;</option><option value="Circuit Ideas">Circuit Ideas</option><option value="Colour MaxiMite 2 (CMM2)">Colour MaxiMite 2 (CMM2)</option><option value="GCB">GCB</option><option value="MicroMite ArmMite and MMX Hardware">MicroMite ArmMite and MMX Hardware</option><option selected="selected" value="MMBasic">MMBasic</option><option value="PIC ASM">PIC ASM</option><option value="Platform Agnostic">Platform Agnostic</option></select> &bull; <a href="MMBasic.Loginf21c.html?Redirect=http%3a%2f%2ffruitoftheshed.com%2fDefault.aspx%3fPage%3dA-Simple-GUI-pack%26NS%3dMMBasic" class="systemlink" title="Login">Login</a></div><h1>Fruit Of The Shed</h1>
        </div>
                   
        <div id="ContainerDiv">
                 
            <div id="SidebarDiv">
                <div id="SidebarHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="SidebarContentDiv">
                    <div style="float: right;"> </div><h3 class="separator">Navigation (MMBasic)<a class="headeranchor" id="Navigation_NAMESPACE_0" href="#Navigation_NAMESPACE_0" title="Link to this Section">&#0182;</a></h3><ul><li><b><a class="pagelink" href="MMBasic.MainPage.html" title="_MMBasic Code Library">Main Page</a></b></li><li><a class="pagelink" href="MainPage.html" title="Home Page">Main Page (root)</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.EggDrop-part-of-the-original-MMBasic-libraryc674.html" title="Random Page">Random Page</a></li><li><a class="systemlink" href="MMBasic.AllPages.html" title="All Pages">All Pages</a><br /> </li><li><a class="systemlink" href="Logina75d.html" title="Create a new Page">Create a new Page</a><br /></li></ul><br /><ul><li><a class="systemlink" href="Logine894.html" title="Administration">Administration</a></li><li><a class="systemlink" href="MMBasic.Upload.html" title="File Management">File Management</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="My Account">My Account</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="Create Account">Create Account</a><br /></li></ul><br /><small><b>Search the wiki</b></small><br /><br /><script type="text/javascript"><!--
function _DoSearch_SBf63524b4df3e46d58daced6fab3b588b() { document.location = 'MMBasic.Search.aspx?AllNamespaces=1&FilesAndAttachments=1&Query=' + encodeURI(document.getElementById('SBf63524b4df3e46d58daced6fab3b588b').value); }
// -->
</script><input class="txtsearchbox" type="text" id="SBf63524b4df3e46d58daced6fab3b588b" onkeydown="javascript:var keycode; if(window.event) keycode = event.keyCode; else keycode = event.which; if(keycode == 10 || keycode == 13) { _DoSearch_SBf63524b4df3e46d58daced6fab3b588b(); return false; }" /> <big><a href="#" onclick="javascript:_DoSearch_SBf63524b4df3e46d58daced6fab3b588b(); return false;">&raquo;</a></big><br /><br /><br />
                </div>
                <div id="SidebarFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>
            <div id="MainDiv">
                <div id="MainHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="PageInternalHeaderDiv"></div>
                

    <script type="text/javascript">
    <!--
        function __ShowAllTrail() {
            try {
                document.getElementById("BreadcrumbsDivMin").style["display"] = "none";
                document.getElementById("BreadcrumbsDivAll").style["display"] = "";
                __SetStatus("1");
            }
            catch(ex) { }
            return false;
        }
        function __HideTrail() {
            try {
                document.getElementById("BreadcrumbsDivMin").style["display"] = "";
                document.getElementById("BreadcrumbsDivAll").style["display"] = "none";
                __SetStatus("0");
            }
            catch(ex) { }
            return false;
        }
        
        function __SetStatus(open) {
            __CreateCookie("ScrewTurnWikiBCT", open, 365);
        }
        function __GetStatus() {
            var value = __ReadCookie("ScrewTurnWikiBCT");
            if(value) return value;
            else return "0";
        }

        function __InitBCT() {
        	if(__GetStatus() == "1") {
        		__ShowAllTrail();
        	}
        }

        var __attachmentsMenuJustShown = false;
        var __adminToolsMenuJustShown = false;
        var __ie7Mode = false;

        function __ToggleAttachmentsMenu(cx, cy) {
        	var element = document.getElementById("PageAttachmentsDiv");
        	if(element) {
        		if(element.style["display"] == "none") {
        			element.style["display"] = "";
        			var pos = __AbsolutePosition(element);
        			if(pos.left - cx > 0) {
        				__ie7Mode = true;
        				element.style["position"] = "absolute";
        				element.style["top"] = cy + "px";
        				element.style["left"] = (cx - pos.width) + "px";
        			}
        			else {
        				__RepositionDiv(document.getElementById("PageAttachmentsLink"), element);
        			}
        			__attachmentsMenuJustShown = true;
        		}
        	}
        	return false;
        }
        function __HideAttachmentsMenu() {
        	var element = document.getElementById("PageAttachmentsDiv");
        	if(element && !__attachmentsMenuJustShown) {
        		element.style["display"] = "none";
        		if (__ie7Mode) element.style["left"] = "10000px";
        	}
        	__attachmentsMenuJustShown = false;
        	return true; // Needed to enabled next clicks' action (file download)
        }

        function __ToggleAdminToolsMenu(cx, cy) {
        	var element = document.getElementById("AdminToolsDiv");
        	if(element) {
        		if(element.style["display"] == "none") {
        			element.style["display"] = "";
        			var pos = __AbsolutePosition(element);
        			if(pos.left - cx > 0) {
        				__ie7Mode = true;
        				element.style["position"] = "absolute";
        				element.style["top"] = cy + "px";
        				element.style["left"] = (cx - pos.width) + "px";
        			}
        			else {
        				__RepositionDiv(document.getElementById("AdminToolsLink"), element);
        			}
        			__adminToolsMenuJustShown = true;
        		}
        	}
        	return false;
        }
        function __HideAdminToolsMenu() {
        	var element = document.getElementById("AdminToolsDiv");
        	if(element && !__adminToolsMenuJustShown) {
        		element.style["display"] = "none";
        		if(__ie7Mode) element.style["left"] = "10000px";
        	}
        	__adminToolsMenuJustShown = false;
        	return true; // Needed to enable next clicks' action (admin tools)
        }

        function __HideAllMenus() {
        	__HideAttachmentsMenu();
        	__HideAdminToolsMenu();
        }

        document.body.onclick = __HideAllMenus;

        function __AbsolutePosition(obj) {
        	var pos = null;
        	if(obj != null) {
        		pos = new Object();
        		pos.top = obj.offsetTop;
        		pos.left = obj.offsetLeft;
        		pos.width = obj.offsetWidth;
        		pos.height = obj.offsetHeight;

        		obj = obj.offsetParent;
        		while(obj != null) {
        			pos.top += obj.offsetTop;
        			pos.left += obj.offsetLeft;
        			obj = obj.offsetParent;
        		}
        	}
        	return pos;
        }

        var __showTimer = null;
        var __hideTimer = null;

        function __ShowDropDown(e, divId, parent) {
           	// Set a timer
        	// On mouse out, cancel the timer and start a 2nd timer that hides the menu
        	// When the 1st timer elapses
        	//   show the drop-down
        	//   on menu mouseover, cancel the 2nd timer
        	//   on menu mouse out, hide the menu
        	__showTimer = setTimeout('__ShowDropDownForReal(' + e.clientX + ', ' + e.clientY + ', "' + divId + '", "' + parent.id + '");', 200);
        }

        function __ShowDropDownForReal(cx, cy, divId, parentId) {
        	var pos = __AbsolutePosition(document.getElementById(parentId));
        	var menu = document.getElementById(divId);

			// This is needed to trick IE7 which, for some reason,
			// does not position the drop-down correctly with the new Default theme
        	if(pos.left - cx > 30) {
        		menu.style["display"] = "";
        		menu.style["position"] = "absolute";
        		menu.style["top"] = cy + "px";
        		menu.style["left"] = (cx - 10) + "px";
        	}
        	else {
        		menu.style["display"] = "";
        		menu.style["position"] = "absolute";
        		menu.style["top"] = (pos.top + pos.height) + "px";
        		menu.style["left"] = pos.left + "px";
        	}
        	__showTimer = null;
        }

        function __HideDropDown(divId) {
        	if(__showTimer) clearTimeout(__showTimer);
        	__hideTimer = setTimeout('__HideDropDownForReal("' + divId + '");', 200);
        }

        function __HideDropDownForReal(divId) {
        	document.getElementById(divId).style["display"] = "none";
        	__hideTimer = null;
        }

        function __CancelHideTimer() {
        	if(__hideTimer) clearTimeout(__hideTimer);
        }
        
    // -->
    </script>

	<a id="PageTop"></a>
	
	<div id="PageHeaderDiv">
	
		<!-- Change this to PageToolbarDiv -->
		<div id="EditHistoryLinkDiv">
			<a id="DiscussLink" title="Discuss" href="MMBasic.A-Simple-GUI-pack266d.html?Discuss=1">Discuss (0)</a>
			
			
			<a id="HistoryLink" title="View Page edit history" href="MMBasic.Historyba9f.html?Page=MMBasic.A-Simple-GUI-pack">History</a>
			
			
			
			
			
		</div>
		
		<h1 class="pagetitle">
			
			A Simple GUI pack
			
		</h1>
		
		<div id="PrintLinkDiv">
			<a id="PrintLink" href="MMBasic.Printba9f.html?Page=MMBasic.A-Simple-GUI-pack" title="Printer friendly version" target="_blank">Print</a>
		</div>
		
		<div id="RssLinkDiv">
			
		</div>
		
		<div id="EmailNotificationDiv">
			<span id="Anthem_ctl00_CphMaster_btnEmailNotification__"></span>
		</div>
		
		<div id="ctl00_CphMaster_pnlPageInfo">
	
			<div id="PageInfoDiv">
				<span id="ModificationSpan">
					Modified on 
					2021/04/08 11:03
				</span>
				<span id="AuthorSpan">
					 by 
					<a href="MMBasic.Userb2ec.html?Username=hendy">CaptainBoing</a>
				</span>
				<span id="NavPathsSpan">
					
				</span>
				<span id="CategoriesSpan">
					Categorized as 
					<a href="MMBasic.AllPageseb16.html?Cat=MMBasic.Graphics" title="Graphics">Graphics</a>, <a href="MMBasic.AllPages39e4.html?Cat=MMBasic.LCD%20Panels" title="LCD Panels">LCD Panels</a>
				</span>
				
				<span id="PageDiscussionSpan">
					
					
				</span>
			</div>
		
</div>
		
		<div id="ff9056d33-6b60-468c-bc8c-3193b4049550" style="display: none;" class="pageoutgoinglinksmenu" onmouseover="javascript:return __CancelHideTimer();" onmouseout="javascript:return __HideDropDown('ff9056d33-6b60-468c-bc8c-3193b4049550');"></div><div id="f6b9aca86-a77c-44d2-8a30-1e4bd191a104" style="display: none;" class="pageoutgoinglinksmenu" onmouseover="javascript:return __CancelHideTimer();" onmouseout="javascript:return __HideDropDown('f6b9aca86-a77c-44d2-8a30-1e4bd191a104');"><a href="Creating-and-Editing-Pages-on-Fruit-of-the-Shed.html" title="Creating and Editing Pages on Fruit of the Shed">Creating and Editing Pages on Fruit of the Shed</a></div><div id="fefda03b1-2747-4f52-9abb-249081f3cb5f" style="display: none;" class="pageoutgoinglinksmenu" onmouseover="javascript:return __CancelHideTimer();" onmouseout="javascript:return __HideDropDown('fefda03b1-2747-4f52-9abb-249081f3cb5f');"><a href="MMBasic.uFormat-and-StrE-provide-flexible-formatting-of-numeric-values.html" title="uFormat$() and StrE$() provide flexible formatting of numeric values">uFormat$() and StrE$() provide flexible formatting of numeric values</a></div><div id="fd9bc82b3-c36b-4a20-8e81-aa7ab5665a0c" style="display: none;" class="pageoutgoinglinksmenu" onmouseover="javascript:return __CancelHideTimer();" onmouseout="javascript:return __HideDropDown('fd9bc82b3-c36b-4a20-8e81-aa7ab5665a0c');"><a href="MMBasic.VB-Work-a-like-LTrim-and-RTRIM-Functions.html" title="LTrim and RTrim Functions (VB work-a-like)">LTrim and RTrim Functions (VB work-a-like)</a><a href="MMBasic.LTrim-RTrim-cFunctions.html" title="LTrim RTrim CFunctions">LTrim RTrim CFunctions</a><a href="MMBasic.String-editing-on-screen-for-VT-compatible-Terminals.html" title="String editing on-screen for VT compatible Terminals">String editing on-screen for VT compatible Terminals</a></div><div id="f5a476273-1a71-4d6e-856f-e084c842648d" style="display: none;" class="pageoutgoinglinksmenu" onmouseover="javascript:return __CancelHideTimer();" onmouseout="javascript:return __HideDropDown('f5a476273-1a71-4d6e-856f-e084c842648d');"></div><div id="s86ba24b6-93a4-44ce-8d97-1f40d95d52f9" style="display: none;" class="pageoutgoinglinksmenu" onmouseover="javascript:return __CancelHideTimer();" onmouseout="javascript:return __HideDropDown('s86ba24b6-93a4-44ce-8d97-1f40d95d52f9');"></div><div id="BreadcrumbsDiv"><div id="BreadcrumbsDivMin"><a href="#" onclick="javascript:return __ShowAllTrail();" title="Click here to view the complete Breadcrumbs Trail">(10)</a> &raquo; <a href="Creating-and-Editing-Pages-on-Fruit-of-the-Shed.html" title="Creating and Editing Pages on Fruit of the Shed">Creating and Editing Pages on Fruit of the Shed</a> &raquo; <a href="MMBasic.EggDrop-part-of-the-original-MMBasic-library.html" title="EggDrop (MMBasic)">EggDrop (MMBasic)</a> &raquo; <b><a href="MMBasic.A-Simple-GUI-pack.html" title="A Simple GUI pack (MMBasic)">A Simple GUI pack (MMBasic)</a></b> </div><div id="BreadcrumbsDivAll" style="display: none;"><a href="#" onclick="javascript:return __HideTrail();" title="Click here to hide the Breadcrumbs Trail">[X]</a> &raquo; <a href="MMBasic.Vehicle-Reversing-Assistant.html" title="Vehicle Reversing Assistant (MMBasic)">Vehicle Reversing Assistant (MMBasic)</a> &raquo; <a href="MMBasic.vmndlbrot-bas-part-of-the-original-MMBasic-library.html" title="vmndlbrot.bas (MMBasic)">vmndlbrot.bas (MMBasic)</a> &raquo; <a href="MMBasic.Simple-screen-Control-for-ANSI-based-Consoles-VT100-etc.html" title="VT Console Pack. Screen Positioning, Sane Key Scanning And a String Editing Routine (MMBasic)" onmouseover="javascript:return __ShowDropDown(event, 'fd9bc82b3-c36b-4a20-8e81-aa7ab5665a0c', this);" id="lnkfd9bc82b3-c36b-4a20-8e81-aa7ab5665a0c" onmouseout="javascript:return __HideDropDown('fd9bc82b3-c36b-4a20-8e81-aa7ab5665a0c');">VT Console Pack. Screen Positioning, Sane Key Scanning And a String Editing Routine (MMBasic)</a> &raquo; <a href="MMBasic.Xmodem-CRC.html" title="Xmodem CRC (MMBasic)">Xmodem CRC (MMBasic)</a> &raquo; <a href="MMBasic.ZPad-pad-a-number-with-leading-zeroes.html" title="ZPad$() - pad a number with leading zeroes (MMBasic)" onmouseover="javascript:return __ShowDropDown(event, 'fefda03b1-2747-4f52-9abb-249081f3cb5f', this);" id="lnkfefda03b1-2747-4f52-9abb-249081f3cb5f" onmouseout="javascript:return __HideDropDown('fefda03b1-2747-4f52-9abb-249081f3cb5f');">ZPad$() - pad a number with leading zeroes (MMBasic)</a> &raquo; <a href="MMBasic.MainPage.html" title="_MMBasic Code Library (MMBasic)">_MMBasic Code Library (MMBasic)</a> &raquo; <a href="MainPage.html" title="Home Page" onmouseover="javascript:return __ShowDropDown(event, 'f6b9aca86-a77c-44d2-8a30-1e4bd191a104', this);" id="lnkf6b9aca86-a77c-44d2-8a30-1e4bd191a104" onmouseout="javascript:return __HideDropDown('f6b9aca86-a77c-44d2-8a30-1e4bd191a104');">Home Page</a> &raquo; <a href="Creating-and-Editing-Pages-on-Fruit-of-the-Shed.html" title="Creating and Editing Pages on Fruit of the Shed">Creating and Editing Pages on Fruit of the Shed</a> &raquo; <a href="MMBasic.EggDrop-part-of-the-original-MMBasic-library.html" title="EggDrop (MMBasic)">EggDrop (MMBasic)</a> &raquo; <b><a href="MMBasic.A-Simple-GUI-pack.html" title="A Simple GUI pack (MMBasic)">A Simple GUI pack (MMBasic)</a></b> </div></div>
		
		
	
	</div>
	
	<div id="PageContentDiv">
		A purely MMBasic GUI pack to provide a WindowsCE/95 look-a-like LCD panel interface for your projects.<br /><br />This is a work in progress in my spare time. This document has lots of improvements required - and I'll do them... just need a bit more time.<br />Still to come: Lists, Drop-down Lists, tab strips, pop-up windows (if I can work out a way to do it). As it is now, it provides a lot of functionality and is usable. If you only need the simpler end of the GUI - buttons, checkboxes, radio buttons and text boxes etc, it is good to go. Let's face it; they probably cover 100% of simple interfaces.<br /><br />Enjoy<br /><br /><h2 class="separator"><b>A Universal, Simple GUI pack</b><a class="headeranchor" id="_A_Universal_Simple_GUI_pack__21" href="#_A_Universal_Simple_GUI_pack__21" title="Link to this Section">&#0182;</a></h2>The larger MicroMites and ARMMites have a built –in GUI that allows your code to have an interactive LCD panel with all the usual gadgets (buttons, check boxes etc.) that we have become used to in the last 30 years. The MicroMite Mk2 is constrained in that there simply isn’t room in flash to add such luxuries to the firmware for these small but powerful microcontrollers. The following is a pure MMBasic solution so it can easily be deployed on any ‘Mite platform and thanks to the efforts of others is platform independent across the whole MicroMite/ColourMaxiMite2 eco system.<br /><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="guigrab1f0a3.jpeg?File=/MMBasic/guigrab1.jpeg" alt="Image" /><br /><br /><h3 class="separator"><b>Conventions</b><a class="headeranchor" id="_Conventions__12" href="#_Conventions__12" title="Link to this Section">&#0182;</a></h3>Throughout this article, things that get put on the screen using this GUI pack are called "Gadgets" (I was an Amiga boy – sue me). In the GUI software pack, anywhere you see "Obj" (short for object) it is the same as a gadget – the two terms are interchangeable here.<br /><br /><br /><h3 class="separator"><b>Variable and Constant name considerations</b><a class="headeranchor" id="_Variable_and_Constant_name_considerations__13" href="#_Variable_and_Constant_name_considerations__13" title="Link to this Section">&#0182;</a></h3><ul><br /><li>Starting with a capital are global (defined in the main body of the program).<br /><li>Constants start with upper case.<br /><li>Local variables start with lower case (defined inside a Sub or Function).<br /><li>All arrays must start at 0.<br /></ul><br /><br /><h3 class="separator"><b>Background</b><a class="headeranchor" id="_Background__14" href="#_Background__14" title="Link to this Section">&#0182;</a></h3>Many of my own projects use the small Micromite Mk2, a diminutive yet powerful PIX32MX170-based microcontroller with 60K of program flash and 50K RAM and have been, in the past, console only due to the pain of making a good interactive screen (on an LCD panel). In later projects, I have been building my own GUIs based very strongly around a WindowsCE/95 look-a-like. I just happen to think the nice clean lines of the GUI with its default grey background and relief style buttons etc is so much nicer than the "Metro" or flat look of Windows 10.<br /><br />Not having a GUI subsystem, any such project that has buttons etc. had to be built from the ground up each time and were specifically managed with fixed co-ordinates and code to handle the presses of each button. It was a very inflexible solution. Modifications were a nightmare because the co-ordinates where specifically tested for presses etc. so if you moved a gadget, you had to hunt-down and tweak the code that looked for presses on it... annoying horrible stuff like that.<br /><br />It had been on the back-burner of my mind to build (in MMBasic) a complete subsystem that got rid of that and just let me design the GUI then concentrate on the application code and not have to worry about managing the screen a-fresh each time. Other people had shown an interest in the displays on some projects and it was a bit embarrassing to reveal it was bespoke each time. The following is the fruits of my labours. It is currently about 12K in size – which might come across as a lot of space at first glance, but when you consider I would often have 5 or 6K of very inflexible code to handle a screenful of buttons, it isn’t that much of a sacrifice. You could trim it down to get rid of the bits you don’t want if size becomes a problem - as you will see it provides quite an array of gadgets. Even drop-down lists and pop-up windows (eventually)!<br /><br />A problem with driving LCD panels from MMBasic on smaller beasts is the one-directional nature of the communication with the LCD panel... you can throw stuff on them, but it is hard work (and slow in Basic) to pull back what is on the screen and buffer it so you can repair "damage". In my approach here (confession: I have stolen a few ideas from my years as a VB programmer) is structured items that can be quickly re-drawn when scribbled over. An example here is the text box. At first thought you might wonder why you would use it instead of simply throwing text on the panel as normal. If you now think of a drop down menu drawing all over the screen contents, unless you know what it has damaged, how do you repair your lovely GUI? With simple Text, that isn’t possible unless you have buffered the memory of the affected screen area (this is what Windows does). With a structured text box, the list or pop-up can tell which items it has drawn over and so when it goes away, it can easily initiate re-drawing just those items.<br /><br /><br /><h3 class="separator"><b>Structure Mechanism</b><a class="headeranchor" id="_Structure_Mechanism__15" href="#_Structure_Mechanism__15" title="Link to this Section">&#0182;</a></h3>Two shared arrays hold the attributes of each gadget; its type, its place on the screen, the colours, its properties etc. The limit to the number of gadgets is available RAM. The values stored here are then used to draw the gadgets using the in-built primitives of MMBasic (Box, Line, Text etc...)<br /><br />Each gadget has a numerical "name" that can be whatever you like. It is a number you decide in your program and is entirely defined by you - any 31 bit positive integer (I have plans for the top 32 bits). Internally, all objects are identified by a pointer, so where you see "n" in the code, that is usually it - you never need to concern yourself with it. The codepack will translate back and forth between ID and pointer as needed. Whenever you want to talk to one of your gadgets, you use the ID you gave it, never the internal pointer. You can use the ID to apply logical grouping to your gadgets.<br /><br />I have an idea to allow pages of gadgets which would give a multi-screen effect simply by hiding everything not in a certain range... perhaps tabs along the top to select between the pages. You could even have several "layers" of them and simply switch them on and off as you see fit making context-sensitive "screens" a breeze.<br /><br />There are lots of areas for improvement - speed-wise, I could provide a short-cut sub for drawing an object in places where we already have its pointer, but that's two Subs and then the size starts to creep up and we are impacting the precious 60K of Flash space. Always a trade-off.<br /><br /><br /><h3 class="separator"><b>Code Portability</b><a class="headeranchor" id="_Code_Portability__16" href="#_Code_Portability__16" title="Link to this Section">&#0182;</a></h3>The MicroMite range of controllers is very broad for a single concept. Tiny 28pin devices, all the way up through to the mighty ARM based CMM2. The astonishing thing here is the degree of code compatibility - certainly backwardly. I passionately believe in making my code as universal as possible and some tests done recently on <a class="externallink" href="https://www.thebackshed.com/forum/ViewForum.php?FID=16" title="TheBackShed" target="_blank">TheBackShed</a> forum have shown that the original code as first published was subject to "lift 'n' shift" onto several other 'mites and ran without any tweaks or issues. The CMM2 is a leap in what is technologically available on the platform and provides all the HID features of modern PCs - inevitably is is difficult to keep things 100% compatible as the language has to evolve to make these features available to the user. TassyJim (also from TBH) has done some Stirling work to maintain platform independence. This results in some small modifications to the code and where as these do increase its size marginally, I have decided to include them in the belief that compatibility is king across the various 'mite systems and that they are easily enough identified and removed if size on the smaller platforms becomes an issue. The pros of having the GUI work on everything out-weigh the cons of having to remove the auto-configure if you don't want it. If you have space - I strongly recommend keeping them as future releases of this code here will as well and you'll be saving yourself hassle in filleting the code when you upgrade for new/improved features.<br /><br /><br /><h3 class="separator"><b>Stuff you need to know (in no particular order)</b><a class="headeranchor" id="_Stuff_you_need_to_know_in_no_particular_order__17" href="#_Stuff_you_need_to_know_in_no_particular_order__17" title="Link to this Section">&#0182;</a></h3><ul><br /><li>Not all of this is working yet. Gadgets that have yet to be finished are shown.<br /><li>There are nine different gadget types – we’ll discuss them all in detail further on:<br /><ul><li>Button, Radio, CheckBox, Slider, TextBox, List Static, List DropDown, Progress Bar, Frame</ul><li>Every gadget has a set of attributes which are defined in the preamble of your code – that is just a convenient place to put them; you can actually define and redefine all aspects of a gadget at anytime. A function, <b>GUIObjDef</b> will format them and correctly fill the O() array to keep track without any further intervention by your own program.<br /><li>Gadgets have properties and values that you can read and write to influence their operation.<br /><li>After a gadget is defined and properties set etc., nothing happens on screen until you issue a Draw command for it (an exception here is animations when you touch certain types of gadget).<br /><li>All gadgets are touchable and you can find out which really easily. Even gadgets that don’t generally do anything when touched (like Progress Bars) will report back their number if you touch them. It’s entirely down to you how you "run" your GUI.<br /><li>Multiple fonts are not directly supported; if you set the font when you define affected gadgets and when you draw them, it <i>may</i> work. It will come but I just need to get it all working first.<br /></ul><br /><br /><h3 class="separator"><b>Actually doing it – Getting usable Gadgets on the screen</b><a class="headeranchor" id="_Actually_doing_it_–_Getting_usable_Gadgets_on_the_screen__18" href="#_Actually_doing_it_–_Getting_usable_Gadgets_on_the_screen__18" title="Link to this Section">&#0182;</a></h3>There is some unavoidable setup required in the preamble of your program besides simply placing the GUI pack in your program. The following fragment of code should be placed near the start and executed before your program gets underway with its main tasks.<br /><br /><h4 class="separator"><b>Preamble</b><a class="headeranchor" id="_Preamble__0" href="#_Preamble__0" title="Link to this Section">&#0182;</a></h4><pre>
'&#123;mandatory GUI config
	Option Base 0
	Const cGy=&amp;hdddddd'Pale grey screen background
	Dim Integer Objs=20,P=0,Flags,Xt,Yt,CMM2
	Dim Integer O(Objs,10)'GUI object settings
	Dim String Ot(Objs) Length 64'GUI object text
	Colour 0,cGy&#58;Cls

	'CMM2 Compatibility - and any others if necessary
	Select Case MM.Device$
		Case "Colour Maximite 2"
			mp=MM.info(option mouse) ' mouse port
			CMM2=1
			Option Console Serial
			GUI CURSOR ON 0, 100,100,rgb(red)
			CONTROLLER MOUSE OPEN mp
		Case Else
	End Select

'&#125;
</pre><br /><ul><br /><li>A constant is defined for the background colour.<br /><li>Some global variables are defined:<br /><ul><br /><li>Objs is the total number of gadgets usable, increase or decrease as your application requires.<br /><li>P is the pointer to the next available gadget number – this is an internal number and points to a position in the array – <b>it is not your object ID</b>.<br /><li>Xt & Yt are the co-ordinates of touches detected on the LCD panel and CMM2 is a flag for Colour MaxiMite 2 compatibility.<br /><li>O() is a two-dimensional array that holds the specific properties of each gadget e.g. its type, its place on the screen and is state etc.<br /><li>Ot() is a single dimensioned string array which holds any text associated with a gadget. Not all gadgets have a text property.<br /></ul><br /><li>Clear the panel to the default state of black text of the grey background.<br /><li>Finally we configure the system for CMM2 if required.<br /></ul><br />All objects are described to the GUI system using the <b>GUIObjectDef()</b> function. This handles all types of gadget.<br /><br /><br /><h4 class="separator"><b>Key Functions and Subs</b><a class="headeranchor" id="_Key_Functions_and_Subs__1" href="#_Key_Functions_and_Subs__1" title="Link to this Section">&#0182;</a></h4>Functions return interesting values and are signified by a preceding =<br /><br /><b>=GUIObjDef(a,b,c,d,e,f,g,h,i,j,k)</b><br /><br />Has 11 arguments, some of which are optional and others which are redundant (meaningless in the context).<br /><br />Returns -1 if there is no space to store the gadget attributes (increase <b>Objs</b> in the preamble). Other values can be ignored.<br /><br /><table border="1"><thead><tr><th>Argument</th><th> Attribute</th><th> Definition</th></tr></thead><tbody><tr><td>a</td><td>ID</td><td>The numeric name your program wants to use for this gadget. You define this, if you provide the same ID to multiple gadgets, the definition will be over-written. The ID allows you to group your gadgets sensibly. This is not the internal reference for the gadget.</td></tr><tr><td>b</td><td>Type</td><td>The type number of the gadget - see Gadgets and their Attributes below.</td></tr><tr><td>c</td><td>X</td><td>The X & Y co-ordinates of the top left corner of the gadget on screen. These are given in "native" LCD panel co-ordinates i.e. 0,0 is the top left corner of the screen and 219,239 (for example) is the bottom right corner.</td></tr><tr><td>d</td><td>Y</td><td>&nbsp;</td></tr><tr><td>f</td><td>W</td><td>The width and height of the gadget in pixels which go on to define the bottom right corner of the gadget. Remember these are relative values to the X & Y –	they are not physical co-ordinates themselves.</td></tr><tr><td>g</td><td>H</td><td>&nbsp;</td></tr><tr><td>h</td><td>Text</td><td>Any text which should be displayed with the gadget. This might be the word inside a button, the text in a TextBox etc... Not all types of gadgets will use this attribute.</td></tr><tr><td>i</td><td>Type Specific</td><td>Optional. This value is interpreted depending on the type of gadget. Consult the relevant section for the gadget type below</td></tr><tr><td>j</td><td>Type Specific</td><td>Optional. This value is interpreted depending on the type of gadget. Consult the relevant section for the gadget type below</td></tr><tr><td>k</td><td>Type Specific</td><td>Optional. This value is interpreted depending on the type of gadget. Consult the relevant section for the gadget type below</td></tr></tbody></table><br />Each of the arguments is mapped generally onto the O(n,1 to 10) elements, with some processing where required.<br /><br /><b>Examples</b>:<br /><br />A simple Save button                                 <pre>=GUIObjDef(21,1,10,10,80,30,"Save";,,,1)</pre><br />Red RadioButton in group 4800                        <pre>=GUIObjDef(40,2,170,100,0,0,"Red",4800,&amp;hff0000)</pre><br />Blue progress bar ranged 0-5000                      <pre>=GUIObjDef(61,8,10,210,300,20,"",0,5000,&amp;h0000ff02)</pre><br /><br /><b>GUIObjPSet(a,b)</b><br /><br />Sets the Properties of the gadget (these are values that are useful to the functions of your program).<br /><br />Has two arguments:<br /><br /><table border="1"><thead><tr><th>Argument</th><th> Attribute</th><th> Definition</th></tr></thead><tbody><tr><td>a</td><td>ID</td><td>The numeric name your program wants to use for this gadget. You define this, if you provide the same ID to multiple gadgets, the definition will be over-written. The ID allows you to group your gadgets sensibly. This is not the internal reference for the gadget.</td></tr><tr><td>b</td><td>status byte</td><td>Value to set in the status. This is a bit-significant value. The meaning of each bit is as follows</td></tr></tbody></table><br />The Properties of the gadget (these are values that are useful to the running of your code) are stored on O(n,0). This status byte is a bit-field. <b>Important</b>: Some the properties require <b>GUIObjDraw()</b> to see.<br /><br /><h4 class="separator"><b>Status bit meanings (when set)</b><a class="headeranchor" id="_Status_bit_meanings_when_set__2" href="#_Status_bit_meanings_when_set__2" title="Link to this Section">&#0182;</a></h4><table border="1"><thead><tr><th>Bit</th><th> 7</th><th> 6</th><th> 5</th><th> 4</th><th> 3</th><th> 2</th><th> 1</th><th> 0</th></tr></thead><tbody><tr><td>&nbsp;</td><td>Reserved</td><td>CleanUp</td><td>&nbsp;Set&nbsp;</td><td>Touched</td><td>Visible</td><td>Enabled</td><td>Reserved</td><td>Reserved</td></tr></tbody></table><br />Note: All reserved bits should be set to zero<br /><br /><ul><br /><li>2: Enable. Says whether the gadget is active or "ghosted". Disabled (bit 2=0) gadgets are visible on the screen (if bit 3=1) but do not respond to touches. When touched the touch processor will continue to return -1 as if the gadget were not there.<br /><li>3: Visible. The gadget is displayed. If bit 3=0 the gadget will have a grey box drawn over it to erase it from the screen<br /><li>4: The object has been touched. If the object is not enabled or not visible (bits 2 or 3=0), this bit is not set by the touch processor. This bit must be cleared by your code. Use of this bit can be avoided if you are polling for touched by regular calls to the touch process Sub, i.e. in the main loop of your program. If however you are using interrupts (maybe your code spends long periods away from the main loop), this bit records touches for later use(<b>Warning</b>: the order in which touches occurred cannot be determined).<br /><li>5: Records the value of a gadget if applicable. Mainly used for Checkboxes and RadioButtons e.g. the state of a checkbox is: checked=1, not checked=0.<br /><li>6: Indicates the gadget may have been damaged by other gadgets and should be re-drawn. For drop-down lists, any gadgets displayed below the top line of the list will be over-written when the menu drops over them. Such gadgets will have bit 6 set in their status. The menu close sub will largely take care of this automatically.<br /></ul><br /><b>Examples</b>:<br /><br />Our save Button from above is visible and enabled<br /><pre>=GUIObjPSet(21,&amp;b00001100)</pre><br />Our red RadioButton is disabled<br /><pre>=GUIObjPSet(40,&amp;b00001000)</pre><br />For flipping individual bits, here are two examples using a combination of GUIObjPGet and GUIObjPSet...<br /><br />... to enable a gadget<br /><pre>Result=GUIObjPSet(myObj,GUIObjPGet(myObj) OR &amp;b00000100)</pre><br />... to disable a gadget<br /><pre>Result=GUIObjPSet(myObj,GUIObjPGet(myObj) AND&amp;b11111011)</pre><br /><br /><br /><b>=GUIObjPGet(ID)</b><br /><br />Returns the Properties of the gadget. See above for the meaning of each bit. The single argument is the numeric name ID assigned to the gadget by your program. The meaning of the bits in the returned value are as shown in <b>GUIObjPSet()</b> above.<br /><br /><b>Example</b>:<br /><br />Has our save button been touched?					<pre>=GUIObjPGet(21) AND &amp;b00010000</pre><br />A non-zero result says yes, otherwise no. As an aside, there are two approaches for detecting touches which are discussed in the section "Interrupt or not?" below<br /><br /><br /><br /><b>GUIObjVSet(ID,x)</b><br /><br />Set the numeric value of a slider or progress bar. The value will be constrained to within the limits specified for the gadget in the corresponding GUIObjDef()<br /><br /><br /><b>=GUIObjVGet(ID)</b><br /><br />Returns the numeric value of a Slider,ProgressBar, CheckBox or RadioButton. For Sliders & ProgressBars the number returned is the actual value within its range. The value will be constrained to within the limits specified for the gadget in the corresponding GUIObjDef()<br /><br />For CheckBoxes and RadioButtons, the value returned is 0=not selected, <>0=selected.<br /><br /><br /><h3 class="separator"><b>The Gadgets and their Attributes</b><a class="headeranchor" id="_The_Gadgets_and_their_Attributes__19" href="#_The_Gadgets_and_their_Attributes__19" title="Link to this Section">&#0182;</a></h3>We have discussed the functions to get gadgets on the screen, what their properties mean and how to manipulate them. There now follows a detailed discussion of each gadget type.<br /><br /><br /><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>Buttons</b><a class="headeranchor" id="_Buttons__3" href="#_Buttons__3" title="Link to this Section">&#0182;</a></h4><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="button85a5.png?File=/MMBasic/button.png" alt="Image" /><br /><br />Buttons are the "traditional" command button. Rectangular, bordered areas (it is there even if you don’t show it) of the screen. The entire area is active, i.e. it causes an action if you click anywhere inside it. Usually there is some text which is displayed centrally both horizontally and vertically. It is usual for the border to have a raised appearance and to be animated to a depressed appearance when clicked, returning to its former when released.<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>1</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>Text</td><td>Button text</td></tr><tr><td>Background Colour</td><td>The colour of the face of the button</td></tr><tr><td>Text Colour</td><td>The colour of the text of the button. When a button is disabled, this value is over-ridden by the "ghost" colour</td></tr><tr><td>Border Type</td><td>Usually 1, consult the section on border types for options</td></tr></tbody></table><br />Buttons do not have numeric values that can be altered.<br /><br /><table border="1"><thead><tr><th>GUIObjVSet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>a</td><td>Argument is ignored</td></tr></tbody></table><br />To change the text of a Frame, set the Ot(n) value directly<br /><br />Example:<br /><pre>Ot(GUIObjFind(id))="New Text"
GUIObjDraw id</pre><br /><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>RadioButtons</b><a class="headeranchor" id="_RadioButtons__4" href="#_RadioButtons__4" title="Link to this Section">&#0182;</a></h4><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="radiobuttonec19.png?File=/MMBasic/radiobutton.png" alt="Image" /><br /><br />RadioButtons are an option button. A circular area bounded by a circular border in relief. Once activated, they can only be de-activated by touching another RadioButton in the same group. Its state can be set or unset by program control manipulating the SET bit in the gadget’s properties. Usually there is some text which is displayed to the right of the RadioButton. The entire area is active – including the text, i.e. it causes an action if you click anywhere on the button or its label. This makes it easier to activate on smaller displays as precise touch is not so critical. An activated RadioButton has a depressed circular appearance. A de-activated RadioButton has a raised circular appearance. Any change is animated when touched or under program control.<br /><br />The Height of a RadioButton is fixed at 11 pixels, Width is determined by the length of the text+15 pixels.<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>2</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>Text</td><td>RadioButton text</td></tr><tr><td>Group</td><td>The group to which this button belongs. Buttons in the same group are affected by the operation of their members e.g. activating a button will deactivate all others in the group</td></tr><tr><td>Colour</td><td>The colour for the central "dot" of the button as &hRRGGBB</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr></tbody></table><br />RadioButtons do not have numeric values that can be altered.<br /><br /><table border="1"><thead><tr><th>GUIObjVSet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>a</td><td>Argument is ignored</td></tr></tbody></table><br /><br />Retrieving a RadioButton value. Besides reading the Set bit in the status register of a RadioButton, the state can also be found as follows<br /><br /><table border="1"><thead><tr><th>=GUIObjVGet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr></tbody></table><br />Return: 0=Not selected, <>0=selected.<br /><br />To change the text of a RadioButton, set the Ot(n) value directly<br /><br />Example:<br /><pre>Ot(GUIObjFind(id))="New Text"
GUIObjDraw(id)</pre><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>CheckBoxes</b><a class="headeranchor" id="_CheckBoxes__5" href="#_CheckBoxes__5" title="Link to this Section">&#0182;</a></h4><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="checkboxaed1.png?File=/MMBasic/checkbox.png" alt="Image" /><br /><br />Checkboxes are a toggling option button. A small area bounded by a square border in relief. Once activated, they can be de-activated by touching again and vice versa. Its state can be set or unset by program control manipulating the SET bit in the gadget’s properties. Usually there is some text which is displayed to the right of the Checkbox. The entire area is active – including the text, i.e. it causes an action if you click anywhere on the Checkboxes or its label. This makes it easier to activate on smaller displays as precise touch is not so critical. An activated Checkbox has a depressed circular appearance. A de-activated Checkbox has a raised circular appearance. Any change is animated when touched or under program control.<br /><br />The Height of a Checkbox is fixed at 11 pixels, Width is determined by the length of the text+15 pixels.<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>3</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>Text</td><td>Checkbox text</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr></tbody></table><br />CheckBoxes do not have numeric values that can be altered.<br /><br /><table border="1"><thead><tr><th>GUIObjVSet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>a</td><td>Argument is ignored</td></tr><tr><td>b</td><td>Argument is ignored</td></tr><tr><td>c</td><td>Argument is ignored</td></tr></tbody></table><br />Retrieving a CheckBox value. Besides reading the Set bit in the status register of a CheckBox, the state can be found as follows<br /><br /><table border="1"><thead><tr><th>=GUIObjVGet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr></tbody></table><br />Return: 0=Not selected, <>0=selected.<br /><br />To change the text of a CheckBox, set the Ot(n) value directly<br /><br />Example:<br /><pre>Ot(GUIObjFind(id))="New Text"
GUIObjDraw id</pre><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>Frames</b><a class="headeranchor" id="_Frames__6" href="#_Frames__6" title="Link to this Section">&#0182;</a></h4><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="frameca14.png?File=/MMBasic/frame.png" alt="Image" /><br /><br />A simple rectangular box with a text label. Used for grouping related gadgets more for aesthetics than functionality. Beware defining Frames before the gadgets they contain. They can prevent gadgets from being identified when touched in favour of the enclosing frame. Best to places gadgets on the screen then place Frames last of all.<br /><br />Unlike desktop GUIs, disabling a frame will not automatically disable all items within it.<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>9</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>W</td><td>Dimensions Width and Height</td></tr><tr><td>H</td><td>&nbsp;</td></tr><tr><td>Text</td><td>Frame text</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>Border Type</td><td>Usually 5, consult the section on border types for options</td></tr></tbody></table><br />Frames do not have numeric values that can be altered.<br /><br /><table border="1"><thead><tr><th>GUIObjVSet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>a</td><td>Argument is ignored</td></tr><tr><td>b</td><td>Argument is ignored</td></tr><tr><td>c</td><td>Argument is ignored</td></tr></tbody></table><br />To change the text of a Frame, set the Ot(n) value directly<br /><br />Example:<br /><pre>Ot(GUIObjFind(id))="New Text"
GUIObjDraw id</pre><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>TextBoxes</b><a class="headeranchor" id="_TextBoxes__7" href="#_TextBoxes__7" title="Link to this Section">&#0182;</a></h4><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="textbox4af9.png?File=/MMBasic/textbox.png" alt="Image" /><br /><br />A rectangular area in which text is written. May have any style of border<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>5</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>W</td><td>Dimensions Width and Height</td></tr><tr><td>H</td><td>&nbsp;</td></tr><tr><td>Text</td><td>Text value of the text field</td></tr><tr><td>Background colour (paper)</td><td>Background colour as &hRRGGBB</td></tr><tr><td>Foreground colour (pen)</td><td>Foreground colour as &hRRGGBB</td></tr><tr><td>Border Type and Alignment</td><td>Border type and Alignment are stuffed in a single byte. Consult the section on border types for options</td></tr></tbody></table><br />TextBoxes do not have numeric values that can be altered.<br /><br /><table border="1"><thead><tr><th>GUIObjVSet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>a</td><td>Argument is ignored</td></tr><tr><td>b</td><td>Argument is ignored</td></tr><tr><td>c</td><td>Argument is ignored</td></tr></tbody></table><br /><br />To change the text of a TextBoxes, set the Ot(n) value directly<br /><br />Example:<br /><pre>Ot(GUIObjFind(id))="New Text"
GUIObjDraw id</pre><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>Progress bars</b><a class="headeranchor" id="_Progress_bars__8" href="#_Progress_bars__8" title="Link to this Section">&#0182;</a></h4><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="progressbara46e.png?File=/MMBasic/progressbar.png" alt="Image" /><br /><br />A progress bar is a rectangular area with increasing/decreasing coverage depending on the current set value. The minimum and maximum extremes of the range are settable to any value and the physical size of the bar on the screen will be scaled accordingly. The border of the bar may be set to any frame style although the depressed button appearance is most usual.<br /><br />Progress bars may be horizontal or vertical. They always progress low to high as left to right or bottom to top respectively<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>8</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>W</td><td>Dimensions Width and Height</td></tr><tr><td>H</td><td>&nbsp;</td></tr><tr><td>&lt;null&gt;</td><td>Progress bars do not have a text attribute, Set to ""</td></tr><tr><td>Bottom of range</td><td>Any numeric value &lt; top of range</td></tr><tr><td>Top of range</td><td>Any numeric value &gt; bottom of range</td></tr><tr><td>Colour, Border Type and Alignment</td><td>Border type and Alignment are stuffed in a single byte. Consult the section on border types for options</td></tr></tbody></table><br /><br />Setting ProgressBar value.<br /><br /><table border="1"><thead><tr><th>GUIObjVSet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>a</td><td>Current value to set the slider. This will be constrained to the relevant range given in GUIObjDef()</td></tr></tbody></table><br />Retrieving the ProgressBar value.<br /><br /><table border="1"><thead><tr><th>=GUIObjVGet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr></tbody></table><br />Returns the current value of the ProgressBar.<br /><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>Sliders</b><a class="headeranchor" id="_Sliders__9" href="#_Sliders__9" title="Link to this Section">&#0182;</a></h4><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="slidere946.png?File=/MMBasic/slider.png" alt="Image" /><br /><br />A moving button that can be slid up and down a scale to indicate a value. The minimum and maximum extremes of the range are settable to any value and the physical size of the slider on the screen scales accordingly.<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>4</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>W</td><td>Width of the slider</td></tr><tr><td>&lt;null&gt;</td><td>Argument is ignored</td></tr><tr><td>&lt;null&gt;</td><td>Sliders do not have a text attribute, Set to ""</td></tr><tr><td>Bottom of range</td><td>Any numeric value &lt; top of range</td></tr><tr><td>Top of range</td><td>Any numeric value &gt; bottom of range</td></tr><tr><td>Paired Gadget ID</td><td>The ID of a linked item to have its text attribute mirror the Slider value. See the discussion below on Object Pairing.</td></tr></tbody></table><br />Setting the Slider value.<br />Besides operating the slider using the touch interface, slider values can be set program control.<br /><br /><table border="1"><thead><tr><th>GUIObjVSet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>a</td><td>Current value to set the slider. This will be constrained to the relevant range given in GUIObjDef()</td></tr></tbody></table><br />Retrieving the Slider value.<br /><br /><table border="1"><thead><tr><th>=GUIObjVGet</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr></tbody></table><br />Returns the current value of the Slider.<br /><br /><b>Object Pairing</b><br />When moving a Slider, it is usual to need to see some feedback on the value as it varies. Within the Slider this is not possible for three reasons:<br /><ol><br /><li>While moving the slider your code is not running (ProcessTouch() is) and the value the slider settled at can only be reported once the Slider is released.<br /><li>ProcessTouch() has no idea what you want to do with the values your set and so makes no assumptions.<br /><li>Putting the value in the slider button is impractical because the width of the text could destroy the aesthetics of the slider.<br /></ol><br />To provide some indication, the ID of another gadget can be set to have its text attribute linked to the value of the Slider. As the slider is moved, ProcessTouch() will update the paired gadget (perhaps a TextBox).<br /><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>List Static</b><a class="headeranchor" id="_List_Static__10" href="#_List_Static__10" title="Link to this Section">&#0182;</a></h4>Similar in appearance to the text box, the Static list has direction arrows at each end and the list can be navigated through with the current selected item displaying in the text area.<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>7</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>W</td><td>Dimensions Width and Height</td></tr><tr><td>H</td><td>&nbsp;</td></tr><tr><td>Text</td><td>Frame text</td></tr><tr><td>Background colour (paper)</td><td>Background colour as &hRRGGBB</td></tr><tr><td>Foreground colour (pen)</td><td>Foreground colour as &hRRGGBB</td></tr><tr><td>Border Type and Alignment</td><td>Border type and Alignment are stuffed in a single byte. Consult the section on border types for options</td></tr></tbody></table><br /><br /><h1 class="separator"> </h1><br /><h4 class="separator"><b>List Drop-Down</b><a class="headeranchor" id="_List_Drop-Down__11" href="#_List_Drop-Down__11" title="Link to this Section">&#0182;</a></h4>Similar in appearance to the text box, the Drop-down list displays a rectangular area containing lines of text when touched. An item may be selected by touching it. If more items exist than the box can contain, the up and down arrows on the right of the drop-down can be used to navigate through the list. When an item is selected, the drop-down box is erased, the text is set to the selected item and any damaged items (where the drop-down obliterated them) are set for cleanup.<br /><table border="1"><thead><tr><th>GUIObjDef Attributes</th><th> &nbsp;</th></tr></thead><tbody><tr><td>ID</td><td>The numeric name your program will use for this object</td></tr><tr><td>Type</td><td>7</td></tr><tr><td>X</td><td>Location co-ordinates on screen X,Y</td></tr><tr><td>Y</td><td>&nbsp;</td></tr><tr><td>W</td><td>Dimensions Width and Height</td></tr><tr><td>H</td><td>&nbsp;</td></tr><tr><td>Text</td><td>Frame text</td></tr><tr><td>Background colour (paper)</td><td>Background colour as &hRRGGBB</td></tr><tr><td>Foreground colour (pen)</td><td>Foreground colour as &hRRGGBB</td></tr><tr><td>Border Type and Alignment</td><td>Border type and Alignment are stuffed in a single byte. Consult the section on border types for options</td></tr></tbody></table><br /><h1 class="separator"> </h1><br /><h3 class="separator"><b>Border Types and alignment</b><a class="headeranchor" id="_Border_Types_and_alignment__20" href="#_Border_Types_and_alignment__20" title="Link to this Section">&#0182;</a></h3>Not all gadgets support a border type but for those that do, the value contains several indicators in a single integer.<br /><br /><table border="1"><thead><tr><th>Alignment Value</th><th>Byte 3</th><th>Byte 2</th><th>Byte 1</th><th> Byte 0</th></tr></thead><tbody><tr><td>&nbsp;</td><td>Red for stuffed colour</td><td>Green for stuffed colour</td><td>Blue for stuffed colour</td><td>Border Style and Alignment</td></tr></tbody></table><br />The rightmost byte is further interpreted by it's two nibbles thus:<br /><br /><table border="1"><thead><tr><th>Bit 7-4</th><th>Bits 3-0</th><th> Description</th></tr></thead><tbody><tr><td>x</td><td>0</td><td>No Border</td></tr><tr><td>x</td><td>1</td><td>Button style raised</td></tr><tr><td>x</td><td>2</td><td>Button style depressed</td></tr><tr><td>x</td><td>3</td><td>White</td></tr><tr><td>x</td><td>4</td><td>Black</td></tr><tr><td>x</td><td>5</td><td>Grey (disabled)</td></tr><tr><td>0</td><td>x</td><td>Align Left/Horizontal</td></tr><tr><td>1</td><td>x</td><td>Align Centre/Vertical</td></tr><tr><td>2</td><td>x</td><td>Align Right</td></tr></tbody></table><br />Example:<br /><br /><a class="unknownlink" href="MMBasic..html" title="MMBasic."></a><img src="alignmentb463.png?File=/MMBasic/alignment.png" alt="Image" /><br /><br />Due to redundancy, not all border/alignment combinations are applicable to any given gadget<br /><br /><br /><br /><b>The Code</b><br /><pre>
'V0.68

'&#123;mandatory GUI config
	Option Base 0
	Const CGy=&amp;hdddddd,Cgh=&amp;h909090'Pale grey screen background
	Colour 0,cGy&#58;Cls
	Dim Integer Objs=20,P=0,Flags,Xt,Yt,CMM2
	Dim Integer O(Objs,10)'GUI object settings
	Dim String Ot(Objs) Length 63'GUI object text

	'CMM2 Compatibility - and any others if necessary
	Select Case MM.Device$
		Case "Colour Maximite 2"
			mp=MM.info(Option Mouse) ' mouse port
			CMM2=1
			Option Console Serial
			GUI Cursor On 0, 100,100,rgb(red)
			Controller Mouse Open mp
		Case Else
	End Select
'&#125;

	Backlight 80' 100 is off

MainInit&#58;

	Dim Integer res

'Buttons
	res=GUIObjDef(21,1,10,10,80,30,"Save",&amp;hff0000,&amp;hffffff,1)
	res=GUIObjDef(23,1,10,50,80,30,"Exit",,,1)
'Checkboxes
	res=GUIObjDef(25,3,10,100,,,"Checked")
	res=GUIObjDef(27,3,10,120,,,"Disabled")
	res=GUIObjDef(29,3,10,140,,,"Not Checked")
'Radio boxes (in a frame)
	res=GUIObjDef(40,2,170,100,,,"Red",1,&amp;hff0000)
	'res=GUIObjDef(40,2,170,100,,,"Red",1,0)
	res=GUIObjDef(41,2,170,120,,,"Green",1,&amp;hff00)
	'res=GUIObjDef(41,2,170,120,,,"Green",1,0)
	res=GUIObjDef(42,2,170,140,,,"Blue",1,&amp;hff)
	'res=GUIObjDef(42,2,170,140,,,"Blue",1,0)
	res=GUIObjDef(39,9,165,90,80,65,"Colours",,,&amp;h05)
'text boxes
	res=GUIObjDef(50,5,160,10,150,15,"L Text black frame",&amp;h00aa00,&amp;hffff00,&amp;h04)
	res=GUIObjDef(51,5,160,35,150,15,"C Text no frame",cGy,0,&amp;h10)
	res=GUIObjDef(52,5,160,60,150,15,"",&amp;hffffff,0,&amp;h22)
'progress bar
	res=GUIObjDef(61,8,10,210,300,20,"",0,500,&amp;h0000ff02)
	res=GUIObjDef(62,8,270,90,40,65,"",0,500,&amp;hff000012)
'Slider
	res=GUIObjDef(71,4,20,180,100,,"",0,500,51)

Main&#58;
'set the properties of the object, visibility, enabled etc...
	res=GUIObjPSet(21,&amp;b00001100)
	res=GUIObjPSet(23,&amp;b00001000)
	res=GUIObjPSet(25,&amp;b00101100)
	res=GUIObjPSet(27,&amp;b00101000)
	res=GUIObjPSet(29,&amp;b00001100)
	res=GUIObjPSet(39,&amp;b00001100)
	res=GUIObjPSet(40,&amp;b00101100)
	res=GUIObjPSet(41,&amp;b00001100)
	res=GUIObjPSet(42,&amp;b00001000)
	res=GUIObjPSet(50,&amp;b00001100)
	res=GUIObjPSet(51,&amp;b00001100)
	res=GUIObjPSet(52,&amp;b00001100)
	res=GUIObjPSet(61,&amp;b00001100)
	res=GUIObjPSet(62,&amp;b00001100)

	res=GUIObjPSet(71,&amp;b00001100)

'nothing appears on the screen until you draw the object
'this allows multiple updates at once and you control when it happens
	GUIObjDraw 21
	GUIObjDraw 23
	GUIObjDraw 25
	GUIObjDraw 27
	GUIObjDraw 29
	GUIObjDraw 39
	GUIObjDraw 40
	GUIObjDraw 41
	GUIObjDraw 42
	GUIObjDraw 50
	GUIObjDraw 51
	GUIObjDraw 52
	GUIObjDraw 61
	GUIObjDraw 62

	GUIObjVSet 71,250
	GUIObjDraw 71

'a little example code
	q=1000
	If res &lt;&gt;-1 Then
		timer=0
'draw the progress bars for increasing value
		For n=1 To q step 25
				GUIObjVSet 61,n
				GUIObjDraw 61
				GUIObjVSet 62,q-n
				GUIObjDraw 62
		Next
'set the contents of a text box
		Ot(GUIObjFind(52))="R "+Str$(timer/n)+"mS"
		GUIObjDraw 52
	EndIf

'go round in a loop printing (to the console) the ID (numeric name) of
'any touched objects and how long it was touched for
	Do
		Timer=0
		q=ProcessTouch()
		If q&lt;&gt;-1 Then ? "Obj ";q,,"Dwell";Timer;"mS"
		'get the value from the slider and update a text box
		If q=71 Then
			For m=50 to 52
				'Ot(GUIObjFind(m))=Str$(GUIObjVGet(71))&#58;GUIObjDraw m
			Next
		EndIf
		Pause 100
	Loop

	End


'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45; The GUI pack
'Main touch processor. Regular calls here will get the numeric name of
'screen objects that are touched, return -1 if no object is touched
'animates and manages status etc
	Function ProcessTouch() As Integer
		ProcessTouch=-1
		GetTouch
		If Xt=-1 Then Exit Function
		Local Integer n,m
		For n=0 To P-1
			If Xt&gt;=O(n,3) Then
				If Yt&gt;=O(n,4) Then
					If Xt&lt;=O(n,5) Then
						If Yt&lt;=O(n,6) Then
							If O(n,2) And 8 Then
								If O(n,2) And 4 Then
									ProcessTouch=O(n,0)
									O(n,2)=O(n,2) Or &amp;b00010000'touched
									Select Case O(n,1)'click animation
										Case 1
											O(n,9)=2
											GUIObjDraw O(n,0)
										Case 2
											For m=0 To P
												If O(n,0)&lt;&gt;O(m,0) Then
													If O(m,1)=2 Then
														If O(m,7)=O(n,7) Then
															O(m,2)=O(m,2) And &amp;b11011111
															GUIObjDraw O(m,0)
														EndIf
													EndIf
												EndIf
											Next
											O(n,2)=O(n,2) Or &amp;h20
											GUIObjDraw O(n,0)
										Case 3
											If O(n,2) And &amp;b00100000 Then
												O(n,2)=O(n,2) And &amp;b11011111
											Else
												O(n,2)=O(n,2) Or &amp;b00100000
											EndIf
											GUIObjDraw O(n,0)
										Case 4'slider
											Local w
											If CMM2 Then GUI Cursor Hide
											Do
												'Watchdog in here
												GetTouch
												If Xt=-1 Then Exit Do
												w=O(n,5)-O(n,3)
												Xt=Constrain(Xt-O(n,3),0,w)
												w=Xt/(w/(O(n,8)-O(n,7)))
												GUIObjVSet O(n,0),w
												If O(n,9) Then
													Ot(GUIObjFind(O(n,9)))=Str$(w)&#58;GUIObjDraw O(n,9)
												EndIf
												GUIObjDraw O(n,0)
											Loop
											If CMM2 Then GUI Cursor Show
										Case 6
										Case 7
									End Select
									WaitNoTouch
									Select Case O(n,1)'release animation
										Case 1
											O(n,9)=1
											GUIObjDraw O(n,0)
										Case 6
										Case 7
									End Select
									Exit Function
								EndIf
							EndIf
						EndIf
					EndIf
				EndIf
			EndIf
		Next
	End Function

'waits for the stylus to be lifted off the panel
	Sub WaitNoTouch
		If CMM2 Then
			Do
			'Watchdog here if you want it
			Pause 10
			Loop Until Mouse(L,mp)=0
		Else
			Do
			'Watchdog here if you want it
			Pause 10
			Loop Until Touch(X)=-1
		EndIf
	End Sub

'Sub will draw any object in it's current state
	Sub GuiObjDraw(id As Integer)
		Local Integer n,m,x,y,z,w,h
		Local Float nn
		Local a$
		n=GUIObjFind(id)
		If n&gt;-1 Then
			GUIObjCleanup n
			x=O(n,3)&#58;y=O(n,4)
			w=O(n,5)-x&#58;h=O(n,6)-y
			Select Case O(n,1)
				Case 1'button
					If O(n,2) And 8 Then'visible
						Box x,y,w,h,,O(n,7),O(n,7)
						GUIFrame n,0
						If O(n,2) And 4 Then'Enabled
							z=O(n,8)
						Else'ghosted
							z=Cgh
						EndIf
						Text w/2+x-FW()&#42;Len(Ot(n))/2,h/2+y-FH()/2,Ot(n),,,,z,O(n,7)
					Else'erase
						GUIObjCleanup n,1
					EndIf
				Case 2'radio
					If O(n,2) And 8 Then'visible
						x=x+5&#58;y=y+5
						If O(n,2) And 4 Then'Enabled
							If O(n,2) And 32 Then'set
								Circle x,y,4,,,O(n,8),O(n,8)
								Colour 0&#58;For nn=2.34 To 5.5 Step 0.2&#58;Pixel x+6&#42;Sin(nn),y+6&#42;Cos(nn)&#58;Next
								Colour &amp;hffffff&#58;For nn=5.5 To 8.64 Step 0.2&#58;Pixel x+6&#42;Sin(nn),y+6&#42;Cos(nn)&#58;Next
							Else
								Circle x,y,4,,,CGy,CGy
								Colour &amp;hffffff&#58;For nn=2.34 To 5.5 Step 0.2&#58;Pixel x+6&#42;Sin(nn),y+6&#42;Cos(nn)&#58;Next
								Colour 0&#58;For nn=5.5 To 8.64 Step 0.2&#58;Pixel x+6&#42;Sin(nn),y+6&#42;Cos(nn)&#58;Next
							EndIf
							Colour 0
						Else
							Circle x,y,4,,,CGy,CGy
							Colour Cgh&#58;For nn=0 To 6.4 Step 0.2&#58;Pixel x+6&#42;Sin(nn),y+6&#42;Cos(nn)&#58;Next
						EndIf
						Text x+15,y+(h/2)-FH(),Ot(n)
					Else'erase
						GUIObjCleanup n,1
					EndIf
				Case 3'checkbox
					If O(n,2) And 8 Then'visible		
						Colour 0&#58;Line x,y,x,y+11&#58;Line x,y,x+11,y&#58;Colour &amp;hffffff&#58;Line x+11,y,x+11,y+11&#58;Line x+11,y+11,x,y+11
						If O(n,2) And 4 Then'Enabled
							Colour 0
						Else'ghosted
							Colour Cgh
						EndIf
						If O(n,2) And 32 Then'checked
							GUI Bitmap x+2,y+2,&amp;h18386C6CC6020301
						Else
							GUI Bitmap x+2,y+2,0
						EndIf						
						Text x+15,y+(h/2)-(FH()/2),Ot(n)						
					Else'erase
						GUIObjCleanup n,1
					EndIf
				Case 4'slider
					If O(n,2) And 8 Then'visible
						Box x-5,y,w+11,h+1,,CGY,CGy
						y=y+(h/2)
						Colour 0&#58;Line x,y-2,x+w,y-2&#58;Line x,y-2,x,y+2&#58;Colour &amp;hffffff&#58;Line x,y+2,x+w,y+2&#58;Line x+w,y+2,x+w,y-2&#58;
						x=x+((w/(O(n,8)-O(n,7)))&#42;O(n,10))
						y=O(n,4)
						'pointer
						If O(n,2) And 4 Then'Enabled
							Box x-5,y,11,h,,CGY,CGy
							Colour 0&#58;Line x+5,y+3,x+5,y+h&#58;Line x+5,y+h,x-5,y+h&#58;Colour Cgh&#58;Line x,y,x+5,y+3&#58;Colour &amp;hffffff&#58;Line x-5,y+h,x-5,y+3&#58;Line x-5,y+3,x,y
						Else
							Box x-5,y,11,h,,CGY,CGy
							Colour Cgh&#58;Line x+5,y+3,x+5,y+h&#58;Line x+5,y+h,x-5,y+h&#58;Line x,y,x+5,y+3&#58;Line x-5,y+h,x-5,y+3&#58;Line x-5,y+3,x,y
						EndIf
					Else'erase
						GUIObjCleanup n,1
					EndIf
				Case 5'textbox
					If O(n,2) And 8 Then'visible
						Box x,y,w+1,h+1,,O(n,7),O(n,7)
						GUIFrame n,1
						Select Case O(n,9)&gt;&gt;4
							Case 0'L
								Text x,y,Ot(n),,,,O(n,8),O(n,7)
							Case 1'C
								Text w/2+x-FW()&#42;Len(Ot(n))/2,h/2+y-FH()/2,Ot(n),,,,O(n,8),O(n,7)
							Case 2'R
								Text O(n,5)-(FW()&#42;Len(Ot(n))),h/2+y-FH()/2,Ot(n),,,,O(n,8),O(n,7)
						End Select
					Else'erase
						GUIObjCleanup n,1
					EndIf
				Case 6'list static
				Case 7'list dropdown
				Case 8'progress bar
					If O(n,2) And 8 Then'visible
						GUIFrame n,1
						If O(n,9) And &amp;h10 Then'vert
							z=(h/(O(n,8)-O(n,7)))&#42;O(n,10)
							Box x,y,w,h-z,,cGy,cGy
							Box x,(y+h)-z,w,z,,O(n,9)&gt;&gt;8,O(n,9)&gt;&gt;8
						Else'hoz
							z=(w/(O(n,8)-O(n,7)))&#42;O(n,10)
							Box x+z,y,w-z,h,,cGy,cGy
							Box x,y,z,h,,O(n,9)&gt;&gt;8,O(n,9)&gt;&gt;8
						EndIf
					Else'erase
						GUIObjCleanup n,1
					EndIf
				Case 9'frame
					GUIFrame n,0
					Colour 0,cGy
					Text x+5,y-FH()/2,Ot(n)
			End Select
		EndIf
	End Sub

'set values of gadget by its numeric name
	Sub GUIObjVSet(id As Integer,cv As Integer)
		Local Integer n
		n=GUIObjFind(id)
		If n&gt;-1 Then
			Select Case O(n,1)
				Case 4,8
					O(n,10)=Constrain(cv,O(n,7),O(n,8))
			End Select
		EndIf
	End Sub

	Function GUIObjVGet(id As Integer)
		Local Integer n
		n=GUIObjFind(id)
		If n&gt;-1 Then
			Select Case O(n,1)
				Case 2,3
					GUIObjVGet=O(n,2) And 32
				Case 4,8
					GUIObjVGet=O(n,10)
			End Select
		EndIf
	End Function

'draws any type of border around an object
	Sub GUIFrame(n As Integer,os As Integer)
		Local Integer c1,c2
		Select Case O(n,9) And &amp;h0F
			Case 0'none
				c1=cGy&#58;c2=cGy
			Case 1'button style raised
				c1=&amp;hffffff&#58;c2=0
			Case 2'button style depressed
				c1=0&#58;c2=&amp;hffffff
			Case 3'white
				c1=&amp;hffffff&#58;c2=&amp;hffffff
			Case 4'black
				c1=0&#58;c2=0
			Case 5'grey (disabled)
				c1=Cgh&#58;c2=Cgh
		End Select
		Colour c1&#58;Line O(n,3)-os,O(n,4)-os,O(n,3)-os,O(n,6)+os&#58;Line O(n,3)-os,O(n,4)-os,O(n,5)+os,O(n,4)-os&#58;Colour c2&#58;Line O(n,5)+os,O(n,4)-os,O(n,5)+os,O(n,6)+os&#58;Line O(n,3)-os,O(n,6)+os,O(n,5)+os,O(n,6)+os
	End Sub

'removes an object from the screen by its internal reference
	Sub GUIObjCleanup(n,f)
		If f Or (O(n,2) And 64) Then
			Box O(n,3)-1,O(n,4)-1,O(n,5)-O(n,3)+1,O(n,6)-O(n,4)+1,,cGy,cGy
		EndIf
		O(n,2)=O(n,2) And &amp;hBF'clear cleanup flag
	End Sub

'Sets the properties of an object
'Returns -1 if not found
	Function GUIObjPSet(id As Integer,b As Integer) As Integer'id,enabled,visible,touched,Set,cleanup
		Local Integer n
		n=GUIObjFind(id)
		If n&gt;-1 Then
			O(n,2)=b&#58;Exit Function
		EndIf
		GUIObjPSet=-1'object not found
	End Function

'Returns the properties of an object by its numeric name
'Returns the properties or -1 if not found
	Function GUIObjPGet(id As Integer) As Integer
		Local Integer n
		n=GUIObjFind(id)
		If n&gt;-1 Then
			GUIObjPGet=O(n,2)&#58;Exit Function
		EndIf
		GUIObjPGet=-1'object not found
	End Function

'Finds the internal reference for an object from its numeric name
'Returns the object number or -1 if not found
	Function GUIObjFind(id)
		Local Integer n
		For n=0 To P-1
			If O(n,0)=id Then GUIObjFind=n&#58;Exit Function'object exists
		Next
		GUIObjFind=-1
	End Function

'force a value within boundaries
	Function Constrain(v As Integer,l As Integer,u As Integer) As Integer
        Constrain=Min(Max(v,l),u)
    End Function

'defines an object but doesn't draw anything. returns 0 if all OK.
'res=GUIObjDef(21,1,10,10,80,30,"Save",&amp;hffggbb,,1)
	Function GUIObjDef(id As Integer,tp As Integer,x As Integer,y As Integer,w As Integer,h As Integer,t$,g As Integer,c As Integer,d As Integer) As Integer
		Local Integer n
		If P&gt;Objs Then GUIObjDef=1&#58;Exit Function'too many objects
		n=GUIObjFind(id)
		If n=-1 Then n=P&#58;P=P+1'define or redefine. P always points to the next free "slot"
		O(n,0)=id
		O(n,1)=tp
		O(n,2)=0
		O(n,3)=x
		O(n,4)=y
		O(n,7)=g			
		O(n,8)=c
		O(n,9)=d
		O(n,10)=g
		Ot(n)=t$
		Select Case tp
			Case 1,5,8,9'button,textbox,progress bar,frame
				O(n,5)=x+w
				O(n,6)=y+h
				If O(n,7)+O(n,8)=0 Then O(n,7)=CGy
			Case 2,3'Radio,checkbox
				O(n,5)=x+15+FW()&#42;Len(t$)
				O(n,6)=y+FH()
			Case 4'Slider
				O(n,4)=y-4
				O(n,5)=x+w
				O(n,6)=y+14
			Case 6'List Static
			Case 7'List DropDown
		End Select
	End Function

'compatibility functions
	Function FH() As Integer
		If CMM2 Then
			FH=MM.INFO(FONTHEIGHT)
		Else
			FH=MM.FONTHEIGHT
		EndIf
	End Function

	Function FW() As Integer
		If CMM2 Then
			FW=MM.INFO(FONTWIDTH)
		Else
			FW=MM.FONTWIDTH
		EndIf
	End Function

	Sub GetTouch
		If CMM2 Then
			GUI CURSOR MOUSE(x,0),MOUSE(y,0)'here or main loop
			Xt=-1
			If Mouse(R,mp) Then Save Image "GUI.bmp",0,0,320,240
			If Mouse(L,mp) Then
				Xt=mouse(X,mp)&#58;Yt=mouse(Y,mp)
			EndIf
		Else
			Xt=Touch(X)&#58;Yt=Touch(Y)
		EndIf
	End Sub
</pre><br />
	</div>
	
	
	
	<div id="PageAttachmentsDiv" style="position: absolute; left: 10000px;">
		
    </div>
    
    <div id="AdminToolsDiv" style="position: absolute; left: 10000px;">
		
		
		
    </div>
    
    <script type="text/javascript">
    <!--
    	function __RepositionDiv(link, element) {
    		var absPos = __AbsolutePosition(link);
    		var elemAbsPos = __AbsolutePosition(element);

    		element.style["top"] = (absPos.top + absPos.height) + "px";
    		element.style["left"] = (absPos.left - (elemAbsPos.width - absPos.width)) + "px";
    		element.style["position"] = "absolute";
    	}

		// Hide attachments and admin tools divs
    	// This is needed because __RepositionDiv cannot calculate the width of the element when it's hidden
    	var __elem = document.getElementById("PageAttachmentsDiv");
    	if(document.getElementById("PageAttachmentsLink")) {
    		__RepositionDiv(document.getElementById("PageAttachmentsLink"), __elem);
    	}
    	__elem.style["display"] = "none";

    	__elem = document.getElementById("AdminToolsDiv");
    	if(document.getElementById("AdminToolsLink")) {
    		__RepositionDiv(document.getElementById("AdminToolsLink"), __elem);
    	}
    	__elem.style["display"] = "none";

    	__InitBCT();
    // -->
    </script>


                <div id="PageInternalFooterDiv"></div>
                <div id="MainFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>

        </div>
            
        <div id="FooterDiv">
             
        </div>

    </form>  
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.A-Simple-GUI-pack.ashx?NS=MMBasic by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:34:15 GMT -->
</html>
