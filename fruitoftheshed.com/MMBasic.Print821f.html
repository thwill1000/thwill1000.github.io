

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Temperature-Measurement-with-DS3231-Realtime-Clock-RTC by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:24:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	Temperature Measurement with DS3231 Realtime Clock RTC - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.Temperature-Measurement-with-DS3231-Realtime-Clock-RTC" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQFtQs8aDEgY2xhc3M9InBhZ2V0aXRsZSI+VGVtcGVyYXR1cmUgTWVhc3VyZW1lbnQgd2l0aCBEUzMyMzEgUmVhbHRpbWUgQ2xvY2sgUlRDPC9oMT48c21hbGw+TW9kaWZpZWQgb24gMjAxOC8wMi8wOSAxODoxNSBieSBDYXB0YWluQm9pbmcgJm1kYXNoOyBDYXRlZ29yaXplZCBhczogRGF0ZXMsIFRpbWUgYW5kIENsb2NrcywgRWxlY3Ryb25pY3MsIEVudmlyb25tZW50PC9zbWFsbD48YnIgLz48YnIgLz5UaGUgRFMzMjMxIFJUQyBjaGlwIGhhcyBhIHRlbXBlcmF0dXJlIG1lYXN1cmVtZW50IGp1bmN0aW9uIHdoaWNoIGlzIGF1dG9tYXRpY2FsbHkgc2FtcGxlZCBldmVyeSA2NCBzZWNvbmRzLiBUaGUgbWVhc3VyZW1lbnQgaXMgcGxhY2VkIGluIHJlZ2lzdGVycyAxNyAmIDE4LiBSZWdpc3RlciAxNyBjb250YWlucyB3aG9sZSBkZWdyZWVzIGFuZCAxOCB0aGUgZnJhY3Rpb24gaWYgeW91IHdhbnQgaXQgKHRoaXMgZnJhY3Rpb24gaXMgYmluYXJ5IHBvaW50LCBub3QgZGVjaW1hbCBwb2ludCBzbyBNU0IgaXMgMC41ZCwgbmV4dCBpcyAwLjI1ZCBldGMuKS4gPGJyIC8+PGJyIC8+VGhpcyBjYW4gYmUgdXNlZnVsIGZvciBtZWFzdXJpbmcgdGhlIChhbWJpZW50KSB0ZW1wZXJhdHVyZSBvZiBhbiBlbmNsb3N1cmUuPGJyIC8+PGJyIC8+QXNzdW1pbmcgcG9zaXRpdmUsIHdob2xlIGRlZ3JlZXMgb25seTo8YnIgLz48YnIgLz48Yj5Db2RlPC9iPjo8YnIgLz48cHJlPg0KICBSVEMgR2V0UmVnIDE3LHglICAgJyByZWFkIHRoZSB3aG9sZSBkZWdyZWVzIG9ubHkgaW50byBpbnRlZ2VyIHZhcmlhYmxlIHgNCiAgeCU9eCUgQU5EICZhbXA7aDdmICAgICAgJyBtYXNrIG9mZiB0aGUgc2lnbg0KPC9wcmU+PGJyIC8+PGJyIC8+PGJyIC8+SWYgeW91IHdpc2ggdG8gbWVhc3VyZSBuZWdhdGl2ZSB2YWx1ZXMgYWxzbywgdGhlIHNpZ24gYml0IG11c3QgYmUgZXh0ZW5kZWQgZnJvbSBiaXQgNyB0byB0aGUgNjNyZCBiaXQgb2YgdGhlIGludGVnZXIuIEZhaWx1cmUgdG8gZG8gc28gd2lsbCByZXN1bHQgaW4gbmVnYXRpdmUgdmFsdWVzIHJlZ2lzdGVyaW5nIGZyb20gMTI4IHRvIDI1NS4gVG8gbWFrZSBpdCBwbGF5IG5pY2VseSwgdXNlIHRoZSBzaWduIGV4dGVuZCBmdW5jdGlvbiB0byBjb252ZXJ0IHRoZSB2YWx1ZSBpbnRvIGEgcHJvcGVyIHNpZ25lZCBpbnRlZ2VyIHRodXM6PGJyIC8+PGJyIC8+PGI+Q29kZTwvYj46PGJyIC8+PHByZT4NCiAgUlRDIEdldFJlZyAxNyx4JSAgIA0KICB4JT1TZ25YKDcseCUpICAgICAgJyBleHRlbmQgYml0IDcgdG8gdGhlIGVuZCBvZiB0aGUgaW50ZWdlcg0KPC9wcmU+PGJyIC8+PGI+RGVwZW5kZW5jeTwvYj46PGJyIC8+PGEgY2xhc3M9InBhZ2VsaW5rIiB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iTU1CYXNpYy5TaWduLUV4dGVuZC1hbi1JbnRlZ2VyLmFzaHgiIHRpdGxlPSJTaWduIEV4dGVuZCBhbiBJbnRlZ2VyIj5TaWduIEV4dGVuZDwvYT4gRnVuY3Rpb248YnIgLz5kZDtXRFFBuV6O9fiHrkVG4cJrHBXa" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">Temperature Measurement with DS3231 Realtime Clock RTC</h1><small>Modified on 2018/02/09 18:15 by CaptainBoing &mdash; Categorized as: Dates, Time and Clocks, Electronics, Environment</small><br /><br />The DS3231 RTC chip has a temperature measurement junction which is automatically sampled every 64 seconds. The measurement is placed in registers 17 & 18. Register 17 contains whole degrees and 18 the fraction if you want it (this fraction is binary point, not decimal point so MSB is 0.5d, next is 0.25d etc.). <br /><br />This can be useful for measuring the (ambient) temperature of an enclosure.<br /><br />Assuming positive, whole degrees only:<br /><br /><b>Code</b>:<br /><pre>
  RTC GetReg 17,x%   ' read the whole degrees only into integer variable x
  x%=x% AND &amp;h7f      ' mask off the sign
</pre><br /><br /><br />If you wish to measure negative values also, the sign bit must be extended from bit 7 to the 63rd bit of the integer. Failure to do so will result in negative values registering from 128 to 255. To make it play nicely, use the sign extend function to convert the value into a proper signed integer thus:<br /><br /><b>Code</b>:<br /><pre>
  RTC GetReg 17,x%   
  x%=SgnX(7,x%)      ' extend bit 7 to the end of the integer
</pre><br /><b>Dependency</b>:<br /><a class="pagelink" target="_blank" href="MMBasic.Sign-Extend-an-Integer.html" title="Sign Extend an Integer">Sign Extend</a> Function<br />
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Temperature-Measurement-with-DS3231-Realtime-Clock-RTC by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:24:58 GMT -->
</html>
