

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.INA219-Current-Sensor by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:17:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	INA219 Current Sensor - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.INA219-Current-Sensor" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQFvcQBPGgxIGNsYXNzPSJwYWdldGl0bGUiPklOQTIxOSBDdXJyZW50IFNlbnNvcjwvaDE+PHNtYWxsPk1vZGlmaWVkIG9uIDIwMjAvMDEvMDMgMTY6MzYgYnkgQ2FwdGFpbkJvaW5nICZtZGFzaDsgQ2F0ZWdvcml6ZWQgYXM6IENvbW11bmljYXRpb25zLCBFbGVjdHJvbmljcywgRW52aXJvbm1lbnQsIEhhcmR3YXJlLCBpMmM8L3NtYWxsPjxiciAvPjxiciAvPlRoaXMgaXMgYSBwb3J0IG9mIHRoZSBJTkEyMTkgQXJkdWlubyBsaWJyYXJ5IG9yaWdpbmFsbHkgY3JlYXRlZCBieSBLLiBUb3duc2VuZCAoQWRhZnJ1aXQgSW5kdXN0cmllcyk8YnIgLz5JdCBoYXMgYmVlbiB0ZXN0ZWQgb24gTU1CYXNpYyB2NS4wNC4wNC4gSXQgYWxzbyBpbmNsdWRlcyBjb3JyZWN0aW9ucyB0byB0aGUgUG93ZXJEaXZpZGVyX21XIGNhbGN1bGF0aW9uIGluIHRoZSBjYWxpYnJhdGlvbiByb3V0aW5lcyBhcyB3ZWxsIGFzIGNvbnZlcnRzIHRoZSBuZWdhdGl2ZSByZWFkaW5ncyAoaW4gMidzIGNvbXBsZW1lbnQpIHRvIHBvc2l0aXZlLjxiciAvPlRoZSBkYXRhc2hlZXQgZm9yIHRoZSBJTkEyMTkgY2FuIGJlIGZvdW5kIDxhIGNsYXNzPSJleHRlcm5hbGxpbmsiIGhyZWY9Imh0dHA6Ly93d3cudGkuY29tL2xpdC9kcy9zeW1saW5rL2luYTIxOS5wZGYiIHRpdGxlPSJoZXJlLiIgdGFyZ2V0PSJfYmxhbmsiPmhlcmUuPC9hPjxiciAvPlRoZSBJTkEyMTkgaXMgYSB2ZXJ5IGhhbmR5IGxpdHRsZSB2b2x0YWdlL2N1cnJlbnQvcG93ZXIgc2Vuc29yIHRoYXQgY29tbXVuaWNhdGVzIHZpYSB0aGUgSTJDIGRhdGFidXMuPGJyIC8+PGJyIC8+SSBob3BlIHlvdSBhbGwgZmluZCBpdCBhcyBoYW5keSBhcyBJIGhhdmUhPGJyIC8+PGJyIC8+R1RHITxiciAvPjxiciAvPjxwcmU+DQonSU5BMjE5IHJvdXRpbmUNCg0KJ0NvZGUgZm9yIGEgTWljcm9taXRlIHRvIGNvbW11bmljYXRlIHdpdGggYSBJTkEyMTkgY3VycmVudCBzZW5zaW5nIG1vZHVsZSBvdmVyIEkyQy4NCg0KJ09yaWdpbmFsIEF1dGhvciYjNTg7LSBLLiBUb3duc2VuZCAoQWRhZnJ1aXQgSW5kdXN0cmllcykNCg0KJ1BvcnRlZCB0byBNTUJhc2ljIGJ5IEdvb2RUb0dvISwgVEJTIGZvcnVtcw0KDQonJiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsNCidTb2Z0d2FyZSBMaWNlbnNlIEFncmVlbWVudCAoQlNEIExpY2Vuc2UpDQoNCidDb3B5cmlnaHQgKGMpIDIwMTIsIEFkYWZydWl0IEluZHVzdHJpZXMNCidBbGwgcmlnaHRzIHJlc2VydmVkLg0KDQonUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0DQonbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQmIzU4Ow0KJzEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0DQonbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLg0KJzIuIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0DQonbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZQ0KJ2RvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uDQonMy4gTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlcnMgbm9yIHRoZQ0KJ25hbWVzIG9mIGl0cyBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzDQonZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uDQonDQonVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgJiMzOTsmIzM5O0FTIElTJiMzOTsmIzM5OyBBTkQgQU5ZDQonRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRA0KJ1dBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUNCidESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBCRSBMSUFCTEUgRk9SIEFOWQ0KJ0RJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTDQonKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOw0KJ0xPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORA0KJ09OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUDQonKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMNCidTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4NCicmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOw0KDQpvcHRpb24gZXhwbGljaXQNCm9wdGlvbiBkZWZhdWx0IGludGVnZXINCg0KJ1NlbGVjdCBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3VyIHBvc3NpYmxlIElOQTIxOSBJMkMgQWRkcmVzc2VzDQoNCmNvbnN0IElOQTIxOV9BRERSRVNTID0gJmFtcDtoNDAgICAgCScmYW1wO2IxMDAwMDAwID0gKEEwLEExPUdORCkNCidjb25zdCBJTkEyMTlfQUREUkVTUyA9ICZhbXA7aDQxICAJJyZhbXA7YjEwMDAwMDEgPSAoQTA9K1YsQTE9R05EKQ0KJ2NvbnN0IElOQTIxOV9BRERSRVNTID0gJmFtcDtoNDQJJyZhbXA7YjEwMDAxMDAgPSAoQTA9R05ELEExPStWKQ0KJ2NvbnN0IElOQTIxOV9BRERSRVNTID0gJmFtcDtoNDUJJyZhbXA7YjEwMDAxMDEgPSAoQTAsQTE9K1YpDQoNCicmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Ow0KJyAgICAgICBTZXR1cCBDb25zdGFudHMgYXNzb2NpYXRlZCB3aXRoIElOQTIxOQ0KJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7DQoNCmNvbnN0IElOQTIxOV9SRUFEID0gICAgICAgICAgICAgICAgICAgICAgICAgJmFtcDtoMDENCg0KY29uc3QgSU5BMjE5X1JFR0lTVEVSX0NPTkZJRyA9ICAgICAgICAgICAgICAmYW1wO2gwMCAgICAnQ29uZmlndXJhdGlvbiBSZWdpc3RlciAoUi9XKQ0KY29uc3QgSU5BMjE5X0NPTkZJR19SRVNFVCA9ICAgICAgICAgICAgICAgICAmYW1wO2g4MDAwICAnUmVzZXQgQml0DQoNCmNvbnN0IElOQTIxOV9DT05GSUdfQlZPTFRBR0VSQU5HRV9NQVNLID0gICAgJmFtcDtoMjAwMCAgJ0J1cyBWb2x0YWdlIFJhbmdlIE1hc2sNCmNvbnN0IElOQTIxOV9DT05GSUdfQlZPTFRBR0VSQU5HRV8xNlYgPSAgICAgJmFtcDtoMDAwMCAgJzAtMTZWIFJhbmdlDQpjb25zdCBJTkEyMTlfQ09ORklHX0JWT0xUQUdFUkFOR0VfMzJWID0gICAgICZhbXA7aDIwMDAgICcwLTMyViBSYW5nZQ0KDQpjb25zdCBJTkEyMTlfQ09ORklHX0dBSU5fTUFTSyA9ICAgICAgICAgICAgICZhbXA7aDE4MDAgICdHYWluIE1hc2sNCmNvbnN0IElOQTIxOV9DT05GSUdfR0FJTl8xXzQwTVYgPSAgICAgICAgICAgJmFtcDtoMDAwMCAgJ0dhaW4gMSwgNDBtViBSYW5nZQ0KY29uc3QgSU5BMjE5X0NPTkZJR19HQUlOXzJfODBNViA9ICAgICAgICAgICAmYW1wO2gwODAwICAnR2FpbiAyLCA4MG1WIFJhbmdlDQpjb25zdCBJTkEyMTlfQ09ORklHX0dBSU5fNF8xNjBNViA9ICAgICAgICAgICZhbXA7aDEwMDAgICdHYWluIDQsIDE2MG1WIFJhbmdlDQpjb25zdCBJTkEyMTlfQ09ORklHX0dBSU5fOF8zMjBNViA9ICAgICAgICAgICZhbXA7aDE4MDAgICdHYWluIDgsIDMyMG1WIFJhbmdlDQoNCmNvbnN0IElOQTIxOV9DT05GSUdfQkFEQ1JFU19NQVNLID0gICAgICAgICAgJmFtcDtoMDc4MCAgJ0J1cyBWb2x0YWdlIEFEQyBSZXNvbHV0aW9uIGFuZCBBdmVyYWdpbmcgTWFzaw0KY29uc3QgSU5BMjE5X0NPTkZJR19CQURDUkVTXzlCSVRfMVMgPSAgICAgICAmYW1wO2gwMDgwICAnMSB4IDktYml0IGJ1cyB2b2x0YWdlIHNhbXBsZQ0KY29uc3QgSU5BMjE5X0NPTkZJR19CQURDUkVTXzEwQklUXzFTID0gICAgICAmYW1wO2gwMTAwICAnMSB4IDEwLWJpdCBidXMgdm9sdGFnZSBzYW1wbGUNCmNvbnN0IElOQTIxOV9DT05GSUdfQkFEQ1JFU18xMUJJVF8xUyA9ICAgICAgJmFtcDtoMDIwMCAgJzEgeCAxMS1iaXQgYnVzIHZvbHRhZ2Ugc2FtcGxlDQpjb25zdCBJTkEyMTlfQ09ORklHX0JBRENSRVNfMTJCSVRfMVMgPSAgICAgICZhbXA7aDA0MDAgICcxIHggMTItYml0IGJ1cyB2b2x0YWdlIHNhbXBsZQ0KY29uc3QgSU5BMjE5X0NPTkZJR19CQURDUkVTXzEyQklUXzJTID0gICAgICAmYW1wO2gwNDgwICAnMiB4IDEyLWJpdCBidXMgdm9sdGFnZSBzYW1wbGVzIGF2ZXJhZ2VkIHRvZ2V0aGVyDQpjb25zdCBJTkEyMTlfQ09ORklHX0JBRENSRVNfMTJCSVRfNFMgPSAgICAgICZhbXA7aDA1MDAgICc0IHggMTItYml0IGJ1cyB2b2x0YWdlIHNhbXBsZXMgYXZlcmFnZWQgdG9nZXRoZXINCmNvbnN0IElOQTIxOV9DT05GSUdfQkFEQ1JFU18xMkJJVF84UyA9ICAgICAgJmFtcDtoMDU4MCAgJzggeCAxMi1iaXQgYnVzIHZvbHRhZ2Ugc2FtcGxlcyBhdmVyYWdlZCB0b2dldGhlcg0KY29uc3QgSU5BMjE5X0NPTkZJR19CQURDUkVTXzEyQklUXzE2UyA9ICAgICAmYW1wO2gwNjAwICAnMTYgeCAxMi1iaXQgYnVzIHZvbHRhZ2Ugc2FtcGxlcyBhdmVyYWdlZCB0b2dldGhlcg0KY29uc3QgSU5BMjE5X0NPTkZJR19CQURDUkVTXzEyQklUXzMyUyA9ICAgICAmYW1wO2gwNjgwICAnMzIgeCAxMi1iaXQgYnVzIHZvbHRhZ2Ugc2FtcGxlcyBhdmVyYWdlZCB0b2dldGhlcg0KY29uc3QgSU5BMjE5X0NPTkZJR19CQURDUkVTXzEyQklUXzY0UyA9ICAgICAmYW1wO2gwNzAwICAnNjQgeCAxMi1iaXQgYnVzIHZvbHRhZ2Ugc2FtcGxlcyBhdmVyYWdlZCB0b2dldGhlcg0KY29uc3QgSU5BMjE5X0NPTkZJR19CQURDUkVTXzEyQklUXzEyOFMgPSAgICAmYW1wO2gwNzgwICAnMTI4IHggMTItYml0IGJ1cyB2b2x0YWdlIHNhbXBsZXMgYXZlcmFnZWQgdG9nZXRoZXINCg0KY29uc3QgSU5BMjE5X0NPTkZJR19TQURDUkVTX01BU0sgPSAgICAgICAgICAmYW1wO2gwMDc4ICAnU2h1bnQgVm9sdGFnZSBBREMgUmVzb2x1dGlvbiBhbmQgQXZlcmFnaW5nIE1hc2sNCmNvbnN0IElOQTIxOV9DT05GSUdfU0FEQ1JFU185QklUXzFTID0gICAgICAgJmFtcDtoMDAwMCAgJzEgeCA5LWJpdCBzaHVudCB2b2x0YWdlIHNhbXBsZQ0KY29uc3QgSU5BMjE5X0NPTkZJR19TQURDUkVTXzEwQklUXzFTID0gICAgICAmYW1wO2gwMDA4ICAnMSB4IDEwLWJpdCBzaHVudCB2b2x0YWdlIHNhbXBsZQ0KY29uc3QgSU5BMjE5X0NPTkZJR19TQURDUkVTXzExQklUXzFTID0gICAgICAmYW1wO2gwMDEwICAnMSB4IDExLWJpdCBzaHVudCB2b2x0YWdlIHNhbXBsZQ0KY29uc3QgSU5BMjE5X0NPTkZJR19TQURDUkVTXzEyQklUXzFTID0gICAgICAmYW1wO2gwMDE4ICAnMSB4IDEyLWJpdCBzaHVudCB2b2x0YWdlIHNhbXBsZQ0KY29uc3QgSU5BMjE5X0NPTkZJR19TQURDUkVTXzEyQklUXzJTID0gICAgICAmYW1wO2gwMDQ4ICAnMiB4IDEyLWJpdCBzaHVudCB2b2x0YWdlIHNhbXBsZXMgYXZlcmFnZWQgdG9nZXRoZXINCmNvbnN0IElOQTIxOV9DT05GSUdfU0FEQ1JFU18xMkJJVF80UyA9ICAgICAgJmFtcDtoMDA1MCAgJzQgeCAxMi1iaXQgc2h1bnQgdm9sdGFnZSBzYW1wbGVzIGF2ZXJhZ2VkIHRvZ2V0aGVyDQpjb25zdCBJTkEyMTlfQ09ORklHX1NBRENSRVNfMTJCSVRfOFMgPSAgICAgICZhbXA7aDAwNTggICc4IHggMTItYml0IHNodW50IHZvbHRhZ2Ugc2FtcGxlcyBhdmVyYWdlZCB0b2dldGhlcg0KY29uc3QgSU5BMjE5X0NPTkZJR19TQURDUkVTXzEyQklUXzE2UyA9ICAgICAmYW1wO2gwMDYwICAnMTYgeCAxMi1iaXQgc2h1bnQgdm9sdGFnZSBzYW1wbGVzIGF2ZXJhZ2VkIHRvZ2V0aGVyDQpjb25zdCBJTkEyMTlfQ09ORklHX1NBRENSRVNfMTJCSVRfMzJTID0gICAgICZhbXA7aDAwNjggICczMiB4IDEyLWJpdCBzaHVudCB2b2x0YWdlIHNhbXBsZXMgYXZlcmFnZWQgdG9nZXRoZXINCmNvbnN0IElOQTIxOV9DT05GSUdfU0FEQ1JFU18xMkJJVF82NFMgPSAgICAgJmFtcDtoMDA3MCAgJzY0IHggMTItYml0IHNodW50IHZvbHRhZ2Ugc2FtcGxlcyBhdmVyYWdlZCB0b2dldGhlcg0KY29uc3QgSU5BMjE5X0NPTkZJR19TQURDUkVTXzEyQklUXzEyOFMgPSAgICAmYW1wO2gwMDc4ICAnMTI4IHggMTItYml0IHNodW50IHZvbHRhZ2Ugc2FtcGxlcyBhdmVyYWdlZCB0b2dldGhlcg0KDQpjb25zdCBJTkEyMTlfQ09ORklHX01PREVfTUFTSyA9ICAgICAgICAgICAgICZhbXA7aDAwMDcgICdPcGVyYXRpbmcgTW9kZSBNYXNrDQpjb25zdCBJTkEyMTlfQ09ORklHX01PREVfUE9XRVJET1dOID0gICAgICAgICZhbXA7aDAwMDANCmNvbnN0IElOQTIxOV9DT05GSUdfTU9ERV9TVk9MVF9UUklHID0gICAgICAgJmFtcDtoMDAwMQ0KY29uc3QgSU5BMjE5X0NPTkZJR19NT0RFX0JWT0xUX1RSSUcgPSAgICAgICAmYW1wO2gwMDAyDQpjb25zdCBJTkEyMTlfQ09ORklHX01PREVfU05CVk9MVF9UUklHID0gICAgICZhbXA7aDAwMDMNCmNvbnN0IElOQTIxOV9DT05GSUdfTU9ERV9BRENPRkYgPSAgICAgICAgICAgJmFtcDtoMDAwNA0KY29uc3QgSU5BMjE5X0NPTkZJR19NT0RFX1NWT0xUX0NPTlQgPSAgICAgICAmYW1wO2gwMDA1DQpjb25zdCBJTkEyMTlfQ09ORklHX01PREVfQlZPTFRfQ09OVCA9ICAgICAgICZhbXA7aDAwMDYNCmNvbnN0IElOQTIxOV9DT05GSUdfTU9ERV9TTkJWT0xUX0NPTlQgPSAgICAgJmFtcDtoMDAwNw0KDQpjb25zdCBJTkEyMTlfUkVHSVNURVJfU0hVTlRWT0xUQUdFID0gICAgICAgICZhbXA7aDAxICdTaHVudCBWb2x0YWdlIFJlZ2lzdGVyIChSKQ0KY29uc3QgSU5BMjE5X1JFR0lTVEVSX0JVU1ZPTFRBR0UgPSAgICAgICAgICAmYW1wO2gwMiAnQnVzIFZvbHRhZ2UgUmVnaXN0ZXIgKFIpDQpjb25zdCBJTkEyMTlfUkVHSVNURVJfUE9XRVIgPSAgICAgICAgICAgICAgICZhbXA7aDAzICdQb3dlciBSZWdpc3RlciAoUikNCmNvbnN0IElOQTIxOV9SRUdJU1RFUl9DVVJSRU5UID0gICAgICAgICAgICAgJmFtcDtoMDQgJ0N1cnJlbnQgUmVnaXN0ZXIgKFIpDQpjb25zdCBJTkEyMTlfUkVHSVNURVJfQ0FMSUJSQVRJT04gPSAgICAgICAgICZhbXA7aDA1ICdDYWxpYnJhdGlvbiByZWdpc3RlciAoUi9XKQ0KDQpkaW0gSU5BMjE5X2N1cnJlbnREaXZpZGVyX21BIGFzIGZsb2F0DQpkaW0gSU5BMjE5X3Bvd2VyRGl2aWRlcl9tVyBhcyBmbG9hdA0KZGltIElOQTIxOV9jYWxWYWx1ZQ0KDQppMmMgb3BlbiAxMDAsIDEwMA0KDQonJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsNCicgIFNlbGVjdCBvbmUgb2YgdGhlIGJlbG93IHRvIHNldCB1cCB0aGUgSGFyZHdhcmUgY2FsaWJyYXRpb24NCicmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Ow0KDQpzZXRDYWxpYnJhdGlvbl8zMlZfMkENCidzZXRDYWxpYnJhdGlvbl8zMlZfMUENCidzZXRDYWxpYnJhdGlvbl8xNlZfNDAwbUENCg0KJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7DQonICAgICAgICAgICAgICAgICAgIE1haW4gUHJvZ3JhbQ0KJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7DQoNCmRpbSBzaHVudHZvbHRhZ2UgYXMgZmxvYXQNCmRpbSBidXN2b2x0YWdlIGFzIGZsb2F0DQpkaW0gY3VycmVudCBhcyBmbG9hdA0KZGltIHN1cHBseXZvbHRhZ2UgYXMgZmxvYXQNCmRpbSBwb3dlciBhcyBmbG9hdA0KDQpkbw0KICBzaHVudHZvbHRhZ2UgPSBTaHVudFZvbHRhZ2VfbVYoKQ0KICBidXN2b2x0YWdlID0gQnVzVm9sdGFnZV9WKCkNCiAgY3VycmVudCA9IEN1cnJlbnRfbUEoKQ0KICBzdXBwbHl2b2x0YWdlID0gU3VwcGx5Vm9sdGFnZV9WKCkNCiAgcG93ZXIgPSBQb3dlcl9tVygpDQogIA0KICBwcmludCJCdXMgVm9sdGFnZSYjNTg7ICAgICIrc3RyJChidXN2b2x0YWdlKSsiViINCiAgcHJpbnQiU2h1bnQgVm9sdGFnZSYjNTg7ICAiK3N0ciQoc2h1bnR2b2x0YWdlKSsibVYiDQogIHByaW50IlN1cHBseSBWb2x0YWdlJiM1ODsgIitzdHIkKHN1cHBseXZvbHRhZ2UpKyJWIg0KICBwcmludCJDdXJyZW50JiM1ODsgICAgICAgICIrc3RyJChjdXJyZW50KSsibUEiDQogIHByaW50IlBvd2VyJiM1ODsgICAgICAgICAgIitzdHIkKHBvd2VyKSsibVciDQogIHByaW50IkNhbGMuIFBvd2VyJiM1ODsgICAgIitzdHIkKGJ1c3ZvbHRhZ2UmIzQyO2N1cnJlbnQpKyJtVyINCiAgcHJpbnQiIg0KICBwYXVzZSAyMDAwDQpsb29wDQoNCicmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Ow0KJyAgICAgICAgICAgICAgICAgQ2FsY3VsYXRpb24gRnVuY3Rpb25zDQonJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsNCg0KZnVuY3Rpb24gQnVzVm9sdGFnZV9WKCkgYXMgZmxvYXQgICdHZXRzIHRoZSBidXMgdm9sdGFnZSBpbiB2b2x0cw0KICBMb2NhbCBWYWx1ZQ0KICBSZWFkUmVnaXN0ZXIgKElOQTIxOV9SRUdJU1RFUl9CVVNWT0xUQUdFLCBWYWx1ZSkNCiAgVmFsdWUgPSgoVmFsdWUgJmd0OyZndDsgMykgJiM0MjsgNCkgJ1NoaWZ0IHRvIHJpZ2h0IDMgdG8gZHJvcCBDb252ZXJzaW9uUmVhZHkgYW5kIE92ZXJGbG93IGJpdHMsIG11bHRpcGx5IGJ5IExTQg0KICBCdXNWb2x0YWdlX1YgPSBWYWx1ZSAvIDEwMDANCkVuZCBGdW5jdGlvbg0KDQpmdW5jdGlvbiBTaHVudFZvbHRhZ2VfbVYoKSBhcyBmbG9hdCAnR2V0cyB0aGUgc2h1bnQgdm9sdGFnZSBpbiBtVg0KICBsb2NhbCBWYWx1ZQ0KICBSZWFkUmVnaXN0ZXIgKElOQTIxOV9SRUdJU1RFUl9TSFVOVFZPTFRBR0UsIFZhbHVlKQ0KICBJZiAoKFZhbHVlICZndDsmZ3Q7IDE1KSBhbmQgMSkgPSAxIHRoZW4gJ0NoZWNrIGZvciBuZWdhdGl2ZSByZWFkaW5nICgy4oCZcyBjb21wbGVtZW50KQ0KICAgICBWYWx1ZSA9IC0oKFZhbHVlIHhvciAmYW1wO2hmZmZmKSArIDEpICAnQ29udmVydCBuZWdhdGl2ZSByZWFkaW5nIHRvIGEgbmVnYXRpdmUgaW50ZWdlcg0KICBlbmRpZgkNCiAgU2h1bnRWb2x0YWdlX21WID0gKFZhbHVlIC8gMTAwKQ0KZW5kIGZ1bmN0aW9uDQoNCmZ1bmN0aW9uIFN1cHBseVZvbHRhZ2VfVigpIGFzIGZsb2F0ICdUaGUgU3VwcGx5IHZvbHRhZ2UgaXMgYSBjb21iaW5hdGlvbiBvZiB0aGUgQnVzIHZvbHRhZ2UgYW5kIHRoZSBTaHVudCB2b2x0YWdlDQogIFN1cHBseVZvbHRhZ2VfViA9IEJ1c1ZvbHRhZ2VfVigpICsgKFNodW50Vm9sdGFnZV9tVigpLzEwMDApDQplbmQgZnVuY3Rpb24gIA0KDQpmdW5jdGlvbiBDdXJyZW50X21BKCkgJ0dldHMgdGhlIGN1cnJlbnQgdmFsdWUgaW4gbUENCiAgbG9jYWwgVmFsdWUNCiAgUmVhZFJlZ2lzdGVyKElOQTIxOV9SRUdJU1RFUl9DVVJSRU5ULCBWYWx1ZSkNCiAgSWYgKChWYWx1ZSAmZ3Q7Jmd0OyAxNSkgYW5kIDEpID0gMSB0aGVuICdDaGVjayBmb3IgbmVnYXRpdmUgcmVhZGluZyAoMuKAmXMgY29tcGxlbWVudCkNCiAgICAgVmFsdWUgPSAtKChWYWx1ZSB4b3IgJmFtcDtoZmZmZikgKyAxKSAgJ0NvbnZlcnQgbmVnYXRpdmUgcmVhZGluZyB0byBhIG5lZ2F0aXZlIGludGVnZXIJDQogIGVuZGlmCQ0KICBDdXJyZW50X21BID0gVmFsdWUgLyBJTkEyMTlfY3VycmVudERpdmlkZXJfbUENCmVuZCBmdW5jdGlvbg0KICANCmZ1bmN0aW9uIFBvd2VyX21XKCkgJ0dldHMgdGhlIHBvd2VyIHZhbHVlIGluIG1XDQogIGxvY2FsIFZhbHVlDQogIFJlYWRSZWdpc3RlciAoSU5BMjE5X1JFR0lTVEVSX1BPV0VSLCBWYWx1ZSkNCiAgUG93ZXJfbVcgPSBWYWx1ZSAvIElOQTIxOV9wb3dlckRpdmlkZXJfbVcNCmVuZCBmdW5jdGlvbg0KDQonJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsNCicgICAgICAgICAgICAgSTJDIHJlYWQgYW5kIHdyaXRlIHJvdXRpbmVzDQonJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsNCg0Kc3ViIFJlYWRSZWdpc3RlciAoUmVnaXN0ZXIsIFZhbHVlKSAgJ1JlYWRzIGEgMTYgYml0IHZhbHVlIG92ZXIgSTJDDQogIGxvY2FsIEdldERhdGEoMSkNCiAgaTJjIHdyaXRlIElOQTIxOV9BRERSRVNTLCAwLCAxLCBSZWdpc3Rlcg0KICBpMmMgcmVhZCBJTkEyMTlfQUREUkVTUywgMCwgMiwgR2V0RGF0YSgpDQogIFZhbHVlID0gKChHZXREYXRhKDApICZsdDsmbHQ7OCkgb3IgR2V0RGF0YSgxKSkNCmVuZCBzdWINCg0Kc3ViIFdyaXRlUmVnaXN0ZXIgKFJlZ2lzdGVyLCBWYWx1ZSkgJ1dyaXRlcyBhIDE2IGJpdCB2YWx1ZSAoMiB4IDggYml0KSBpbiBhIHJlZ2lzdGVyIG92ZXIgSTJDDQogIGxvY2FsIE1TQixMU0INCiAgTVNCID0gVmFsdWUgJmd0OyZndDsgOA0KICBMU0IgPSBWYWx1ZSBhbmQgJmFtcDtoZmYNCiAgaTJjIHdyaXRlIElOQTIxOV9BRERSRVNTLCAwLCAzLCBSZWdpc3RlciwgTVNCLCBMU0INCmVuZCBzdWINCg0KJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7DQonICAgICAgICAgICAgICAgVmFyaW91cyBjYWxpYnJhdGlvbiByb3V0aW5lcw0KJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7DQoNCnN1YiBzZXRDYWxpYnJhdGlvbl8zMlZfMkENCg0KICBsb2NhbCBDb25maWcgYXMgaW50ZWdlcg0KICANCidDb25maWd1cmVzIHRvIElOQTIxOSB0byBiZSBhYmxlIHRvIG1lYXN1cmUgdXAgdG8gMzJWIGFuZCAyQSBvZiBjdXJyZW50Lg0KJ0VhY2ggdW5pdCBvZiBjdXJyZW50IGNvcnJlc3BvbmRzIHRvIDEwMHVBLCBhbmQgZWFjaCB1bml0IG9mIHBvd2VyIGNvcnJlc3BvbmRzIHRvIDJtVy4NCidDb3VudGVyIG92ZXJmbG93IG9jY3VycyBhdCAzLjJBLg0KJ05vdGUmIzU4OyBUaGVzZSBjYWxjdWxhdGlvbnMgYXNzdW1lIGEgMC4xIG9obSByZXNpc3RvciBpcyBwcmVzZW50DQonJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7LQ0KDQogICcgQnkgZGVmYXVsdCB3ZSB1c2UgYSBwcmV0dHkgaHVnZSByYW5nZSBmb3IgdGhlIGlucHV0IHZvbHRhZ2UsDQogICcgd2hpY2ggcHJvYmFibHkgaXNuJ3QgdGhlIG1vc3QgYXBwcm9wcmlhdGUgY2hvaWNlIGZvciBzeXN0ZW0NCiAgJyB0aGF0IGRvbid0IHVzZSBhIGxvdCBvZiBwb3dlci4gIEJ1dCBhbGwgb2YgdGhlIGNhbGN1bGF0aW9ucw0KICAnIGFyZSBzaG93biBiZWxvdyBpZiB5b3Ugd2FudCB0byBjaGFuZ2UgdGhlIHNldHRpbmdzLiAgWW91IHdpbGwNCiAgJyBhbHNvIG5lZWQgdG8gY2hhbmdlIGFueSByZWxldmFudCByZWdpc3RlciBzZXR0aW5ncywgc3VjaCBhcw0KICAnIHNldHRpbmcgdGhlIFZCVVNfTUFYIHRvIDE2ViBpbnN0ZWFkIG9mIDMyViwgZXRjLg0KDQogICcgVkJVU19NQVggPSAzMlYgICAgICAgICAgICAgKEFzc3VtZXMgMzJWLCBjYW4gYWxzbyBiZSBzZXQgdG8gMTZWKQ0KICAnIFZTSFVOVF9NQVggPSAwLjMyICAgICAgICAgIChBc3N1bWVzIEdhaW4gOCwgMzIwbVYsIGNhbiBhbHNvIGJlIDAuMTYsIDAuMDgsIDAuMDQpDQogICcgUlNIVU5UID0gMC4xICAgICAgICAgICAgICAgKFJlc2lzdG9yIHZhbHVlIGluIG9obXMpDQogIA0KICAnIDEuIERldGVybWluZSBtYXggcG9zc2libGUgY3VycmVudA0KICAnIE1heFBvc3NpYmxlX0kgPSBWU0hVTlRfTUFYIC8gUlNIVU5UDQogICcgTWF4UG9zc2libGVfSSA9IDMuMkENCiAgDQogICcgMi4gRGV0ZXJtaW5lIG1heCBleHBlY3RlZCBjdXJyZW50DQogICcgTWF4RXhwZWN0ZWRfSSA9IDIuMEENCiAgDQogICcgMy4gQ2FsY3VsYXRlIHBvc3NpYmxlIHJhbmdlIG9mIExTQnMgKE1pbiA9IDE1LWJpdCwgTWF4ID0gMTItYml0KQ0KICAnIE1pbmltdW1MU0IgPSBNYXhFeHBlY3RlZF9JLzMyNzY3DQogICcgTWluaW11bUxTQiA9IDAuMDAwMDYxICAgICAgICAgICAgICAoNjF1QSBwZXIgYml0KQ0KICAnIE1heGltdW1MU0IgPSBNYXhFeHBlY3RlZF9JLzQwOTYNCiAgJyBNYXhpbXVtTFNCID0gMC4wMDA0ODggICAgICAgICAgICAgICg0ODh1QSBwZXIgYml0KQ0KICANCiAgJyA0LiBDaG9vc2UgYW4gTFNCIGJldHdlZW4gdGhlIG1pbiBhbmQgbWF4IHZhbHVlcw0KICAnICAgIChQcmVmZXJyYWJseSBhIHJvdW5kaXNoIG51bWJlciBjbG9zZSB0byBNaW5MU0IpDQogICcgQ3VycmVudExTQiA9IDAuMDAwMSAoMTAwdUEgcGVyIGJpdCkNCiAgDQogICcgNS4gQ29tcHV0ZSB0aGUgY2FsaWJyYXRpb24gcmVnaXN0ZXINCiAgJyBDYWwgPSB0cnVuYyAoMC4wNDA5NiAvIChDdXJyZW50X0xTQiAmIzQyOyBSU0hVTlQpKQ0KICAnIENhbCA9IDQwOTYgKDB4MTAwMCkNCiAgDQogIElOQTIxOV9jYWxWYWx1ZSA9IDQwOTYNCiAgDQogICcgNi4gQ2FsY3VsYXRlIHRoZSBwb3dlciBMU0INCiAgJyBQb3dlckxTQiA9IDIwICYjNDI7IEN1cnJlbnRMU0INCiAgJyBQb3dlckxTQiA9IDAuMDAyICgybVcgcGVyIGJpdCkNCiAgDQogICcgNy4gQ29tcHV0ZSB0aGUgbWF4aW11bSBjdXJyZW50IGFuZCBzaHVudCB2b2x0YWdlIHZhbHVlcyBiZWZvcmUgb3ZlcmZsb3cNCiAgJw0KICAnIE1heF9DdXJyZW50ID0gQ3VycmVudF9MU0IgJiM0MjsgMzI3NjcNCiAgJyBNYXhfQ3VycmVudCA9IDMuMjc2N0EgYmVmb3JlIG92ZXJmbG93DQogICcNCiAgJyBJZiBNYXhfQ3VycmVudCAmZ3Q7IE1heF9Qb3NzaWJsZV9JIHRoZW4NCiAgJyAgICBNYXhfQ3VycmVudF9CZWZvcmVfT3ZlcmZsb3cgPSBNYXhQb3NzaWJsZV9JDQogICcgRWxzZQ0KICAnICAgIE1heF9DdXJyZW50X0JlZm9yZV9PdmVyZmxvdyA9IE1heF9DdXJyZW50DQogICcgRW5kIElmDQogICcNCiAgJyBNYXhfU2h1bnRWb2x0YWdlID0gTWF4X0N1cnJlbnRfQmVmb3JlX092ZXJmbG93ICYjNDI7IFJTSFVOVA0KICAnIE1heF9TaHVudFZvbHRhZ2UgPSAwLjMyVg0KICAnDQogICcgSWYgTWF4X1NodW50Vm9sdGFnZSAmZ3Q7PSBWU0hVTlRfTUFYDQogICcgICAgTWF4X1NodW50Vm9sdGFnZV9CZWZvcmVfT3ZlcmZsb3cgPSBWU0hVTlRfTUFYDQogICcgRWxzZQ0KICAnICAgIE1heF9TaHVudFZvbHRhZ2VfQmVmb3JlX092ZXJmbG93ID0gTWF4X1NodW50Vm9sdGFnZQ0KICAnIEVuZCBJZg0KICANCiAgJyA4LiBDb21wdXRlIHRoZSBNYXhpbXVtIFBvd2VyDQogICcgTWF4aW11bVBvd2VyID0gTWF4X0N1cnJlbnRfQmVmb3JlX092ZXJmbG93ICYjNDI7IFZCVVNfTUFYDQogICcgTWF4aW11bVBvd2VyID0gMy4yICYjNDI7IDMyVg0KICAnIE1heGltdW1Qb3dlciA9IDEwMi40Vw0KICANCiAgJyBTZXQgbXVsdGlwbGllcnMgdG8gY29udmVydCByYXcgY3VycmVudC9wb3dlciB2YWx1ZXMNCiAgSU5BMjE5X2N1cnJlbnREaXZpZGVyX21BID0gMTAgICdDdXJyZW50IExTQiA9IDEwMHVBIHBlciBiaXQgKDEwMDAvMTAwID0gMTApDQogIElOQTIxOV9wb3dlckRpdmlkZXJfbVcgPSAwLjUgICAgICdQb3dlciBMU0IgPSAybVcgcGVyIGJpdCAoMS8yKQ0KDQogICcgU2V0IENhbGlicmF0aW9uIHJlZ2lzdGVyIHRvICdDYWwnIGNhbGN1bGF0ZWQgYWJvdmUJDQogIFdyaXRlUmVnaXN0ZXIoSU5BMjE5X1JFR0lTVEVSX0NBTElCUkFUSU9OLCBJTkEyMTlfY2FsVmFsdWUpIA0KICANCiAgJyBTZXQgQ29uZmlnIHJlZ2lzdGVyIHRvIHRha2UgaW50byBhY2NvdW50IHRoZSBzZXR0aW5ncyBhYm92ZQ0KICBDb25maWcgPSBJTkEyMTlfQ09ORklHX0JWT0xUQUdFUkFOR0VfMzJWIG9yIElOQTIxOV9DT05GSUdfR0FJTl84XzMyME1WIG9yIElOQTIxOV9DT05GSUdfQkFEQ1JFU18xMkJJVF8yUw0KICBDb25maWcgPSBDb25maWcgb3IgSU5BMjE5X0NPTkZJR19TQURDUkVTXzEyQklUXzJTIG9yIElOQTIxOV9DT05GSUdfTU9ERV9TTkJWT0xUX0NPTlQNCiAgV3JpdGVSZWdpc3RlcihJTkEyMTlfUkVHSVNURVJfQ09ORklHLCBDb25maWcpDQplbmQgc3ViDQoNCnN1YiBzZXRDYWxpYnJhdGlvbl8zMlZfMUENCg0KICBsb2NhbCBDb25maWcgYXMgSW50ZWdlcg0KICANCidDb25maWd1cmVzIHRvIElOQTIxOSB0byBiZSBhYmxlIHRvIG1lYXN1cmUgdXAgdG8gMzJWIGFuZCAxQSBvZiBjdXJyZW50Lg0KJ0VhY2ggdW5pdCBvZiBjdXJyZW50IGNvcnJlc3BvbmRzIHRvIDQwdUEsIGFuZCBlYWNoIHVuaXQgb2YgcG93ZXIgY29ycmVzcG9uZHMgdG8gODAwdVcuDQonQ291bnRlciBvdmVyZmxvdyBvY2N1cnMgYXQgMS4zQS4NCidOb3RlJiM1ODsgVGhlc2UgY2FsY3VsYXRpb25zIGFzc3VtZSBhIDAuMSBvaG0gcmVzaXN0b3IgaXMgcHJlc2VudA0KJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Oy0NCiAgDQogICcgVkJVU19NQVggPSAzMlYJCShBc3N1bWVzIDMyViwgY2FuIGFsc28gYmUgc2V0IHRvIDE2VikNCiAgJyBWU0hVTlRfTUFYID0gMC4zMgkoQXNzdW1lcyBHYWluIDgsIDMyMG1WLCBjYW4gYWxzbyBiZSAwLjE2LCAwLjA4LCAwLjA0KQ0KICAnIFJTSFVOVCA9IDAuMQkJCShSZXNpc3RvciB2YWx1ZSBpbiBvaG1zKQ0KDQogICcgMS4gRGV0ZXJtaW5lIG1heCBwb3NzaWJsZSBjdXJyZW50DQogICcgTWF4UG9zc2libGVfSSA9IFZTSFVOVF9NQVggLyBSU0hVTlQNCiAgJyBNYXhQb3NzaWJsZV9JID0gMy4yQQ0KDQogICcgMi4gRGV0ZXJtaW5lIG1heCBleHBlY3RlZCBjdXJyZW50DQogICcgTWF4RXhwZWN0ZWRfSSA9IDEuMEENCg0KICAnIDMuIENhbGN1bGF0ZSBwb3NzaWJsZSByYW5nZSBvZiBMU0JzIChNaW4gPSAxNS1iaXQsIE1heCA9IDEyLWJpdCkNCiAgJyBNaW5pbXVtTFNCID0gTWF4RXhwZWN0ZWRfSS8zMjc2Nw0KICAnIE1pbmltdW1MU0IgPSAwLjAwMDAzMDUgICAgICAgICAgICAgKDMwLjV1QSBwZXIgYml0KQ0KICAnIE1heGltdW1MU0IgPSBNYXhFeHBlY3RlZF9JLzQwOTYNCiAgJyBNYXhpbXVtTFNCID0gMC4wMDAyNDQgICAgICAgICAgICAgICgyNDR1QSBwZXIgYml0KQ0KDQogICcgNC4gQ2hvb3NlIGFuIExTQiBiZXR3ZWVuIHRoZSBtaW4gYW5kIG1heCB2YWx1ZXMNCiAgJyAgICAoUHJlZmVycmFibHkgYSByb3VuZGlzaCBudW1iZXIgY2xvc2UgdG8gTWluTFNCKQ0KICAnIEN1cnJlbnRMU0IgPSAwLjAwMDA0MDAgKDQwdUEgcGVyIGJpdCkNCg0KICAnIDUuIENvbXB1dGUgdGhlIGNhbGlicmF0aW9uIHJlZ2lzdGVyDQogICcgQ2FsID0gdHJ1bmMgKDAuMDQwOTYgLyAoQ3VycmVudF9MU0IgJiM0MjsgUlNIVU5UKSkNCiAgJyBDYWwgPSAxMDI0MCAoMHgyODAwKQ0KDQogIElOQTIxOV9jYWxWYWx1ZSA9IDEwMjQwDQogIA0KICAnIDYuIENhbGN1bGF0ZSB0aGUgcG93ZXIgTFNCDQogICcgUG93ZXJMU0IgPSAyMCAmIzQyOyBDdXJyZW50TFNCDQogICcgUG93ZXJMU0IgPSAwLjAwMDggKDgwMHVXIHBlciBiaXQpDQoNCiAgJyA3LiBDb21wdXRlIHRoZSBtYXhpbXVtIGN1cnJlbnQgYW5kIHNodW50IHZvbHRhZ2UgdmFsdWVzIGJlZm9yZSBvdmVyZmxvdw0KICAnDQogICcgTWF4X0N1cnJlbnQgPSBDdXJyZW50X0xTQiAmIzQyOyAzMjc2Nw0KICAnIE1heF9DdXJyZW50ID0gMS4zMTA2OEEgYmVmb3JlIG92ZXJmbG93DQogICcNCiAgJyBJZiBNYXhfQ3VycmVudCAmZ3Q7IE1heF9Qb3NzaWJsZV9JIHRoZW4NCiAgJyAgICBNYXhfQ3VycmVudF9CZWZvcmVfT3ZlcmZsb3cgPSBNYXhQb3NzaWJsZV9JDQogICcgRWxzZQ0KICAnICAgIE1heF9DdXJyZW50X0JlZm9yZV9PdmVyZmxvdyA9IE1heF9DdXJyZW50DQogICcgRW5kIElmDQogICcNCiAgJyAuLi4gSW4gdGhpcyBjYXNlLCB3ZSdyZSBnb29kIHRob3VnaCBzaW5jZSBNYXhfQ3VycmVudCBpcyBsZXNzIHRoYW4gTWF4UG9zc2libGVfSQ0KICAnDQogICcgTWF4X1NodW50Vm9sdGFnZSA9IE1heF9DdXJyZW50X0JlZm9yZV9PdmVyZmxvdyAmIzQyOyBSU0hVTlQNCiAgJyBNYXhfU2h1bnRWb2x0YWdlID0gMC4xMzEwNjhWDQogICcNCiAgJyBJZiBNYXhfU2h1bnRWb2x0YWdlICZndDs9IFZTSFVOVF9NQVgNCiAgJyAgICBNYXhfU2h1bnRWb2x0YWdlX0JlZm9yZV9PdmVyZmxvdyA9IFZTSFVOVF9NQVgNCiAgJyBFbHNlDQogICcgICAgTWF4X1NodW50Vm9sdGFnZV9CZWZvcmVfT3ZlcmZsb3cgPSBNYXhfU2h1bnRWb2x0YWdlDQogICcgRW5kIElmDQoNCiAgJyA4LiBDb21wdXRlIHRoZSBNYXhpbXVtIFBvd2VyDQogICcgTWF4aW11bVBvd2VyID0gTWF4X0N1cnJlbnRfQmVmb3JlX092ZXJmbG93ICYjNDI7IFZCVVNfTUFYDQogICcgTWF4aW11bVBvd2VyID0gMS4zMTA2OCAmIzQyOyAzMlYNCiAgJyBNYXhpbXVtUG93ZXIgPSA0MS45NDE3NlcNCg0KICAnIFNldCBtdWx0aXBsaWVycyB0byBjb252ZXJ0IHJhdyBjdXJyZW50L3Bvd2VyIHZhbHVlcw0KICBJTkEyMTlfY3VycmVudERpdmlkZXJfbUEgPSAyNSAgJ0N1cnJlbnQgTFNCID0gNDB1QSBwZXIgYml0ICgxMDAwLzQwID0gMjUpDQogIElOQTIxOV9wb3dlckRpdmlkZXJfbVcgPSAxLjI1ICAnUG93ZXIgTFNCID0gODAwdVcgcGVyIGJpdCAoMS8wLjgpDQoNCiAgJyBTZXQgQ2FsaWJyYXRpb24gcmVnaXN0ZXIgdG8gJ0NhbCcgY2FsY3VsYXRlZCBhYm92ZQkNCiAgV3JpdGVSZWdpc3RlcihJTkEyMTlfUkVHSVNURVJfQ0FMSUJSQVRJT04sIElOQTIxOV9jYWxWYWx1ZSkgDQoNCiAgJyBTZXQgQ29uZmlnIHJlZ2lzdGVyIHRvIHRha2UgaW50byBhY2NvdW50IHRoZSBzZXR0aW5ncyBhYm92ZQ0KICBDb25maWcgPSBJTkEyMTlfQ09ORklHX0JWT0xUQUdFUkFOR0VfMzJWIG9yIElOQTIxOV9DT05GSUdfR0FJTl84XzMyME1WIG9yIElOQTIxOV9DT05GSUdfQkFEQ1JFU18xMkJJVF8yUw0KICBDb25maWcgPSBDb25maWcgb3IgSU5BMjE5X0NPTkZJR19TQURDUkVTXzEyQklUXzJTIG9yIElOQTIxOV9DT05GSUdfTU9ERV9TTkJWT0xUX0NPTlQNCiAgV3JpdGVSZWdpc3RlcihJTkEyMTlfUkVHSVNURVJfQ09ORklHLCBDb25maWcpDQplbmQgc3ViDQoNCnN1YiBzZXRDYWxpYnJhdGlvbl8xNlZfNDAwbUENCg0KICBsb2NhbCBDb25maWcgYXMgaW50ZWdlcg0KICANCidDYWxpYnJhdGlvbiB3aGljaCB1c2VzIHRoZSBoaWdoZXN0IHByZWNpc2lvbiBmb3IgY3VycmVudCBtZWFzdXJlbWVudCAoMC4xbUEpDQonYXQgdGhlIGV4cGVuc2Ugb2Ygb25seSBzdXBwb3J0aW5nIDE2ViBhdCA0MDBtQSBtYXguDQonJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7LQ0KICANCiAgJyBWQlVTX01BWCA9IDE2Vg0KICAnIFZTSFVOVF9NQVggPSAwLjA0ICAgICAgICAgIChBc3N1bWVzIEdhaW4gMSwgNDBtVikNCiAgJyBSU0hVTlQgPSAwLjEgICAgICAgICAgICAgICAoUmVzaXN0b3IgdmFsdWUgaW4gb2htcykNCiAgDQogICcgMS4gRGV0ZXJtaW5lIG1heCBwb3NzaWJsZSBjdXJyZW50DQogICcgTWF4UG9zc2libGVfSSA9IFZTSFVOVF9NQVggLyBSU0hVTlQNCiAgJyBNYXhQb3NzaWJsZV9JID0gMC40QQ0KDQogICcgMi4gRGV0ZXJtaW5lIG1heCBleHBlY3RlZCBjdXJyZW50DQogICcgTWF4RXhwZWN0ZWRfSSA9IDAuNEENCiAgDQogICcgMy4gQ2FsY3VsYXRlIHBvc3NpYmxlIHJhbmdlIG9mIExTQnMgKE1pbiA9IDE1LWJpdCwgTWF4ID0gMTItYml0KQ0KICAnIE1pbmltdW1MU0IgPSBNYXhFeHBlY3RlZF9JLzMyNzY3DQogICcgTWluaW11bUxTQiA9IDAuMDAwMDEyMiAgICAgICAgICAgICAgKDEydUEgcGVyIGJpdCkNCiAgJyBNYXhpbXVtTFNCID0gTWF4RXhwZWN0ZWRfSS80MDk2DQogICcgTWF4aW11bUxTQiA9IDAuMDAwMDk3NyAgICAgICAgICAgICAgKDk4dUEgcGVyIGJpdCkNCiAgDQogICcgNC4gQ2hvb3NlIGFuIExTQiBiZXR3ZWVuIHRoZSBtaW4gYW5kIG1heCB2YWx1ZXMNCiAgJyAgICAoUHJlZmVycmFibHkgYSByb3VuZGlzaCBudW1iZXIgY2xvc2UgdG8gTWluTFNCKQ0KICAnIEN1cnJlbnRMU0IgPSAwLjAwMDA1ICg1MHVBIHBlciBiaXQpDQogIA0KICAnIDUuIENvbXB1dGUgdGhlIGNhbGlicmF0aW9uIHJlZ2lzdGVyDQogICcgQ2FsID0gdHJ1bmMgKDAuMDQwOTYgLyAoQ3VycmVudF9MU0IgJiM0MjsgUlNIVU5UKSkNCiAgJyBDYWwgPSA4MTkyICgweDIwMDApDQoNCiAgSU5BMjE5X2NhbFZhbHVlID0gODE5Mg0KDQogICcgNi4gQ2FsY3VsYXRlIHRoZSBwb3dlciBMU0INCiAgJyBQb3dlckxTQiA9IDIwICYjNDI7IEN1cnJlbnRMU0INCiAgJyBQb3dlckxTQiA9IDAuMDAxICgxbVcgcGVyIGJpdCkNCiAgDQogICcgNy4gQ29tcHV0ZSB0aGUgbWF4aW11bSBjdXJyZW50IGFuZCBzaHVudCB2b2x0YWdlIHZhbHVlcyBiZWZvcmUgb3ZlcmZsb3cNCiAgJw0KICAnIE1heF9DdXJyZW50ID0gQ3VycmVudF9MU0IgJiM0MjsgMzI3NjcNCiAgJyBNYXhfQ3VycmVudCA9IDEuNjM4MzVBIGJlZm9yZSBvdmVyZmxvdw0KICAnDQogICcgSWYgTWF4X0N1cnJlbnQgJmd0OyBNYXhfUG9zc2libGVfSSB0aGVuDQogICcgICAgTWF4X0N1cnJlbnRfQmVmb3JlX092ZXJmbG93ID0gTWF4UG9zc2libGVfSQ0KICAnIEVsc2UNCiAgJyAgICBNYXhfQ3VycmVudF9CZWZvcmVfT3ZlcmZsb3cgPSBNYXhfQ3VycmVudA0KICAnIEVuZCBJZg0KICAnDQogICcgTWF4X0N1cnJlbnRfQmVmb3JlX092ZXJmbG93ID0gTWF4UG9zc2libGVfSQ0KICAnIE1heF9DdXJyZW50X0JlZm9yZV9PdmVyZmxvdyA9IDAuNA0KICAnDQogICcgTWF4X1NodW50Vm9sdGFnZSA9IE1heF9DdXJyZW50X0JlZm9yZV9PdmVyZmxvdyAmIzQyOyBSU0hVTlQNCiAgJyBNYXhfU2h1bnRWb2x0YWdlID0gMC4wNFYNCiAgJw0KICAnIElmIE1heF9TaHVudFZvbHRhZ2UgJmd0Oz0gVlNIVU5UX01BWA0KICAnICAgIE1heF9TaHVudFZvbHRhZ2VfQmVmb3JlX092ZXJmbG93ID0gVlNIVU5UX01BWA0KICAnIEVsc2UNCiAgJyAgICBNYXhfU2h1bnRWb2x0YWdlX0JlZm9yZV9PdmVyZmxvdyA9IE1heF9TaHVudFZvbHRhZ2UNCiAgJyBFbmQgSWYNCiAgJw0KICAnIE1heF9TaHVudFZvbHRhZ2VfQmVmb3JlX092ZXJmbG93ID0gVlNIVU5UX01BWA0KICAnIE1heF9TaHVudFZvbHRhZ2VfQmVmb3JlX092ZXJmbG93ID0gMC4wNFYNCiAgDQogICcgOC4gQ29tcHV0ZSB0aGUgTWF4aW11bSBQb3dlcg0KICAnIE1heGltdW1Qb3dlciA9IE1heF9DdXJyZW50X0JlZm9yZV9PdmVyZmxvdyAmIzQyOyBWQlVTX01BWA0KICAnIE1heGltdW1Qb3dlciA9IDAuNCAmIzQyOyAxNlYNCiAgJyBNYXhpbXVtUG93ZXIgPSA2LjRXDQogIA0KICAnIFNldCBtdWx0aXBsaWVycyB0byBjb252ZXJ0IHJhdyBjdXJyZW50L3Bvd2VyIHZhbHVlcw0KICBJTkEyMTlfY3VycmVudERpdmlkZXJfbUEgPSAyMCAgJ0N1cnJlbnQgTFNCID0gNTB1QSBwZXIgYml0ICgxMDAwLzUwID0gMjApDQogIElOQTIxOV9wb3dlckRpdmlkZXJfbVcgPSAxICAgICdQb3dlciBMU0IgPSAxbVcgcGVyIGJpdA0KDQogICcgU2V0IENhbGlicmF0aW9uIHJlZ2lzdGVyIHRvICdDYWwnIGNhbGN1bGF0ZWQgYWJvdmUgDQogIFdyaXRlUmVnaXN0ZXIoSU5BMjE5X1JFR0lTVEVSX0NBTElCUkFUSU9OLCBJTkEyMTlfY2FsVmFsdWUpDQogIA0KICAnIFNldCBDb25maWcgcmVnaXN0ZXIgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlIHNldHRpbmdzIGFib3ZlDQogIENvbmZpZyA9IElOQTIxOV9DT05GSUdfQlZPTFRBR0VSQU5HRV8xNlYgb3IgSU5BMjE5X0NPTkZJR19HQUlOXzFfNDBNViBvciBJTkEyMTlfQ09ORklHX0JBRENSRVNfMTJCSVRfMlMNCiAgQ29uZmlnID0gQ29uZmlnIG9yIElOQTIxOV9DT05GSUdfU0FEQ1JFU18xMkJJVF8yUyBvciBJTkEyMTlfQ09ORklHX01PREVfU05CVk9MVF9DT05UDQogIFdyaXRlUmVnaXN0ZXIoSU5BMjE5X1JFR0lTVEVSX0NPTkZJRywgQ29uZmlnKQ0KZW5kIHN1Yg0KPC9wcmU+ZGSctoEge3pHfXX41hOWfvR5+pokXw==" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">INA219 Current Sensor</h1><small>Modified on 2020/01/03 16:36 by CaptainBoing &mdash; Categorized as: Communications, Electronics, Environment, Hardware, i2c</small><br /><br />This is a port of the INA219 Arduino library originally created by K. Townsend (Adafruit Industries)<br />It has been tested on MMBasic v5.04.04. It also includes corrections to the PowerDivider_mW calculation in the calibration routines as well as converts the negative readings (in 2's complement) to positive.<br />The datasheet for the INA219 can be found <a class="externallink" href="http://www.ti.com/lit/ds/symlink/ina219.pdf" title="here." target="_blank">here.</a><br />The INA219 is a very handy little voltage/current/power sensor that communicates via the I2C databus.<br /><br />I hope you all find it as handy as I have!<br /><br />GTG!<br /><br /><pre>
'INA219 routine

'Code for a Micromite to communicate with a INA219 current sensing module over I2C.

'Original Author&#58;- K. Townsend (Adafruit Industries)

'Ported to MMBasic by GoodToGo!, TBS forums

'&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;
'Software License Agreement (BSD License)

'Copyright (c) 2012, Adafruit Industries
'All rights reserved.

'Redistribution and use in source and binary forms, with or without
'modification, are permitted provided that the following conditions are met&#58;
'1. Redistributions of source code must retain the above copyright
'notice, this list of conditions and the following disclaimer.
'2. Redistributions in binary form must reproduce the above copyright
'notice, this list of conditions and the following disclaimer in the
'documentation and/or other materials provided with the distribution.
'3. Neither the name of the copyright holders nor the
'names of its contributors may be used to endorse or promote products
'derived from this software without specific prior written permission.
'
'THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS &#39;&#39;AS IS&#39;&#39; AND ANY
'EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
'WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
'DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE LIABLE FOR ANY
'DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
'(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
'LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
'ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
'(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
'SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
'&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;

option explicit
option default integer

'Select one of the following four possible INA219 I2C Addresses

const INA219_ADDRESS = &amp;h40    	'&amp;b1000000 = (A0,A1=GND)
'const INA219_ADDRESS = &amp;h41  	'&amp;b1000001 = (A0=+V,A1=GND)
'const INA219_ADDRESS = &amp;h44	'&amp;b1000100 = (A0=GND,A1=+V)
'const INA219_ADDRESS = &amp;h45	'&amp;b1000101 = (A0,A1=+V)

'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
'       Setup Constants associated with INA219
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;

const INA219_READ =                         &amp;h01

const INA219_REGISTER_CONFIG =              &amp;h00    'Configuration Register (R/W)
const INA219_CONFIG_RESET =                 &amp;h8000  'Reset Bit

const INA219_CONFIG_BVOLTAGERANGE_MASK =    &amp;h2000  'Bus Voltage Range Mask
const INA219_CONFIG_BVOLTAGERANGE_16V =     &amp;h0000  '0-16V Range
const INA219_CONFIG_BVOLTAGERANGE_32V =     &amp;h2000  '0-32V Range

const INA219_CONFIG_GAIN_MASK =             &amp;h1800  'Gain Mask
const INA219_CONFIG_GAIN_1_40MV =           &amp;h0000  'Gain 1, 40mV Range
const INA219_CONFIG_GAIN_2_80MV =           &amp;h0800  'Gain 2, 80mV Range
const INA219_CONFIG_GAIN_4_160MV =          &amp;h1000  'Gain 4, 160mV Range
const INA219_CONFIG_GAIN_8_320MV =          &amp;h1800  'Gain 8, 320mV Range

const INA219_CONFIG_BADCRES_MASK =          &amp;h0780  'Bus Voltage ADC Resolution and Averaging Mask
const INA219_CONFIG_BADCRES_9BIT_1S =       &amp;h0080  '1 x 9-bit bus voltage sample
const INA219_CONFIG_BADCRES_10BIT_1S =      &amp;h0100  '1 x 10-bit bus voltage sample
const INA219_CONFIG_BADCRES_11BIT_1S =      &amp;h0200  '1 x 11-bit bus voltage sample
const INA219_CONFIG_BADCRES_12BIT_1S =      &amp;h0400  '1 x 12-bit bus voltage sample
const INA219_CONFIG_BADCRES_12BIT_2S =      &amp;h0480  '2 x 12-bit bus voltage samples averaged together
const INA219_CONFIG_BADCRES_12BIT_4S =      &amp;h0500  '4 x 12-bit bus voltage samples averaged together
const INA219_CONFIG_BADCRES_12BIT_8S =      &amp;h0580  '8 x 12-bit bus voltage samples averaged together
const INA219_CONFIG_BADCRES_12BIT_16S =     &amp;h0600  '16 x 12-bit bus voltage samples averaged together
const INA219_CONFIG_BADCRES_12BIT_32S =     &amp;h0680  '32 x 12-bit bus voltage samples averaged together
const INA219_CONFIG_BADCRES_12BIT_64S =     &amp;h0700  '64 x 12-bit bus voltage samples averaged together
const INA219_CONFIG_BADCRES_12BIT_128S =    &amp;h0780  '128 x 12-bit bus voltage samples averaged together

const INA219_CONFIG_SADCRES_MASK =          &amp;h0078  'Shunt Voltage ADC Resolution and Averaging Mask
const INA219_CONFIG_SADCRES_9BIT_1S =       &amp;h0000  '1 x 9-bit shunt voltage sample
const INA219_CONFIG_SADCRES_10BIT_1S =      &amp;h0008  '1 x 10-bit shunt voltage sample
const INA219_CONFIG_SADCRES_11BIT_1S =      &amp;h0010  '1 x 11-bit shunt voltage sample
const INA219_CONFIG_SADCRES_12BIT_1S =      &amp;h0018  '1 x 12-bit shunt voltage sample
const INA219_CONFIG_SADCRES_12BIT_2S =      &amp;h0048  '2 x 12-bit shunt voltage samples averaged together
const INA219_CONFIG_SADCRES_12BIT_4S =      &amp;h0050  '4 x 12-bit shunt voltage samples averaged together
const INA219_CONFIG_SADCRES_12BIT_8S =      &amp;h0058  '8 x 12-bit shunt voltage samples averaged together
const INA219_CONFIG_SADCRES_12BIT_16S =     &amp;h0060  '16 x 12-bit shunt voltage samples averaged together
const INA219_CONFIG_SADCRES_12BIT_32S =     &amp;h0068  '32 x 12-bit shunt voltage samples averaged together
const INA219_CONFIG_SADCRES_12BIT_64S =     &amp;h0070  '64 x 12-bit shunt voltage samples averaged together
const INA219_CONFIG_SADCRES_12BIT_128S =    &amp;h0078  '128 x 12-bit shunt voltage samples averaged together

const INA219_CONFIG_MODE_MASK =             &amp;h0007  'Operating Mode Mask
const INA219_CONFIG_MODE_POWERDOWN =        &amp;h0000
const INA219_CONFIG_MODE_SVOLT_TRIG =       &amp;h0001
const INA219_CONFIG_MODE_BVOLT_TRIG =       &amp;h0002
const INA219_CONFIG_MODE_SNBVOLT_TRIG =     &amp;h0003
const INA219_CONFIG_MODE_ADCOFF =           &amp;h0004
const INA219_CONFIG_MODE_SVOLT_CONT =       &amp;h0005
const INA219_CONFIG_MODE_BVOLT_CONT =       &amp;h0006
const INA219_CONFIG_MODE_SNBVOLT_CONT =     &amp;h0007

const INA219_REGISTER_SHUNTVOLTAGE =        &amp;h01 'Shunt Voltage Register (R)
const INA219_REGISTER_BUSVOLTAGE =          &amp;h02 'Bus Voltage Register (R)
const INA219_REGISTER_POWER =               &amp;h03 'Power Register (R)
const INA219_REGISTER_CURRENT =             &amp;h04 'Current Register (R)
const INA219_REGISTER_CALIBRATION =         &amp;h05 'Calibration register (R/W)

dim INA219_currentDivider_mA as float
dim INA219_powerDivider_mW as float
dim INA219_calValue

i2c open 100, 100

'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
'  Select one of the below to set up the Hardware calibration
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;

setCalibration_32V_2A
'setCalibration_32V_1A
'setCalibration_16V_400mA

'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
'                   Main Program
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;

dim shuntvoltage as float
dim busvoltage as float
dim current as float
dim supplyvoltage as float
dim power as float

do
  shuntvoltage = ShuntVoltage_mV()
  busvoltage = BusVoltage_V()
  current = Current_mA()
  supplyvoltage = SupplyVoltage_V()
  power = Power_mW()
  
  print"Bus Voltage&#58;    "+str$(busvoltage)+"V"
  print"Shunt Voltage&#58;  "+str$(shuntvoltage)+"mV"
  print"Supply Voltage&#58; "+str$(supplyvoltage)+"V"
  print"Current&#58;        "+str$(current)+"mA"
  print"Power&#58;          "+str$(power)+"mW"
  print"Calc. Power&#58;    "+str$(busvoltage&#42;current)+"mW"
  print""
  pause 2000
loop

'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
'                 Calculation Functions
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;

function BusVoltage_V() as float  'Gets the bus voltage in volts
  Local Value
  ReadRegister (INA219_REGISTER_BUSVOLTAGE, Value)
  Value =((Value &gt;&gt; 3) &#42; 4) 'Shift to right 3 to drop ConversionReady and OverFlow bits, multiply by LSB
  BusVoltage_V = Value / 1000
End Function

function ShuntVoltage_mV() as float 'Gets the shunt voltage in mV
  local Value
  ReadRegister (INA219_REGISTER_SHUNTVOLTAGE, Value)
  If ((Value &gt;&gt; 15) and 1) = 1 then 'Check for negative reading (2’s complement)
     Value = -((Value xor &amp;hffff) + 1)  'Convert negative reading to a negative integer
  endif	
  ShuntVoltage_mV = (Value / 100)
end function

function SupplyVoltage_V() as float 'The Supply voltage is a combination of the Bus voltage and the Shunt voltage
  SupplyVoltage_V = BusVoltage_V() + (ShuntVoltage_mV()/1000)
end function  

function Current_mA() 'Gets the current value in mA
  local Value
  ReadRegister(INA219_REGISTER_CURRENT, Value)
  If ((Value &gt;&gt; 15) and 1) = 1 then 'Check for negative reading (2’s complement)
     Value = -((Value xor &amp;hffff) + 1)  'Convert negative reading to a negative integer	
  endif	
  Current_mA = Value / INA219_currentDivider_mA
end function
  
function Power_mW() 'Gets the power value in mW
  local Value
  ReadRegister (INA219_REGISTER_POWER, Value)
  Power_mW = Value / INA219_powerDivider_mW
end function

'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
'             I2C read and write routines
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;

sub ReadRegister (Register, Value)  'Reads a 16 bit value over I2C
  local GetData(1)
  i2c write INA219_ADDRESS, 0, 1, Register
  i2c read INA219_ADDRESS, 0, 2, GetData()
  Value = ((GetData(0) &lt;&lt;8) or GetData(1))
end sub

sub WriteRegister (Register, Value) 'Writes a 16 bit value (2 x 8 bit) in a register over I2C
  local MSB,LSB
  MSB = Value &gt;&gt; 8
  LSB = Value and &amp;hff
  i2c write INA219_ADDRESS, 0, 3, Register, MSB, LSB
end sub

'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
'               Various calibration routines
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;

sub setCalibration_32V_2A

  local Config as integer
  
'Configures to INA219 to be able to measure up to 32V and 2A of current.
'Each unit of current corresponds to 100uA, and each unit of power corresponds to 2mW.
'Counter overflow occurs at 3.2A.
'Note&#58; These calculations assume a 0.1 ohm resistor is present
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-

  ' By default we use a pretty huge range for the input voltage,
  ' which probably isn't the most appropriate choice for system
  ' that don't use a lot of power.  But all of the calculations
  ' are shown below if you want to change the settings.  You will
  ' also need to change any relevant register settings, such as
  ' setting the VBUS_MAX to 16V instead of 32V, etc.

  ' VBUS_MAX = 32V             (Assumes 32V, can also be set to 16V)
  ' VSHUNT_MAX = 0.32          (Assumes Gain 8, 320mV, can also be 0.16, 0.08, 0.04)
  ' RSHUNT = 0.1               (Resistor value in ohms)
  
  ' 1. Determine max possible current
  ' MaxPossible_I = VSHUNT_MAX / RSHUNT
  ' MaxPossible_I = 3.2A
  
  ' 2. Determine max expected current
  ' MaxExpected_I = 2.0A
  
  ' 3. Calculate possible range of LSBs (Min = 15-bit, Max = 12-bit)
  ' MinimumLSB = MaxExpected_I/32767
  ' MinimumLSB = 0.000061              (61uA per bit)
  ' MaximumLSB = MaxExpected_I/4096
  ' MaximumLSB = 0.000488              (488uA per bit)
  
  ' 4. Choose an LSB between the min and max values
  '    (Preferrably a roundish number close to MinLSB)
  ' CurrentLSB = 0.0001 (100uA per bit)
  
  ' 5. Compute the calibration register
  ' Cal = trunc (0.04096 / (Current_LSB &#42; RSHUNT))
  ' Cal = 4096 (0x1000)
  
  INA219_calValue = 4096
  
  ' 6. Calculate the power LSB
  ' PowerLSB = 20 &#42; CurrentLSB
  ' PowerLSB = 0.002 (2mW per bit)
  
  ' 7. Compute the maximum current and shunt voltage values before overflow
  '
  ' Max_Current = Current_LSB &#42; 32767
  ' Max_Current = 3.2767A before overflow
  '
  ' If Max_Current &gt; Max_Possible_I then
  '    Max_Current_Before_Overflow = MaxPossible_I
  ' Else
  '    Max_Current_Before_Overflow = Max_Current
  ' End If
  '
  ' Max_ShuntVoltage = Max_Current_Before_Overflow &#42; RSHUNT
  ' Max_ShuntVoltage = 0.32V
  '
  ' If Max_ShuntVoltage &gt;= VSHUNT_MAX
  '    Max_ShuntVoltage_Before_Overflow = VSHUNT_MAX
  ' Else
  '    Max_ShuntVoltage_Before_Overflow = Max_ShuntVoltage
  ' End If
  
  ' 8. Compute the Maximum Power
  ' MaximumPower = Max_Current_Before_Overflow &#42; VBUS_MAX
  ' MaximumPower = 3.2 &#42; 32V
  ' MaximumPower = 102.4W
  
  ' Set multipliers to convert raw current/power values
  INA219_currentDivider_mA = 10  'Current LSB = 100uA per bit (1000/100 = 10)
  INA219_powerDivider_mW = 0.5     'Power LSB = 2mW per bit (1/2)

  ' Set Calibration register to 'Cal' calculated above	
  WriteRegister(INA219_REGISTER_CALIBRATION, INA219_calValue) 
  
  ' Set Config register to take into account the settings above
  Config = INA219_CONFIG_BVOLTAGERANGE_32V or INA219_CONFIG_GAIN_8_320MV or INA219_CONFIG_BADCRES_12BIT_2S
  Config = Config or INA219_CONFIG_SADCRES_12BIT_2S or INA219_CONFIG_MODE_SNBVOLT_CONT
  WriteRegister(INA219_REGISTER_CONFIG, Config)
end sub

sub setCalibration_32V_1A

  local Config as Integer
  
'Configures to INA219 to be able to measure up to 32V and 1A of current.
'Each unit of current corresponds to 40uA, and each unit of power corresponds to 800uW.
'Counter overflow occurs at 1.3A.
'Note&#58; These calculations assume a 0.1 ohm resistor is present
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-
  
  ' VBUS_MAX = 32V		(Assumes 32V, can also be set to 16V)
  ' VSHUNT_MAX = 0.32	(Assumes Gain 8, 320mV, can also be 0.16, 0.08, 0.04)
  ' RSHUNT = 0.1			(Resistor value in ohms)

  ' 1. Determine max possible current
  ' MaxPossible_I = VSHUNT_MAX / RSHUNT
  ' MaxPossible_I = 3.2A

  ' 2. Determine max expected current
  ' MaxExpected_I = 1.0A

  ' 3. Calculate possible range of LSBs (Min = 15-bit, Max = 12-bit)
  ' MinimumLSB = MaxExpected_I/32767
  ' MinimumLSB = 0.0000305             (30.5uA per bit)
  ' MaximumLSB = MaxExpected_I/4096
  ' MaximumLSB = 0.000244              (244uA per bit)

  ' 4. Choose an LSB between the min and max values
  '    (Preferrably a roundish number close to MinLSB)
  ' CurrentLSB = 0.0000400 (40uA per bit)

  ' 5. Compute the calibration register
  ' Cal = trunc (0.04096 / (Current_LSB &#42; RSHUNT))
  ' Cal = 10240 (0x2800)

  INA219_calValue = 10240
  
  ' 6. Calculate the power LSB
  ' PowerLSB = 20 &#42; CurrentLSB
  ' PowerLSB = 0.0008 (800uW per bit)

  ' 7. Compute the maximum current and shunt voltage values before overflow
  '
  ' Max_Current = Current_LSB &#42; 32767
  ' Max_Current = 1.31068A before overflow
  '
  ' If Max_Current &gt; Max_Possible_I then
  '    Max_Current_Before_Overflow = MaxPossible_I
  ' Else
  '    Max_Current_Before_Overflow = Max_Current
  ' End If
  '
  ' ... In this case, we're good though since Max_Current is less than MaxPossible_I
  '
  ' Max_ShuntVoltage = Max_Current_Before_Overflow &#42; RSHUNT
  ' Max_ShuntVoltage = 0.131068V
  '
  ' If Max_ShuntVoltage &gt;= VSHUNT_MAX
  '    Max_ShuntVoltage_Before_Overflow = VSHUNT_MAX
  ' Else
  '    Max_ShuntVoltage_Before_Overflow = Max_ShuntVoltage
  ' End If

  ' 8. Compute the Maximum Power
  ' MaximumPower = Max_Current_Before_Overflow &#42; VBUS_MAX
  ' MaximumPower = 1.31068 &#42; 32V
  ' MaximumPower = 41.94176W

  ' Set multipliers to convert raw current/power values
  INA219_currentDivider_mA = 25  'Current LSB = 40uA per bit (1000/40 = 25)
  INA219_powerDivider_mW = 1.25  'Power LSB = 800uW per bit (1/0.8)

  ' Set Calibration register to 'Cal' calculated above	
  WriteRegister(INA219_REGISTER_CALIBRATION, INA219_calValue) 

  ' Set Config register to take into account the settings above
  Config = INA219_CONFIG_BVOLTAGERANGE_32V or INA219_CONFIG_GAIN_8_320MV or INA219_CONFIG_BADCRES_12BIT_2S
  Config = Config or INA219_CONFIG_SADCRES_12BIT_2S or INA219_CONFIG_MODE_SNBVOLT_CONT
  WriteRegister(INA219_REGISTER_CONFIG, Config)
end sub

sub setCalibration_16V_400mA

  local Config as integer
  
'Calibration which uses the highest precision for current measurement (0.1mA)
'at the expense of only supporting 16V at 400mA max.
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-
  
  ' VBUS_MAX = 16V
  ' VSHUNT_MAX = 0.04          (Assumes Gain 1, 40mV)
  ' RSHUNT = 0.1               (Resistor value in ohms)
  
  ' 1. Determine max possible current
  ' MaxPossible_I = VSHUNT_MAX / RSHUNT
  ' MaxPossible_I = 0.4A

  ' 2. Determine max expected current
  ' MaxExpected_I = 0.4A
  
  ' 3. Calculate possible range of LSBs (Min = 15-bit, Max = 12-bit)
  ' MinimumLSB = MaxExpected_I/32767
  ' MinimumLSB = 0.0000122              (12uA per bit)
  ' MaximumLSB = MaxExpected_I/4096
  ' MaximumLSB = 0.0000977              (98uA per bit)
  
  ' 4. Choose an LSB between the min and max values
  '    (Preferrably a roundish number close to MinLSB)
  ' CurrentLSB = 0.00005 (50uA per bit)
  
  ' 5. Compute the calibration register
  ' Cal = trunc (0.04096 / (Current_LSB &#42; RSHUNT))
  ' Cal = 8192 (0x2000)

  INA219_calValue = 8192

  ' 6. Calculate the power LSB
  ' PowerLSB = 20 &#42; CurrentLSB
  ' PowerLSB = 0.001 (1mW per bit)
  
  ' 7. Compute the maximum current and shunt voltage values before overflow
  '
  ' Max_Current = Current_LSB &#42; 32767
  ' Max_Current = 1.63835A before overflow
  '
  ' If Max_Current &gt; Max_Possible_I then
  '    Max_Current_Before_Overflow = MaxPossible_I
  ' Else
  '    Max_Current_Before_Overflow = Max_Current
  ' End If
  '
  ' Max_Current_Before_Overflow = MaxPossible_I
  ' Max_Current_Before_Overflow = 0.4
  '
  ' Max_ShuntVoltage = Max_Current_Before_Overflow &#42; RSHUNT
  ' Max_ShuntVoltage = 0.04V
  '
  ' If Max_ShuntVoltage &gt;= VSHUNT_MAX
  '    Max_ShuntVoltage_Before_Overflow = VSHUNT_MAX
  ' Else
  '    Max_ShuntVoltage_Before_Overflow = Max_ShuntVoltage
  ' End If
  '
  ' Max_ShuntVoltage_Before_Overflow = VSHUNT_MAX
  ' Max_ShuntVoltage_Before_Overflow = 0.04V
  
  ' 8. Compute the Maximum Power
  ' MaximumPower = Max_Current_Before_Overflow &#42; VBUS_MAX
  ' MaximumPower = 0.4 &#42; 16V
  ' MaximumPower = 6.4W
  
  ' Set multipliers to convert raw current/power values
  INA219_currentDivider_mA = 20  'Current LSB = 50uA per bit (1000/50 = 20)
  INA219_powerDivider_mW = 1    'Power LSB = 1mW per bit

  ' Set Calibration register to 'Cal' calculated above 
  WriteRegister(INA219_REGISTER_CALIBRATION, INA219_calValue)
  
  ' Set Config register to take into account the settings above
  Config = INA219_CONFIG_BVOLTAGERANGE_16V or INA219_CONFIG_GAIN_1_40MV or INA219_CONFIG_BADCRES_12BIT_2S
  Config = Config or INA219_CONFIG_SADCRES_12BIT_2S or INA219_CONFIG_MODE_SNBVOLT_CONT
  WriteRegister(INA219_REGISTER_CONFIG, Config)
end sub
</pre>
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.INA219-Current-Sensor by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:17:02 GMT -->
</html>
