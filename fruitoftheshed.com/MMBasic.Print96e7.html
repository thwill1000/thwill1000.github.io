

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.LPrint-for-attached-serial-printer-legacy-BASIC-statement by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:19:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	LPrint for attached serial printer - legacy BASIC statement - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.LPrint-for-attached-serial-printer-legacy-BASIC-statement" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQF+Rw8aDEgY2xhc3M9InBhZ2V0aXRsZSI+TFByaW50IGZvciBhdHRhY2hlZCBzZXJpYWwgcHJpbnRlciAtIGxlZ2FjeSBCQVNJQyBzdGF0ZW1lbnQ8L2gxPjxzbWFsbD5Nb2RpZmllZCBvbiAyMDE3LzEyLzIyIDExOjI2IGJ5IENhcHRhaW5Cb2luZyAmbWRhc2g7IENhdGVnb3JpemVkIGFzOiBDb250cm9sLCBIYXJkd2FyZSwgUHJpbnRlcnMgYW5kIFByaW50aW5nLCBQcm9ncmFtIEZsb3csIFN0cmluZ3M8L3NtYWxsPjxiciAvPjxiciAvPkkgaGF2ZSBhIGNvdXBsZSBvZiBzeXN0ZW1zIHRoYXQgbG9nIHRvIHNtYWxsIGVtYmVkZGVkIDxhIGNsYXNzPSJwYWdlbGluayIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9IlBsYXRmb3JtJTIwQWdub3N0aWMuU2ltcGxlLWFuZC1DaGVhcC13YXktdG8tYWRkLWEtUHJpbnRlci10by15b3VyLXByb2plY3QuYXNoeCIgdGl0bGU9IlNpbXBsZSBhbmQgQ2hlYXAgd2F5IHRvIGFkZCBhIFByaW50ZXIgdG8geW91ciBwcm9qZWN0Ij5QcmludGVyPC9hPnMuIEl0J3Mgbm90IGFsd2F5cyBjb252ZW5pZW50IG9yIG5lY2Vzc2FyeSB0byBnbyB0byB0aGUgbGVuZ3RocyBvZiBidWlsZGluZyBhIGNlbnRyb25pY3MgcG9ydCBhbmQgZ2V0dGluZyBob2xkIG9mIGEgdHJ1c3R5IEVwc29uIEZYODAuIFRoaXMgc29sdXRpb24gY291cGxlZCB3aXRoIHRoZSBwcmludGVyIGluIHRoZSBhYm92ZSBhcnRpY2xlIHdpbGwgaGF2ZSB5b3UgdXAgYW5kIHJ1bm5pbmcgaW4gbWludXRlcyE8YnIgLz48YnIgLz5Zb3UgY291bGQgdXNlIG9uZSBvZiB0aGUgZXhpc3RpbmcgYnVpbHQgaW4gQ09NIHBvcnRzIGJ1dCBhcyB5b3Ugb2Z0ZW4gbmVlZCB0aGVzZSBmb3Igb3RoZXIgc3R1ZmYgKHRoZSBwcmludGVyIG9ubHkgbmVlZHMgVHggZnJvbSB0aGUgTU0gYW55d2F5KSBpdCdzIGEgYml0IG9mIGEgd2FzdGUgYW5kIGV2ZW4gaWYgeW91IGhhdmUgb25lIHNwYXJlLCBpdCBraW5kLW9mIHN0aWNrcyBpbiBteSB0aHJvYXQgdG8gd2FzdGUgaXQgZm9yIGEgc2luZ2xlIHBpbi48YnIgLz48YnIgLz5JbiB0aGUgc29mdHdhcmUgZGlzdHJpYnV0aW9uIG9mIE1NQmFzaWMgKE5vdCBNTVhCYXNpYyksIHRoZXJlIGlzIGEgZm9sZGVyIGNhbGxlZCAiRW1iZWRkZWQgQyBNb2R1bGVzIiBhbmQgaW4gaGVyZSBpcyBhIFBERiBjYWxsZWQgIlNlcmlhbFR4LnBkZiIgd2hpY2ggY29udGFpbnMgdGhlIGNvZGUgZm9yIGEgc29mdHdhcmUgc2VyaWFsIHRyYW5zbWl0IHJvdXRpbmUgdGhhdCBjYW4gdXNlIGFueSBwaW4gb24gdGhlIG1pY3JvbWl0ZSBhbmQgc3VwcG9ydHMgbW9zdCBvZiB0aGUgY29tbW9uIGJhdWQgcmF0ZXMgLSBkZXBlbmRpbmcgb24gdGhlIGNsb2NrIHNwZWVkIG9mIHlvdXIgQ1BVLjxiciAvPjxiciAvPlRoaXMgcHJvdmlkZXMgYSBTdWIgdGhhdCBjYWxsZWQgIlNlcmlhbFR4IiB0byBwcm92aWRlIGEgVHggb3V0cHV0IHRvIHRoZSBwcmludGVyIG9uIGFueSBmcmVlIHBpbi4gVGhpcyBoYXMgYSBjb3VwbGUgb2YgYWR2YW50YWdlczo8YnIgLz48YnIgLz48dWw+PGxpPkl0IGZyZWVzIHVwIGEgYnVpbHQtaW4gc2VyaWFsIENPTSBwb3J0LjwvbGk+PGxpPk5vIG5lZWQgdG8gb3BlbiB0aGUgcG9ydCBiZWZvcmUgdXNpbmcgaXQuPGJyIC8+PC9saT48L3VsPjxiciAvPlRoaXMgTHByaW50IFN1YiBpcyBhIHZlcnkgc2ltcGxlIHdyYXAgd2hpY2ggcHJvdmlkZXMgYSBuaWNlIHRocm93LWJhY2sgYW5kIG1ha2VzIGZvbGxvd2luZyB0aGUgcHJvZ3JhbSBjb2RlIGVhc2llci4gQSBjb3VwbGUgb2YgZGlzYWR2YW50YWdlcyBvdmVyIHRoZSBvcmlnaW5hbCBMUHJpbnQ7IGl0IG9ubHkgYWNjZXB0cyBhIHN0cmluZyBhcyB0aGUgYXJndW1lbnQgKHNvIGFueSBudW1iZXJzIHNob3VsZCBiZSBjb252ZXJ0ZWQgdXNpbmcgPGNvZGU+U3RyJCgpPC9jb2RlPiBhbmQgaXQgZG9lc24ndCBzdXBwb3J0IDxjb2RlPjs8L2NvZGU+IG9yIDxjb2RlPiw8L2NvZGU+IGZvciBzcGFjaW5nLCBjb25jYXRlbmF0aW9uLCBuZXdsaW5lIHN1cHByZXNzaW9uIGV0Yy4gVGhlIHN0cmluZyBpcyBzZW50IGFzIGlzIHdpdGggYSBuZXdsaW5lIGFmdGVyLCBzbyBtYWtlIHN1cmUgeW91ciBzdHJpbmcgY29udGFpbnMgZXZlcnl0aGluZyB5b3UgbmVlZC48YnIgLz48YnIgLz48Yj5TeW50YXg8L2I+OjxiciAvPjxjb2RlPkxQcmludCBNeVN0cjwvY29kZT48YnIgLz48YnIgLz48Yj5FeGFtcGxlIFVzZTwvYj46PGJyIC8+PGNvZGU+TFByaW50ICJUaGUgdGltZSBpcyAiK1RpbWUkPGJyIC8+TFByaW50ICIyKjI9IitTdHIkKDQpPC9jb2RlPjxiciAvPjxiciAvPjxiPkNvZGU8L2I+OjxiciAvPjxwcmU+DQoNCg0KCUNvbnN0IExQaW49MyAgICAgJyBjaGFuZ2UgdGhpcyB0byB3aGF0ZXZlciBwaW4geW91IGFyZSB1c2luZyBmb3IgdGhlIHByaW50ZXINCglDb25zdCBMQmF1ZD05NjAwICcgY2hhbmdlIHRoaXMgdG8gd2hhdGV2ZXIgc3BlZWQgeW91ciBwcmludGVyIGlzIHdvcmtpbmcgYXQNCg0KCVN1YiBMUHJpbnQoeCQpDQoJCVNlcmlhbFR4KExQaW4sTEJhdWQseCQpDQoJCVNlcmlhbFR4KExQaW4sTEJhdWQsQ2hyJCgxMykrQ2hyJCgxMCkpIDsgc2VuZCBhIG5ld2xpbmUgY2hhcg0KCUVuZCBTdWINCg0KDQoNCg0KCUNTdWIgU2VyaWFsVHggICAgJyBmcm9tIHRoZSBFbWJlZGRlZCBDIE1vZHVsZXMgZm9sZGVyIG9mIHRoZSBzb2Z0d2FyZSBkaXN0cmlidXRpb24NCgkJMDAwMDAwMDgNCgkJMDAwMDEwMjEgNDA4MjQ4MDAgNDAwMjQ4MDAgMDA0NDEwMmIgMTQ0MGZmZmQgMDAwMDAwMDAgMDNlMDAwMDggMDAwMDAwMDANCgkJMjdiZGZmYzggYWZiNDAwMjAgM2MxNDlkMDAgOGU4MjAwMDAgYWZiMDAwMTAgOGM1MDAwMDAgOGNhMzAwMDAgMDAxMDgwNDINCgkJMDIwMzAwMWIgMDA2MDAxZjQgYWZiMTAwMTQgOGU4MjAwMTAgMDA4MDg4MjEgOGM4NDAwMDAgYWZiZjAwMzQgYWZiNjAwMjgNCgkJYWZiMzAwMWMgYWZiMjAwMTggMDBjMGIwMjEgMjQwNTAwMDggMDAwMDMwMjEgYWZiZTAwMzAgYWZiNzAwMmMgYWZiNTAwMjQNCgkJMDA0MGY4MDkgMDAwMDgwMTIgOGUyNDAwMDAgOGU4MjAwMTQgMDA0MGY4MDkgMjQwNTAwMDEgOGUyNDAwMDAgOGU4MjAwMjQNCgkJMDA0MGY4MDkgMjQwNTAwMDYgMDA0MDkwMjEgOGUyNDAwMDAgOGU4MjAwMjQgMDA0MGY4MDkgMjQwNTAwMDUgMDA0MDk4MjENCgkJOGUyNDAwMDAgOGU4MjAwMjggMDA0MGY4MDkgMjYxMGZmZmIgODJjMzAwMDAgMTg2MDAwMjcgMjQxMTAwMDEgMDA1MTg4MDQNCgkJMjQxNTAwMDEgYWU3MTAwMDAgMDIwMDIwMjEgMDQxMUZGQzQgMDAwMDAwMDAgMjQxZTAwMDggMjQxNzAwMDEgMTAwMDAwMDkNCgkJMDJkNWEwMjEgYWU1MTAwMDAgMDIwMDIwMjEgMDAxN2I4NDAgMjdkZWZmZmYgMDQxMUZGQkEgMDAwMDAwMDAgMTNjMDAwMGQNCgkJMzJmNzAwZmYgODI4MjAwMDAgMDJlMjEwMjQgMTQ0MGZmZjUgMDAwMDAwMDAgYWU3MTAwMDAgMDIwMDIwMjEgMDAxN2I4NDANCgkJMjdkZWZmZmYgMDQxMUZGQUUgMDAwMDAwMDAgMTdjMGZmZjUgMzJmNzAwZmYgYWU1MTAwMDAgMDIwMDIwMjEgMDQxMUZGQTgNCgkJMDAwMDAwMDAgODJjMjAwMDAgMDJhMjEwMmEgMTQ0MGZmZGQgMjZiNTAwMDEgOGZiZjAwMzQgMDAwMDEwMjEgMDAwMDE4MjENCgkJOGZiZTAwMzAgOGZiNzAwMmMgOGZiNjAwMjggOGZiNTAwMjQgOGZiNDAwMjAgOGZiMzAwMWMgOGZiMjAwMTggOGZiMTAwMTQNCgkJOGZiMDAwMTAgMDNlMDAwMDggMjdiZDAwMzgNCglFbmQgQ1N1Yg0KDQo8L3ByZT5kZAnGSalmtRjahhdOg6scsmNphh7z" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">LPrint for attached serial printer - legacy BASIC statement</h1><small>Modified on 2017/12/22 11:26 by CaptainBoing &mdash; Categorized as: Control, Hardware, Printers and Printing, Program Flow, Strings</small><br /><br />I have a couple of systems that log to small embedded <a class="pagelink" target="_blank" href="Platform%20Agnostic.Simple-and-Cheap-way-to-add-a-Printer-to-your-project.html" title="Simple and Cheap way to add a Printer to your project">Printer</a>s. It's not always convenient or necessary to go to the lengths of building a centronics port and getting hold of a trusty Epson FX80. This solution coupled with the printer in the above article will have you up and running in minutes!<br /><br />You could use one of the existing built in COM ports but as you often need these for other stuff (the printer only needs Tx from the MM anyway) it's a bit of a waste and even if you have one spare, it kind-of sticks in my throat to waste it for a single pin.<br /><br />In the software distribution of MMBasic (Not MMXBasic), there is a folder called "Embedded C Modules" and in here is a PDF called "SerialTx.pdf" which contains the code for a software serial transmit routine that can use any pin on the micromite and supports most of the common baud rates - depending on the clock speed of your CPU.<br /><br />This provides a Sub that called "SerialTx" to provide a Tx output to the printer on any free pin. This has a couple of advantages:<br /><br /><ul><li>It frees up a built-in serial COM port.</li><li>No need to open the port before using it.<br /></li></ul><br />This Lprint Sub is a very simple wrap which provides a nice throw-back and makes following the program code easier. A couple of disadvantages over the original LPrint; it only accepts a string as the argument (so any numbers should be converted using <code>Str$()</code> and it doesn't support <code>;</code> or <code>,</code> for spacing, concatenation, newline suppression etc. The string is sent as is with a newline after, so make sure your string contains everything you need.<br /><br /><b>Syntax</b>:<br /><code>LPrint MyStr</code><br /><br /><b>Example Use</b>:<br /><code>LPrint "The time is "+Time$<br />LPrint "2*2="+Str$(4)</code><br /><br /><b>Code</b>:<br /><pre>


	Const LPin=3     ' change this to whatever pin you are using for the printer
	Const LBaud=9600 ' change this to whatever speed your printer is working at

	Sub LPrint(x$)
		SerialTx(LPin,LBaud,x$)
		SerialTx(LPin,LBaud,Chr$(13)+Chr$(10)) ; send a newline char
	End Sub




	CSub SerialTx    ' from the Embedded C Modules folder of the software distribution
		00000008
		00001021 40824800 40024800 0044102b 1440fffd 00000000 03e00008 00000000
		27bdffc8 afb40020 3c149d00 8e820000 afb00010 8c500000 8ca30000 00108042
		0203001b 006001f4 afb10014 8e820010 00808821 8c840000 afbf0034 afb60028
		afb3001c afb20018 00c0b021 24050008 00003021 afbe0030 afb7002c afb50024
		0040f809 00008012 8e240000 8e820014 0040f809 24050001 8e240000 8e820024
		0040f809 24050006 00409021 8e240000 8e820024 0040f809 24050005 00409821
		8e240000 8e820028 0040f809 2610fffb 82c30000 18600027 24110001 00518804
		24150001 ae710000 02002021 0411FFC4 00000000 241e0008 24170001 10000009
		02d5a021 ae510000 02002021 0017b840 27deffff 0411FFBA 00000000 13c0000d
		32f700ff 82820000 02e21024 1440fff5 00000000 ae710000 02002021 0017b840
		27deffff 0411FFAE 00000000 17c0fff5 32f700ff ae510000 02002021 0411FFA8
		00000000 82c20000 02a2102a 1440ffdd 26b50001 8fbf0034 00001021 00001821
		8fbe0030 8fb7002c 8fb60028 8fb50024 8fb40020 8fb3001c 8fb20018 8fb10014
		8fb00010 03e00008 27bd0038
	End CSub

</pre>
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.LPrint-for-attached-serial-printer-legacy-BASIC-statement by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:19:29 GMT -->
</html>
