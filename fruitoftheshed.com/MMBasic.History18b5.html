

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from fruitoftheshed.com/MMBasic.History.aspx?Page=MMBasic.Sign-Extend-an-Integer&Revision=0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:53:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=8" /><title>
	Page History - Fruit Of The Shed
</title><script type="text/javascript" src="JS/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="JS/Scripts.js"></script>
<script type="text/javascript" src="JS/SearchHighlight.js"></script>
<link rel="stylesheet" media="print" href="Themes/Default/Print_Styles.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles%20-%20Copy.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles.css" type="text/css" />
<link rel="stylesheet" href="Themes/Editor.css" type="text/css" />
<link rel="search" href="searchf7b1.xml?OpenSearch=1" type="application/opensearchdescription+xml" title="Fruit Of The Shed - Search" /><script src="Themes/Default/Scripts.js" type="text/javascript"></script>
<link rel="shortcut icon" href="Themes/Default/Icon.ico" type="image/x-icon" />
</head>
<body>
    <form name="aspnetForm" method="post" action="http://fruitoftheshed.com/History.aspx?NS=MMBasic&amp;Page=MMBasic.Sign-Extend-an-Integer&amp;Revision=0" id="aspnetForm">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTEzMjI3OTE2NTkPZBYCZg9kFgICAQ9kFgICCQ9kFggCAQ8WAh4EVGV4dAUkUGFnZSBIaXN0b3J5OiBTaWduIEV4dGVuZCBhbiBJbnRlZ2VyZAIFDxBkEBUBATAVAQEwFCsDAWdkZAIHDxBkEBUCB0N1cnJlbnQBMBUCB0N1cnJlbnQBMBQrAwJnZ2RkAgsPFgIfAAWHETx0YWJsZSBjbGFzcz0iYm94IiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiPjx0cj48dGQ+PHAgc3R5bGU9InRleHQtYWxpZ246IGNlbnRlcjsiPjxiPiZsYXF1bzsgT2xkZXIgUmV2aXNpb24gLSA8YSBocmVmPSJNTUJhc2ljLkhpc3RvcnkuYXNweD9QYWdlPU1NQmFzaWMuU2lnbi1FeHRlbmQtYW4tSW50ZWdlciI+QmFjayB0byBQYWdlIEhpc3Rvcnk8L2E+IC0gPGEgaHJlZj0iTU1CYXNpYy5TaWduLUV4dGVuZC1hbi1JbnRlZ2VyLmFzaHgiPkN1cnJlbnQgUmV2aXNpb248L2E+PC9iPjwvcD48L3RkPjwvdHI+PC90YWJsZT48YnIgLz48aDMgY2xhc3M9InNlcGFyYXRvciI+UGFnZSBSZXZpc2lvbjogMjAxOC8wMS8zMSAyMjo0NTwvaDM+PGJyIC8+T2Z0ZW4gdGltZXMsIGEgbnVtYmVyIG1heSBub3QgYmUgdGhlIHNhbWUgd2lkdGggYXMgYW4gSW50ZWdlciB2YXJpYWJsZSwgZS5nLiBhIHJlZ2lzdGVyIG1pZ2h0IGJlIGluIHR3bydzLWNvbXBsaW1lbnQgZm9ybSBidXQgb25seSBieXRlLXdpZGUuIEFuIGV4YW1wbGUgaGVyZSBpcyB0aGUgdGVtcGVyYXR1cmUgcmVnaXN0ZXIgKCZIMTEpIG9mIHRoZSBwb3B1bGFyIERTMzIzMSBSVEMgY2hpcC4gPGJyIC8+PGJyIC8+SWYgdGhpcyBudW1iZXIgaXMgcGxhY2VkIGRpcmVjdGx5IGluIGFuIGludGVnZXIgdmFyaWFibGUgd2l0aG91dCBzaWduIGV4dGVuZGluZyAoaW4gdGhpcyBjYXNlLCB0aGUgc2V2ZW50aCBiaXQpIHRocm91Z2ggdG8gdGhlIGVuZCBvZiB0aGUgaW50ZWdlciAoYml0IDYzKSB0aGUgdGVtcGVyYXR1cmUgd2lsbCBiZSBpbmNvcnJlY3QgaWYgbmVnYXRpdmUgLSBpdCB3aWxsIHJlYWQgb3ZlciAxMjhDLiBTbyBpbiB0aGUgY2FzZSBvZiB0aGUgRFMzMjMxLCBpdCBpcyBuZWNlc3NhcnkgdG8gZXh0ZW5kIGJpdCA3IG9mIHRoZSByZWdpc3RlciB0aHJvdWdoIHRoZSByZW1haW5pbmcgNTYgYml0cyB0byBvYnRhaW4gYSB0cnVlIDY0LWJpdCBpbnRlZ2VyIHZhbHVlIG9mIHRoZSByZWFkaW5nIHRoYXQgd2lsbCBwbGF5IG5pY2VseSB3aXRoIHRoZSByZXN0IG9mIHlvdXIgY29kZS4uLiBPZiBjb3Vyc2UgdGhpcyBpc24ndCBuZWNlc3NhcnkgaWYgeW91IGFyZSBub3QgZXhwZWN0aW5nIHN1Yi16ZXJvIHRlbXBlcmF0dXJlcyBhbmQgd2FudCB0byB0YWtlIHRoZSBjaGFuY2UuPGJyIC8+PGJyIC8+VGhlIGZvbGxvd2luZyBmdW5jdGlvbiB3aWxsIHJldHVybiBhIHZhbHVlIHNpZ24tZXh0ZW5kZWQgZnJvbSBhbnkgZ2l2ZW4gYml0LiBUaGVyZSBpcyBubyBlcnJvciBjaGVja2luZyAtIGlmIHlvdSBmZWVkIGl0IHJ1YmJpc2ggb3IgdHJ5IHRvIGNyYXNoIGl0IHlvdSdsbCBwcm9iYWJseSBzdWNjZWVkLjxiciAvPjxiciAvPjxiPlN5bnRheDo8L2I+PGJyIC8+PVNFeHQoQml0LFZhbHVlKTxiciAvPjxiciAvPjxiPkV4YW1wbGVzOjwvYj48YnIgLz48Y29kZT5QcmludCBCaW4kKFNFeHQoNywmaDdmKSw2NCk8L2NvZGU+PGJyIC8+PHByZT48YnIgLz4wMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTExMTExPGJyIC8+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeICAgICAgICBiaXQgNzxiciAvPjwvcHJlPjxiciAvPjxjb2RlPlByaW50IEJpbiQoU0V4dCg3LCZoOGYpLDY0KTwvY29kZT48YnIgLz48cHJlPjxiciAvPjExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTAwMDExMTE8YnIgLz4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF4gICAgICAgIGJpdCA3PGJyIC8+PC9wcmU+PGJyIC8+PGNvZGU+PGJyIC8+UlRDIEdldFJlZyAxNyx4PGJyIC8+VGVtcD1TRXh0KDcseCk8YnIgLz48L2NvZGU+PGJyIC8+PGJyIC8+PGI+Q29kZTo8L2I+PGJyIC8+PHByZT4NCglGdW5jdGlvbiBTRXh0KGIgQXMgSW50ZWdlcix2IEFzIEludGVnZXIpIEFzIEludGVnZXInIHNpZ24gZXh0ZW5kIGJpdCBiIG9mIHZhbHVlIHYNCgkJSWYgdiBBbmQgMl5iIFRoZW4gJ2V4dGVuZCAxDQoJCQlTRXh0PXYgT3IgKC0xICZsdDsmbHQ7IChiKzEpKQ0KCQlFbHNlICdleHRlbmQgMA0KCQkJU0V4dD0gdiBBbmQgKCgyXihiKzEpKS0xKQ0KCQlFbmRJZg0KCUVuZCBGdW5jdGlvbg0KPC9wcmU+PGJyIC8+ZGTXo/03pyuV4xazu7i5BuV1up/MAQ==" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="2068001F" />
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBQLS8MePDQKiz/TSAwK3j57gBwLd5ta/BQL9yYWiCfkohoOzMF50hYnN1VW33Tjx9t2U" />
</div>
		<script type="text/javascript">
<!--
__BaseName = "ctl00_CphMaster_";
__ConfirmMessage = "Are you sure you want to proceed?";
// -->
</script>
		<script type="text/javascript">
		<!--
			function __GetServerElementById(id) {
				return document.getElementById(__BaseName + id);
			}
			function __RequestConfirm() {
				return confirm(__ConfirmMessage);
			}
		// -->
		</script>
    
        <div id="HeaderDiv">
            <div style="float: right;">Welcome <a href="MMBasic.Language.html" class="systemlink" title="Select your language">Guest</a>, you are in: <select class="namespacedropdown" onchange="javascript:var sel = this.value; document.location = (sel != '' ? (sel + '.') : '') + 'Default.aspx';"><option value="">&lt;root&gt;</option><option value="Circuit Ideas">Circuit Ideas</option><option value="Colour MaxiMite 2 (CMM2)">Colour MaxiMite 2 (CMM2)</option><option value="GCB">GCB</option><option value="MicroMite ArmMite and MMX Hardware">MicroMite ArmMite and MMX Hardware</option><option selected="selected" value="MMBasic">MMBasic</option><option value="PIC ASM">PIC ASM</option><option value="Platform Agnostic">Platform Agnostic</option></select> &bull; <a href="MMBasic.Logind6a3-2.html?Redirect=http%3a%2f%2ffruitoftheshed.com%2fHistory.aspx%3fNS%3dMMBasic%26Page%3dMMBasic.Sign-Extend-an-Integer%26Revision%3d0" class="systemlink" title="Login">Login</a></div><h1>Fruit Of The Shed</h1>
        </div>
                   
        <div id="ContainerDiv">
                 
            <div id="SidebarDiv">
                <div id="SidebarHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="SidebarContentDiv">
                    <div style="float: right;"> </div><h3 class="separator">Navigation (MMBasic)<a class="headeranchor" id="Navigation_NAMESPACE_0" href="#Navigation_NAMESPACE_0" title="Link to this Section">&#0182;</a></h3><ul><li><b><a class="pagelink" href="MMBasic.MainPage.html" title="_MMBasic Code Library">Main Page</a></b></li><li><a class="pagelink" href="MainPage.html" title="Home Page">Main Page (root)</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.EggDrop-part-of-the-original-MMBasic-libraryc674.html" title="Random Page">Random Page</a></li><li><a class="systemlink" href="MMBasic.AllPages.html" title="All Pages">All Pages</a><br /> </li><li><a class="systemlink" href="Logina75d.html" title="Create a new Page">Create a new Page</a><br /></li></ul><br /><ul><li><a class="systemlink" href="Logine894.html" title="Administration">Administration</a></li><li><a class="systemlink" href="MMBasic.Upload.html" title="File Management">File Management</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="My Account">My Account</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="Create Account">Create Account</a><br /></li></ul><br /><small><b>Search the wiki</b></small><br /><br /><script type="text/javascript"><!--
function _DoSearch_SBf63524b4df3e46d58daced6fab3b588b() { document.location = 'MMBasic.Search.aspx?AllNamespaces=1&FilesAndAttachments=1&Query=' + encodeURI(document.getElementById('SBf63524b4df3e46d58daced6fab3b588b').value); }
// -->
</script><input class="txtsearchbox" type="text" id="SBf63524b4df3e46d58daced6fab3b588b" onkeydown="javascript:var keycode; if(window.event) keycode = event.keyCode; else keycode = event.which; if(keycode == 10 || keycode == 13) { _DoSearch_SBf63524b4df3e46d58daced6fab3b588b(); return false; }" /> <big><a href="#" onclick="javascript:_DoSearch_SBf63524b4df3e46d58daced6fab3b588b(); return false;">&raquo;</a></big><br /><br /><br />
                </div>
                <div id="SidebarFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>
            <div id="MainDiv">
                <div id="MainHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="PageInternalHeaderDiv"></div>
                

    <h1 class="pagetitlesystem">Page History: Sign Extend an Integer</h1>
    <p>Compare Page Revisions</p> 
    <select name="ctl00$CphMaster$lstRev1" id="ctl00_CphMaster_lstRev1">
	<option value="0">0</option>

</select>
    <select name="ctl00$CphMaster$lstRev2" id="ctl00_CphMaster_lstRev2">
	<option value="Current">Current</option>
	<option value="0">0</option>

</select>
    <input type="submit" name="ctl00$CphMaster$btnCompare" value="Compare" id="ctl00_CphMaster_btnCompare" />
    <br /><br />
    
    <table class="box" cellpadding="0" cellspacing="0"><tr><td><p style="text-align: center;"><b>&laquo; Older Revision - <a href="MMBasic.History1e02.html?Page=MMBasic.Sign-Extend-an-Integer">Back to Page History</a> - <a href="MMBasic.Sign-Extend-an-Integer.html">Current Revision</a></b></p></td></tr></table><br /><h3 class="separator">Page Revision: 2018/01/31 22:45</h3><br />Often times, a number may not be the same width as an Integer variable, e.g. a register might be in two's-compliment form but only byte-wide. An example here is the temperature register (&H11) of the popular DS3231 RTC chip. <br /><br />If this number is placed directly in an integer variable without sign extending (in this case, the seventh bit) through to the end of the integer (bit 63) the temperature will be incorrect if negative - it will read over 128C. So in the case of the DS3231, it is necessary to extend bit 7 of the register through the remaining 56 bits to obtain a true 64-bit integer value of the reading that will play nicely with the rest of your code... Of course this isn't necessary if you are not expecting sub-zero temperatures and want to take the chance.<br /><br />The following function will return a value sign-extended from any given bit. There is no error checking - if you feed it rubbish or try to crash it you'll probably succeed.<br /><br /><b>Syntax:</b><br />=SExt(Bit,Value)<br /><br /><b>Examples:</b><br /><code>Print Bin$(SExt(7,&h7f),64)</code><br /><pre><br />0000000000000000000000000000000000000000000000000000000001111111<br />                                                        ^        bit 7<br /></pre><br /><code>Print Bin$(SExt(7,&h8f),64)</code><br /><pre><br />1111111111111111111111111111111111111111111111111111111110001111<br />                                                        ^        bit 7<br /></pre><br /><code><br />RTC GetReg 17,x<br />Temp=SExt(7,x)<br /></code><br /><br /><b>Code:</b><br /><pre>
	Function SExt(b As Integer,v As Integer) As Integer' sign extend bit b of value v
		If v And 2^b Then 'extend 1
			SExt=v Or (-1 &lt;&lt; (b+1))
		Else 'extend 0
			SExt= v And ((2^(b+1))-1)
		EndIf
	End Function
</pre><br />
    
    


                <div id="PageInternalFooterDiv"></div>
                <div id="MainFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>

        </div>
            
        <div id="FooterDiv">
             
        </div>

    </form>  
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.History.aspx?Page=MMBasic.Sign-Extend-an-Integer&Revision=0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:53:16 GMT -->
</html>
