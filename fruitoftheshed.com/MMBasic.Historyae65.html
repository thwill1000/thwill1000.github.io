

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from fruitoftheshed.com/MMBasic.History.aspx?Page=MMBasic.Xmodem-CRC&Revision=00001 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 13:18:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=8" /><title>
	Page History - Fruit Of The Shed
</title><script type="text/javascript" src="JS/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="JS/Scripts.js"></script>
<script type="text/javascript" src="JS/SearchHighlight.js"></script>
<link rel="stylesheet" media="print" href="Themes/Default/Print_Styles.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles%20-%20Copy.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles.css" type="text/css" />
<link rel="stylesheet" href="Themes/Editor.css" type="text/css" />
<link rel="search" href="searchf7b1.xml?OpenSearch=1" type="application/opensearchdescription+xml" title="Fruit Of The Shed - Search" /><script src="Themes/Default/Scripts.js" type="text/javascript"></script>
<link rel="shortcut icon" href="Themes/Default/Icon.ico" type="image/x-icon" />
</head>
<body>
    <form name="aspnetForm" method="post" action="http://fruitoftheshed.com/History.aspx?NS=MMBasic&amp;Page=MMBasic.Xmodem-CRC&amp;Revision=00001" id="aspnetForm">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTEzMjI3OTE2NTkPZBYCZg9kFgICAQ9kFgICCQ9kFggCAQ8WAh4EVGV4dAUYUGFnZSBIaXN0b3J5OiBYbW9kZW0gQ1JDZAIFDxBkEBUCATEBMBUCATEBMBQrAwJnZ2RkAgcPEGQQFQMHQ3VycmVudAExATAVAwdDdXJyZW50ATEBMBQrAwNnZ2dkZAILDxYCHwAF2hQ8dGFibGUgY2xhc3M9ImJveCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj48dHI+PHRkPjxwIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7Ij48Yj48YSBocmVmPSJNTUJhc2ljLkhpc3RvcnkuYXNweD9QYWdlPU1NQmFzaWMuWG1vZGVtLUNSQyZhbXA7UmV2aXNpb249MDAwMDAiPiZsYXF1bzsgT2xkZXIgUmV2aXNpb248L2E+IC0gPGEgaHJlZj0iTU1CYXNpYy5IaXN0b3J5LmFzcHg/UGFnZT1NTUJhc2ljLlhtb2RlbS1DUkMiPkJhY2sgdG8gUGFnZSBIaXN0b3J5PC9hPiAtIDxhIGhyZWY9Ik1NQmFzaWMuWG1vZGVtLUNSQy5hc2h4Ij5DdXJyZW50IFJldmlzaW9uPC9hPjwvYj48L3A+PC90ZD48L3RyPjwvdGFibGU+PGJyIC8+PGgzIGNsYXNzPSJzZXBhcmF0b3IiPlBhZ2UgUmV2aXNpb246IDIwMjAvMTEvMjkgMjE6MjI8L2gzPjxiciAvPjxiPjxiciAvPkludHJvZHVjdGlvbjo8L2I+PGJyIC8+VGhpcyBDUkMgKEN5Y2xpYyBSZWR1bmRhbmN5IENoZWNrKSBpcyBmb3IgdGhlIFhtb2RlbSB0cmFuc2ZlciBwcm90b2NvbC4gVGhlIDE2IGJpdCBDUkMgaXMgY2FsY3VsYXRlZCBieSBwcm9jZXNzaW5nIHRoZSBkYXRhIGluIGEgbWVzc2FnZSBiaXQgYnkgYml0LiBJdCBjYW5ub3QgY29ycmVjdCBhbnkgZGF0YSBjb3JydXB0aW9uIGJ1dCBjYW4gaW5kaWNhdGUgaWYgYSBtZXNzYWdlIGhhcyBiZWVuIGNvcnJ1cHRlZCBpbiBhbnkgd2F5LjxiciAvPjxiciAvPjxiPlBMRUFTRSBOT1RFOjwvYj48YnIgLz5BbHRob3VnaCB0aGlzIGlzIGFuIFhtb2RlbSBDUkMgaXQgaXMgaW4gbm8gd2F5IHJlc3RyaWN0ZWQgdG8gdGhlIFhtb2RlbSBwcm90b2NvbC4gTGlrZSB0aGUgTW9kYnVzIENSQyBhbnkgbWVzc2FnZSBzdHJ1Y3R1cmUgb2YgYW55IGxlbmd0aCBjb25zaXN0aW5nIG9mIGEgc3RyZWFtIG9mIDgtYml0IGRhdGEgYnl0ZXMgY2FuIHV0aWxpc2UgaXQgdG8gaW1wcm92ZSBzZWN1cml0eS4gRm9yIGV4YW1wbGU6PGJyIC8+TXNnJCA9IOKAnFRoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2figJ08YnIgLz48YnIgLz5UaGUgc3RydWN0dXJlIG9mIGFuIFhtb2RlbSBtZXNzYWdlIGlzOjxiciAvPjxwcmU+Qnl0ZSAxCQlTT0gNCkJ5dGUgMgkJUGFja2V0IG51bWJlciAoMC0yNTUpDQpCeXRlIDMJCUludmVyc2UgcGFja2V0IG51bWJlciAoMjU1IC0gcGFja2V0IG51bWJlcikNCkJ5dGUgNC0xMzEJMTI4IGJ5dGVzIG9mIGRhdGENCkJ5dGUgMTMyLTEzMwkxNiBiaXQgQ1JDPC9wcmU+PGJyIC8+VGhlIHJlY2VpdmVyIHJlc3BvbmRzIHdpdGggYW4gQUNLIG9yIE5BQ0sgZGVwZW5kaW5nIHdoZXRoZXIgdGhlIENSQyBpcyBnb29kIG9yIGJhZC4gQW5kIGRlcGVuZGluZyBvbiB0aGUgYW5zd2VyIHRoZSB0cmFuc21pdHRlciB3aWxsIHRyYW5zbWl0IHRoZSBuZXh0IGJsb2NrIG9mIGRhdGEgb3IgcmUtdHJhbnNtaXQgdGhlIGJhZCBibG9jay4gV2hlcmUgdGhlcmUgYXJlIG5vdCAxMjggYnl0ZXMgb2YgZGF0YSB0aGUgYmxvY2sgb2YgMTI4IGlzIGZpbGxlZCB3aXRoIGEgcGFja2luZyBjaGFyYWN0ZXIuIElmIHlvdSB3YW50IHRvIGZ1bGx5IGltcGxlbWVudCB0aGUgWG1vZGVtIHByb3RvY29sIHRoZXJlIGlzIHBsZW50eSBvZiBpbmZvbWF0aW9uIG9uIHRoZSB3ZWIuPGJyIC8+PGJyIC8+QWRkIHRoZSBDUkMgdG8gdGhlIG1lc3NhZ2UgKGVnOiBSeE1zZyQpIGJ5OjxiciAvPjxiciAvPjxwcmU+VHhNc2ckID0gVHhNc2ckICsgWENSQyQoVHhNc2cpPC9wcmU+PGJyIC8+YW5kIHRyYW5zbWl0IGl0LjxiciAvPjxiciAvPlBlcmZvcm1pbmcgYSBDUkMgY2hlY2sgb24gYSBtZXNzYWdlIHRoYXQgYWxyZWFkeSBpbmNsdWRlcyBhIHZhbGlkIENSQyB3aWxsIHByb2R1Y2UgYSAnQ1JDJyBvZiAmaDAwMCBzbzo8YnIgLz5UbyB0ZXN0IGEgcmVjaWV2ZWQgbWVzc2FnZSAoZWc6IFJ4TXNnJCkgZm9yIGEgY29ycmVjdCBDUkMgYW5kIHRoYXQgaXQgaXMgbm90IG90aGVyd2lzZSBjb3JydXB0ZWQgdXNlOjxiciAvPjxiciAvPjxwcmU+SUYgWENSQyQoUnhNc2ckKSA9IENIUiQoMCkgKyBDSFIkKDApIFRIRU4gJyBDUkMgaXMgT0sNCicgUHJvY2VzcyB0aGUgbWVzc2FnZQ0KRUxTRQ0KJyBJZ25vcmUgdGhlIG1lc3NhZ2Ugb3Igc2VuZCBhIE5BSw0KRU5EIElGPC9wcmU+PGJyIC8+QXNzdW1wdGlvbnM6PGJyIC8+Tm9uZTxiciAvPjxiciAvPlRoZSBGdW5jdGlvbjo8YnIgLz48cHJlPkZVTkNUSU9OIFhDUkMkKGEkKQ0KICBMT0NBTCBDUkMlID0gJmFtcDtIMDAwMCwgbiUsIGolDQogIEZPUiBuJSA9IDEgVE8gTEVOKEEkKQ0KICAgIENSQyUgPSAoQ1JDJSBBTkQgJmFtcDtIRkZGRikgWE9SIChBU0MoTUlEJChhJCwgbiUsIDEpKSAmbHQ7Jmx0OyA4KQ0KICAgIEZPUiBqJSA9IDEgVE8gOA0KICAgICAgSUYgKENSQyUgQU5EICZhbXA7SDgwMDApICZsdDsmZ3Q7IDAgVEhFTg0KICAgICAgICBDUkMlID0gKENSQyUgJmx0OyZsdDsgMSkgWE9SICZhbXA7SDEwMjENCiAgICAgIEVMU0UgDQogICAgICAgIENSQyUgPSBDUkMlICZsdDsmbHQ7IDENCiAgICAgIEVORCBJRg0KICAgIE5FWFQgaiUNCiAgTkVYVCBuJQ0KICBYQ1JDJCA9IENIUiQoQ1JDJSAmZ3Q7Jmd0OyA4IEFORCAmYW1wO0hGRikgKyBDSFIkKENSQyUgQU5EICZhbXA7SEZGKQ0KRU5EIEZVTkNUSU9OPC9wcmU+PGJyIC8+ZGQayKPZM8eD1zFyozf0v7YB6RQSHw==" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="2068001F" />
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBwKj3uDgDgK9z/TSAwKiz/TSAwK3j57gBwLC5ta/BQLd5ta/BQL9yYWiCRWM1gCTIEG6B5eN0WXTC1PiV2Iv" />
</div>
		<script type="text/javascript">
<!--
__BaseName = "ctl00_CphMaster_";
__ConfirmMessage = "Are you sure you want to proceed?";
// -->
</script>
		<script type="text/javascript">
		<!--
			function __GetServerElementById(id) {
				return document.getElementById(__BaseName + id);
			}
			function __RequestConfirm() {
				return confirm(__ConfirmMessage);
			}
		// -->
		</script>
    
        <div id="HeaderDiv">
            <div style="float: right;">Welcome <a href="MMBasic.Language.html" class="systemlink" title="Select your language">Guest</a>, you are in: <select class="namespacedropdown" onchange="javascript:var sel = this.value; document.location = (sel != '' ? (sel + '.') : '') + 'Default.aspx';"><option value="">&lt;root&gt;</option><option value="Circuit Ideas">Circuit Ideas</option><option value="Colour MaxiMite 2 (CMM2)">Colour MaxiMite 2 (CMM2)</option><option value="GCB">GCB</option><option value="MicroMite ArmMite and MMX Hardware">MicroMite ArmMite and MMX Hardware</option><option selected="selected" value="MMBasic">MMBasic</option><option value="PIC ASM">PIC ASM</option><option value="Platform Agnostic">Platform Agnostic</option></select> &bull; <a href="MMBasic.Login1dd3.html?Redirect=http%3a%2f%2ffruitoftheshed.com%2fHistory.aspx%3fNS%3dMMBasic%26Page%3dMMBasic.Xmodem-CRC%26Revision%3d00001" class="systemlink" title="Login">Login</a></div><h1>Fruit Of The Shed</h1>
        </div>
                   
        <div id="ContainerDiv">
                 
            <div id="SidebarDiv">
                <div id="SidebarHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="SidebarContentDiv">
                    <div style="float: right;"> </div><h3 class="separator">Navigation (MMBasic)<a class="headeranchor" id="Navigation_NAMESPACE_0" href="#Navigation_NAMESPACE_0" title="Link to this Section">&#0182;</a></h3><ul><li><b><a class="pagelink" href="MMBasic.MainPage.html" title="_MMBasic Code Library">Main Page</a></b></li><li><a class="pagelink" href="MainPage.html" title="Home Page">Main Page (root)</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.EggDrop-part-of-the-original-MMBasic-libraryc674.html" title="Random Page">Random Page</a></li><li><a class="systemlink" href="MMBasic.AllPages.html" title="All Pages">All Pages</a><br /> </li><li><a class="systemlink" href="Logina75d.html" title="Create a new Page">Create a new Page</a><br /></li></ul><br /><ul><li><a class="systemlink" href="Logine894.html" title="Administration">Administration</a></li><li><a class="systemlink" href="MMBasic.Upload.html" title="File Management">File Management</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="My Account">My Account</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="Create Account">Create Account</a><br /></li></ul><br /><small><b>Search the wiki</b></small><br /><br /><script type="text/javascript"><!--
function _DoSearch_SBa925f7376d16452eba58fcd259b58efc() { document.location = 'MMBasic.Search.aspx?AllNamespaces=1&FilesAndAttachments=1&Query=' + encodeURI(document.getElementById('SBa925f7376d16452eba58fcd259b58efc').value); }
// -->
</script><input class="txtsearchbox" type="text" id="SBa925f7376d16452eba58fcd259b58efc" onkeydown="javascript:var keycode; if(window.event) keycode = event.keyCode; else keycode = event.which; if(keycode == 10 || keycode == 13) { _DoSearch_SBa925f7376d16452eba58fcd259b58efc(); return false; }" /> <big><a href="#" onclick="javascript:_DoSearch_SBa925f7376d16452eba58fcd259b58efc(); return false;">&raquo;</a></big><br /><br /><br />
                </div>
                <div id="SidebarFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>
            <div id="MainDiv">
                <div id="MainHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="PageInternalHeaderDiv"></div>
                

    <h1 class="pagetitlesystem">Page History: Xmodem CRC</h1>
    <p>Compare Page Revisions</p> 
    <select name="ctl00$CphMaster$lstRev1" id="ctl00_CphMaster_lstRev1">
	<option value="1">1</option>
	<option value="0">0</option>

</select>
    <select name="ctl00$CphMaster$lstRev2" id="ctl00_CphMaster_lstRev2">
	<option value="Current">Current</option>
	<option value="1">1</option>
	<option value="0">0</option>

</select>
    <input type="submit" name="ctl00$CphMaster$btnCompare" value="Compare" id="ctl00_CphMaster_btnCompare" />
    <br /><br />
    
    <table class="box" cellpadding="0" cellspacing="0"><tr><td><p style="text-align: center;"><b><a href="MMBasic.Historyee35.html?Page=MMBasic.Xmodem-CRC&amp;Revision=00000">&laquo; Older Revision</a> - <a href="MMBasic.Historyd24e.html?Page=MMBasic.Xmodem-CRC">Back to Page History</a> - <a href="MMBasic.Xmodem-CRC.html">Current Revision</a></b></p></td></tr></table><br /><h3 class="separator">Page Revision: 2020/11/29 21:22</h3><br /><b><br />Introduction:</b><br />This CRC (Cyclic Redundancy Check) is for the Xmodem transfer protocol. The 16 bit CRC is calculated by processing the data in a message bit by bit. It cannot correct any data corruption but can indicate if a message has been corrupted in any way.<br /><br /><b>PLEASE NOTE:</b><br />Although this is an Xmodem CRC it is in no way restricted to the Xmodem protocol. Like the Modbus CRC any message structure of any length consisting of a stream of 8-bit data bytes can utilise it to improve security. For example:<br />Msg$ = “The quick brown fox jumps over the lazy dog”<br /><br />The structure of an Xmodem message is:<br /><pre>Byte 1		SOH
Byte 2		Packet number (0-255)
Byte 3		Inverse packet number (255 - packet number)
Byte 4-131	128 bytes of data
Byte 132-133	16 bit CRC</pre><br />The receiver responds with an ACK or NACK depending whether the CRC is good or bad. And depending on the answer the transmitter will transmit the next block of data or re-transmit the bad block. Where there are not 128 bytes of data the block of 128 is filled with a packing character. If you want to fully implement the Xmodem protocol there is plenty of infomation on the web.<br /><br />Add the CRC to the message (eg: RxMsg$) by:<br /><br /><pre>TxMsg$ = TxMsg$ + XCRC$(TxMsg)</pre><br />and transmit it.<br /><br />Performing a CRC check on a message that already includes a valid CRC will produce a 'CRC' of &h000 so:<br />To test a recieved message (eg: RxMsg$) for a correct CRC and that it is not otherwise corrupted use:<br /><br /><pre>IF XCRC$(RxMsg$) = CHR$(0) + CHR$(0) THEN ' CRC is OK
' Process the message
ELSE
' Ignore the message or send a NAK
END IF</pre><br />Assumptions:<br />None<br /><br />The Function:<br /><pre>FUNCTION XCRC$(a$)
  LOCAL CRC% = &amp;H0000, n%, j%
  FOR n% = 1 TO LEN(A$)
    CRC% = (CRC% AND &amp;HFFFF) XOR (ASC(MID$(a$, n%, 1)) &lt;&lt; 8)
    FOR j% = 1 TO 8
      IF (CRC% AND &amp;H8000) &lt;&gt; 0 THEN
        CRC% = (CRC% &lt;&lt; 1) XOR &amp;H1021
      ELSE 
        CRC% = CRC% &lt;&lt; 1
      END IF
    NEXT j%
  NEXT n%
  XCRC$ = CHR$(CRC% &gt;&gt; 8 AND &amp;HFF) + CHR$(CRC% AND &amp;HFF)
END FUNCTION</pre><br />
    
    


                <div id="PageInternalFooterDiv"></div>
                <div id="MainFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>

        </div>
            
        <div id="FooterDiv">
             
        </div>

    </form>  
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.History.aspx?Page=MMBasic.Xmodem-CRC&Revision=00001 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 13:18:37 GMT -->
</html>
