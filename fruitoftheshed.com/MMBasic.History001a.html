

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from fruitoftheshed.com/MMBasic.History.aspx?Page=MMBasic.Short-range-radio-network-not-WiFi-SLAVE-module-Uses-cheapie-433MHz-modules-or-HC-12&Revision=0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:53:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=8" /><title>
	Page History - Fruit Of The Shed
</title><script type="text/javascript" src="JS/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="JS/Scripts.js"></script>
<script type="text/javascript" src="JS/SearchHighlight.js"></script>
<link rel="stylesheet" media="print" href="Themes/Default/Print_Styles.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles%20-%20Copy.css" type="text/css" />
<link rel="stylesheet" media="screen" href="Themes/Default/Screen_Styles.css" type="text/css" />
<link rel="stylesheet" href="Themes/Editor.css" type="text/css" />
<link rel="search" href="searchf7b1.xml?OpenSearch=1" type="application/opensearchdescription+xml" title="Fruit Of The Shed - Search" /><script src="Themes/Default/Scripts.js" type="text/javascript"></script>
<link rel="shortcut icon" href="Themes/Default/Icon.ico" type="image/x-icon" />
</head>
<body>
    <form name="aspnetForm" method="post" action="http://fruitoftheshed.com/History.aspx?NS=MMBasic&amp;Page=MMBasic.Short-range-radio-network-not-WiFi-SLAVE-module-Uses-cheapie-433MHz-modules-or-HC-12&amp;Revision=0" id="aspnetForm">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTEzMjI3OTE2NTkPZBYCZg9kFgICAQ9kFgICCQ9kFggCAQ8WAh4EVGV4dAVmUGFnZSBIaXN0b3J5OiBTaG9ydCByYW5nZSByYWRpbyBuZXR3b3JrIChub3QgV2lGaSkuIFNMQVZFIG1vZHVsZS4gVXNlcyBjaGVhcGllIDQzM01IeiBtb2R1bGVzIG9yIEhDLTEyZAIFDxBkEBUBATAVAQEwFCsDAWdkZAIHDxBkEBUCB0N1cnJlbnQBMBUCB0N1cnJlbnQBMBQrAwJnZ2RkAgsPFgIfAAWxiwE8dGFibGUgY2xhc3M9ImJveCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj48dHI+PHRkPjxwIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7Ij48Yj4mbGFxdW87IE9sZGVyIFJldmlzaW9uIC0gPGEgaHJlZj0iTU1CYXNpYy5IaXN0b3J5LmFzcHg/UGFnZT1NTUJhc2ljLlNob3J0LXJhbmdlLXJhZGlvLW5ldHdvcmstbm90LVdpRmktU0xBVkUtbW9kdWxlLVVzZXMtY2hlYXBpZS00MzNNSHotbW9kdWxlcy1vci1IQy0xMiI+QmFjayB0byBQYWdlIEhpc3Rvcnk8L2E+IC0gPGEgaHJlZj0iTU1CYXNpYy5TaG9ydC1yYW5nZS1yYWRpby1uZXR3b3JrLW5vdC1XaUZpLVNMQVZFLW1vZHVsZS1Vc2VzLWNoZWFwaWUtNDMzTUh6LW1vZHVsZXMtb3ItSEMtMTIuYXNoeCI+Q3VycmVudCBSZXZpc2lvbjwvYT48L2I+PC9wPjwvdGQ+PC90cj48L3RhYmxlPjxiciAvPjxoMyBjbGFzcz0ic2VwYXJhdG9yIj5QYWdlIFJldmlzaW9uOiAyMDE3LzA4LzAzIDIwOjM1PC9oMz48YnIgLz5TdHViIGFydGljbGUgLSB1bmZpbmlzaGVkPGJyIC8+PGJyIC8+VGhlIGZvbGxvd2luZyBpcyBhIHByb3RvY29sIEkgZGV2ZWxvcGVkIGZvciBhIHNob3J0IHJhbmdlIHJhZGlvIG5ldHdvcmsgd2l0aG91dCBhbGwgdGhlIGZsdWZmIGFzc29jaWF0ZWQgd2l0aCBlc3RhYmxpc2hpbmcgYW5kIHVzaW5nIGEgV2lGaSBFdGhlcm5ldCBwcmVzZW5jZS4gSXQgaXMgYSBzaW1wbGUgc3RhciBuZXR3b3JrIHdpdGggYSBtYXN0ZXIgZGV2aWNlIGluaXRpYXRpbmcgYWxsIGNvbW11bmljYXRpb25zIHRvIGFkZHJlc3NlZCBzbGF2ZSBtb2R1bGVzLiBNZXNzYWdlcyBtYXkgYmUgcGFzc2VkIGJhY2sgYW5kIGZvcnRoIC0gdGhlIGNvbnRlbnQgYW5kIGludGVycHJldGF0aW9uIG9mIHdoaWNoIGlzIGRvd24gdG8gdGhlIGFwcGxpY2F0aW9uLjxiciAvPjxiciAvPjxwcmU+DQpNYXN0ZXIgaXMgYWx3YXlzIGFkZHJlc3MgMA0KU2xhdmVzIGFyZSBhZGRyZXNzIDEgLSA5OTgNCkJyb2FkY2FzdCBpcyBhZGRyZXNzIDk5OQ0KDQpNYXN0ZXIgaW5pdGlhdGVzIGFsbCBjb21tdW5pY2F0aW9uIGFuZCBzbGF2ZXMgb25seSBldmVyIHJlc3BvbmQgdG8gTWFzdGVyIHJlcXVlc3RzIGZvciBpbnRlcmFjdGlvbiAoU1RBVCBvciBQT0xMKS4NClBhY2tldHMgY29uc2lzdCBvZiBhIDQgY2hhcmFjdGVyIHZlcmIgYW5kIHRoZW4gdGhlIHBheWxvYWQuDQoNCkFsbCBkZXZpY2VzIG11c3QgYmUgb24gdGhlIHNhbWUgImNoYW5uZWwiLiBJdCB3YXMgZXhwbG9yZWQgdGhhdCBlYWNoIHNsYXZlIG1pZ2h0IGV4aXN0IG9uIGl0cyBvd24gY2hhbm5lbCBidXQgdGhpcyB3YXMgYWJhbmRvbmVkDQplYXJseSBvbiBiZWNhdXNlIHRoZSBjb25zIG91dHdlaWdoZWQgdGhlIHByb3MmIzU4Ow0KDQpTZXBhcmF0ZSBjaGFubmVsJiM1ODsgCVBybyAgICBzbGF2ZSBkb2VzIG5vdCBuZWVkIHRvIHBhcnNlIHRoZSBhZGRyZXNzZXMgZnJvbSB0aGUgcGFja2V0IC0gaWYgaXQgaGVhcnMgdGhlIHBhY2tldCB0aGVuIGl0IG11c3QgYmUgZm9yIHRoYXQgc2xhdmUuDQogICAgICAgICAgICAgICAgICAgICAgICBDb24gICAgQnJvYWRjYXN0IGJlY29tZXMgaW1wb3NzaWJsZS4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZXZpY2UgYWRkcmVzc2VzIGxpbWl0ZWQgdG8gMTI3Lg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENoZWFwIFJ4VHggbW9kdWxlcyBoYXZlIG5vIGNvbmNlcHQgb2YgY2hhbm5lbC4NCg0KU2luZ2xlIGNoYW5uZWwmIzU4OyAgICAgICAgIFBybyAgICBTbGF2ZSBhZGRyZXNzIGlzIGVuY29kZWQgYXMgcGFydCBvZiB0aGUgcGFja2V0IGhlYWRlciB3aXRoIGEgdGhlb3JldGljYWwgbWF4aW11bSBvZiA5OTggZGV2aWNlcy4gRGlmZmVyZW50IGNoYW5uZWxzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVybWl0IHNpbmdsZSBtYXN0ZXIgd2l0aCBtdWx0aXBsZSBzbGF2ZSB6b25lcyBpZiByZXF1aXJlZCwgdGh1cyBnaXZpbmcgJmx0OyAxMjgwMDAgZGV2aWNlcyAoYnV0IGJyb2FkY2FzdCBhbmQgdXNlIG9mDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlYXBpZSBtb2R1bGVzIHdpbGwgYmUgaW1wYWN0ZWQpLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJyb2FkY2FzdCBpcyBzaW1wbGUgLSBhbGwgZGV2aWNlcyBoZWFyIHRoZSBicm9hZGNhc3QgYW5kIHBpY2sgdGhlIGFkZHJlc3NlcyBmcm9tIHRoZSBwYWNrZXQgYXMgbm9ybWFsLg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbiB1c2UgY2hlYXBpZSA0MzNNSHogVHhSeCBwYWlycyB3aXRoIG5vIG9uYm9hcmQgcHJvY2Vzc2luZyAoc2VlIHByZWFtYmxlKS4NCiAgICAgICAgICAgICAgICAgICAgICAgIENvbiAgICBIQy0xMiBtb2R1bGUgaXMgbW9yZSBleHBlbnNpdmUNCg0KDQpDb21tYW5kCQlTb3VyY2UgIERldGFpbHMNCiYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTstKyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Oy0rJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7DQpTVEFUJiM1ODsgICAgICAgICAgIE1hc3RlcglNYXN0ZXIgU1RBVHMgYWRkcmVzcy4NCgkJICAgICAgICBTbGF2ZSBNVVNUIHJlc3BvbmQgd2l0aGluIDEuNSBzZWNvbmRzIGFuZCBtYXkgc2VuZCBiYWNrIGRhdGEsIHRodXMgYSBTVEFUIGNvbnRhaW5zIGFuIGltcGxpY2l0IFBPTEwuDQoJCSAgICAgICAgTmlsIHJlc3BvbnNlIHdpbGwgcmVzdWx0IGluIHRoZSBzbGF2ZSBtYXJrZWQgYXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgc3RhdHVzIHJlZ2lzdGVyIChtYXN0ZXIgd2lsbCBub3QgUE9MTCkuDQoJCSAgICAgICAgU2xhdmUgbXVzdCByZXBseSB3aXRoIEFDSzAgb25seSAtIElmIHRoZSBTbGF2ZSBoYXMgbW9yZSB0byBzYXksIGl0IG11c3Qgd2FpdCBmb3IgYSBwb2xsLg0KUE9MTCYjNTg7ICAgICAgICAgICBNYXN0ZXIJTWFzdGVyIFBPTExzIGFkZHJlc3MuDQoJCSAgICAgICAgU2xhdmUgbWF5IHJlc3BvbmQgYnV0IG11c3QgZG8gc28gd2l0aGluIHdpdGhpbiAxLjUgc2Vjb25kcyBpZiBpdCBoYXMgc29tZXRoaW5nIHRvIHNheSBidXQga2VlcHMgcXVpZXQgb3RoZXJ3aXNlLg0KQUNLMCYjNTg7ICAgICAgICAgICBTbGF2ZQlUaGlzIGlzIHRoZSB0ZXJtaW5hdGluZyByZXNwb25zZSB0byBhIFNUQVQgb3IgUE9MTC4gVGhpcyBwYWNrZXQgd2lsbCBjYXVzZSB0aGUgTWFzdGVyIHRvIGFjY2VwdCB0aGUgcmVzcG9uc2UgYW5kDQoJCSAgICAgICAgbW92ZSBvbiB0byB0aGUgbmV4dCBzZWN0aW9uIG9mIHRoZSBjeWNsZS4NCkFDSzEmIzU4OyAgICAgICAgICAgU2xhdmUJVGhpcyBpcyB0aGUgcmVzcG9uc2UgdG8gYSBQT0xMIG9ubHkgYnV0IHNpZ25pZmllcyB0aGUgc2xhdmUgaGFzIG1vcmUgdG8gcmVwb3J0LiBUaGlzIHBhY2tldCB3aWxsIGNhdXNlIHRoZQ0KCQkgICAgICAgIE1hc3RlciB0byBhY2NlcHQgdGhlIHJlc3BvbnNlIGFuZCB0aGVuIGltbWVkaWF0ZWx5IGlzc3VlIGFub3RoZXIgUE9MTCB0byB0aGUgc2FtZSBzbGF2ZS4gTXVsdGlwbGUgQUNLMSdzIG1heSBiZQ0KCQkgICAgICAgIHNlbnQgYW5kIHRoZSBNYXN0ZXIgd2lsbCBjb250aW51ZSB0byBQT0xMIGFuZCBhY2NlcHQgcGFja2V0cyB1bnRpbCByZWNlaXB0IG9mIEFDSzAgb3IgYSB0aW1lb3V0IG9jY3VycywgYXQgd2hpY2gNCgkJICAgICAgICBwb2ludCB0aGUgbWFzdGVyIHdpbGwgbW92ZSBvbiB0byB0aGUgbmV4dCBzZWN0aW9uIG9mIHRoZSBjeWNsZS4gVGhlIHNsYXZlIG11c3QgcGF1c2UgZm9yIDEuNSBzZWNvbmRzIGJldHdlZW4gZWFjaA0KCQkgICAgICAgIEFDS3ggcGFja2V0Lg0KSU5JVCYjNTg7CQlNYXN0ZXIJVGhlIHNsYXZlIG11c3QgcmVzdGFydC4NClNBRkUmIzU4OwkJTWFzdGVyCVRoZSBzbGF2ZSBtdXN0IGdvIHRvIGl0cyBzYWZlIG1vZGUgc3RhdGUuDQoNCkJyb2FkY2FzdHMmIzU4OwlBbnkgcGFja2V0IHdpdGggZGVzdGluYXRpb24gYWRkcmVzcyA5OTkgaXMgYXNzdW1lZCB0byBiZSBhIGJyb2FkY2FzdC4gVXN1YWxseSBvbmx5IHRoZSBNYXN0ZXIgQnJvYWRjYXN0cy4gU2xhdmVzIG11c3Qgbm90IHJlcGx5IHRvIGJyb2FkY2FzdHMuDQpUSU1FJiM1ODsJCU1hc3RlcglJcyBhIGJyb2FkY2FzdCBvbmx5IHBhY2tldC4gVGhlIHBheWxvYWQgaXMgaGgmIzU4O21tJiM1ODtzcyxkZC9tbS95eXl5DQoJCSAgICAgICAgQWxsIHNsYXZlcyB3aWxsIHJlc3BvbmQgdG8gdGhpcyBwYWNrZXQgYW5kIHN5bmNocm9uaXNlIHRoZWlyIGNsb2NrcyB0byB0aGUgcGF5bG9hZC4NCklOSVQmIzU4OwkJTWFzdGVyCVRoZSBzbGF2ZSBtdXN0IHJlc3RhcnQuDQpTQUZFJiM1ODsJCU1hc3RlcglUaGUgc2xhdmUgbXVzdCBnbyB0byBpdHMgc2FmZSBtb2RlIHN0YXRlLg0KRklSRSYjNTg7CQlNYXN0ZXIJVGhlIHNsYXZlIG11c3QgZ28gdG8gaXRzIEZJUkUgbW9kZSBzdGF0ZS4NCg0KDQpTbGF2ZXMgbXVzdCByZXNwb25kIHRvIFNUQVQuIFRoZSByZXNwb25zZSAob3IgbGFjayBvZiBpdCkgdXBkYXRlcyB0aGUgaW50ZXJuYWwgc3RhdHVzIHJlZ2lzdGVyIGZvciB0aGF0IHNsYXZlLiBTbGF2ZXMgdGhhdCBkbyBub3QNCnJlc3BvbmQgdG8gYSBTVEFUIHdpbGwgYmUgc2tpcHBlZCBpbiB0aGUgUE9MTCBjeWNsZS4NCg0KTWFzdGVyJiM1ODsgU1RBVCAoTk4pDQoJU2xhdmUmIzU4OwlNdXN0IHJlcGx5IHdpdGggQUNLMCAob3IgQUNLMSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgcmV0dXJuIHBhY2tldHMpIHRvIHRoZSBNYXN0ZXIuIFRoZSBwYXlsb2FkIG1heSBiZSBlbXB0eS4NCg0KTWFzdGVyJiM1ODsJUE9MTCAobm4pDQoJU2xhdmUmIzU4OwlNYXkgcmVwbHkgd2l0aCBBQ0swIChvciBBQ0sxIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBwYXlsb2FkcykgdG8gdGhlIE1hc3Rlci4gVGhlIHBheWxvYWQgbWF5IGJlIGVtcHR5IGJ1dCBpdCBpcw0KCXJlY29tbWVuZGVkIHRoZSBzbGF2ZSBub3QgcmVzcG9uZCB0byBhIFBPTEwgaWYgaXQgaGFzIG5vdGhpbmcgdG8gcmVwb3J0LiBUaGlzIHJlZHVjZXMgdGhlIGN5Y2xlIHRpbWUgYW5kIHByb2Nlc3NpbmcgbG9hZC4NCg0KUGFja2V0IGZvcm1hdCAobWFzdGVyIGFuZCBzbGF2ZSkmIzU4Ow0KJiM5MTtwcC5wcC4mIzkzO1NUWCZsdDtjaGVja3N1bSZndDtHUyYjMTIzO1JDNCZsdDtkZXN0IGFkZHJlc3MmZ3Q7Jmx0O3NyYyBhZGRyZXNzJmd0OyZsdDtQYWNrTGVuJmd0OyZsdDsmbHQ7UGFja2V0Jmd0OyYjMTI1O0VUWA0KDQp0aGUgZGF0YSBiZXR3ZWVuIHRoZSBHUyBhbmQgRVRYIGlzIGVuY3J5cHRlZCBiZWZvcmUgdHJhbnNtaXNzaW9uLg0KUkM0IChlbHNld2hlcmUgb24gdGhpcyB3aWtpKSBpcyBhIGNvbXBsZXggYWxnb3JpdGhtIHdpdGggYSBtb2RlcmF0ZSBkYXRhIHJlcXVpcmVtZW50ICgwLjVLKS4gQSBzaW1wbGVyIGVuY3J5cHRpb24gYWxnb3JpdGhtIFhPUmluZyBhDQp2YXJpYWJsZSBsZW5ndGgga2V5IGlzIGF2YWlsYWJsZSBpZiB0aGUgc2ltcGxlIG5hdHVyZSBvZiB0aGUgc2xhdmVzIGNhbm5vdCBzdXBwb3J0IGl0IGkuZS4gc2ltcGxlIFBJQy9BdG1lbCBjaGlwcy4gDQpTbWFsbGVyIE1pY3JvbWl0ZXMgc3RydWdnbGUgdG8gbWFpbnRhaW4gdGhlIHRpbWluZyBjb25zdHJhaW50cyB3aXRoIFJDNCBhbmQgbGFyZ2UgcGFja2V0cyAtIHVzZSBzaW1wbGUgZW5jcnlwdGlvbiBvciBzbG93IHRoZSBjeWNsZS4NCg0Kc28gYSB0eXBpY2FsIFR4IGZyb20gdGhlIG1hc3RlciB0byBkZXZpY2UgMDUgbG9va3MgbGlrZQ0KDQpQcmVhbWJsZSAgICAgIFdoZW4gdXNpbmcgY2hlYXAgVHhSeCBtb2R1bGVzIHdpdGggbm8gb25ib2FyZCBwcm9jZXNzaW5nLCBpdCBpcyBuZWNlc3NhcnkgdG8gc2VuZCBhIHN0cmVhbSBvZiAxJ3MgdG8gdGhlIFR4IHNvIHRoZSBSeA0KICAgICAgICAgICAgICBjYW4gc2V0IGl0J3MgbGV2ZWxzIGJlZm9yZSB0aGUgYWN0dWFsIGRhdGEgYXJyaXZlcy4gQmVjYXVzZSBvZiB0aGlzLCBzb21lIG9mIHRob3NlIGJpdHMgbWF0IGJlIGxvc3Qgc28gYW55dGhpbmcgYmVmb3JlDQogICAgICAgICAgICAgIFNUWCBtdXN0IGJlIGRpc2NhcmRlZC4gQ2hyIEZFIGhhcyBhIGxhcmdlIGFtb3VudCBvZiAiMSIgc3BhY2UgYW5kIHRoZSB0cmFpbGluZyAwIGVuc3VyZXMgdGhlIGxldmVscyBhcmUgc2V0IG9uIFJ4IGRldmljZXMNCiAgICAgICAgICAgICAgaW1tZWRpYXRlbHkgYmVmb3JlIHRoZXkgYXJlIHJlcXVpcmVkIHRvIGJlIGFjY3VyYXRlLiBBIHRyaW5nIG9mIGF0IGxlYXN0IDIgRkUgY2hhcnMgaXMgZWZmZWN0aXZlLg0KICAgICAgICAgICAgICBVc2luZyBkZXZpY2VzIGxpa2UgSEMtMTIgd2hlcmUgdGhlcmUgaXMgb25ib2FyZCBwcm9jZXNzaW5nIHRvIGFzc3VyZSBkYXRhIGludGVncml0eSwgYSBwcmVhbWJsZSBpcyBub3QgbmVjZXNzYXJ5IGFzIGl0IGlzDQogICAgICAgICAgICAgIHRha2VuIGNhcmUgb2YgYnkgdGhlIHJhZGlvIG1vZHVsZS4NCg0KICAgICAgICAgICAgICAmIzkxO0ZFIEZFIC4uLiYjOTM7DQoNClBhY2tldCBzdHJ1Y3R1cmUNCiAgICAgICAgICAgICAgMDIgPSBTVFgsIHN5bmMgbWFya2VyLCBvbmx5IHJlY29nbmlzZWQgaXMgcHJlY2VlZGVkIGJ5IGF0IGxlYXN0IHR3byBGRSBieXRlcw0KICAgICAgICAgICAgICBDSEtfSEkgYXNjaWkgSGV4IG9mIGNoZWNrc3VtIG9mIHBhY2tldCBiZXR3ZWVuIEdTIGFuZCBFVFgNCiAgICAgICAgICAgICAgQ0hLX0xPDQogICAgICAgICAgICAgIDFEID0gR1MgZ3JvdXAgc2VwYXJhdG9yDQogICAgICAgICAgICAgICYjOTE7CTMwID0gYXR0ZW50aW9uIGRldmljZSAwMDUgaW4gYXNjaWkNCiAgICAgICAgICAgICAgJiM5MTsJMzANCiAgICAgICAgICAgICAgJiM5MTsJMzUNCiAgICAgICAgICAgICAgJiM5MTsJMzAgPSBmcm9tIHRoZSBtYXN0ZXIgMDAwIGluIGFzY2lpDQogICAgICAgICAgICAgICYjOTE7CTMwDQogICAgICAgICAgICAgICYjOTE7CTMwDQogICAgICAgICAgICAgICYjOTE7CTUwIENvbW1hbmQgdmVyYiwgU1RBVCwgUE9MTCwgQUNLMCBldGMuLi4NCiAgICAgICAgICAgICAgJiM5MTsJNDkNCiAgICAgICAgICAgICAgJiM5MTsJNEUNCiAgICAgICAgICAgICAgJiM5MTsJNDcNCiAgICAgICAgICAgICAgJiM5MTsgYW55IG1lc3NhZ2UgaGVyZSAmIzkzOw0KICAgICAgICAgICAgICAwMyA9IEVUWCwgZW5kIG9mIHRyYW5zbWlzc2lvbg0KDQpBbnkgcmVzcG9uc2UgbXVzdCBiZWdpbiB0cmFuc21pc3Npb24gaW4gdGhlIG5leHQgMS41IHNlY29uZHMNCjwvcHJlPjxiciAvPjxiciAvPjxiPk1hc3RlciBtb2R1bGUuPC9iPjxiciAvPjxiciAvPllvdSBuZWVkIHRvIGFkZCB5b3VyIG93biBjb2RlIHRvIGludGVycHJldCB0aGUgY29udGVudCBvZiB0aGUgcGFja2V0cyAoYm90aCBtYXN0ZXIgYW5kIHNsYXZlcykgYnV0IHN0YW5kYXJkaXNlIGZ1bmN0aW9uYWxpdHkgc28gdGhlIG1hc3RlciBhbmQgc2xhdmVzIGtub3cgd2hhdCBlYWNoIG90aGVyIGlzIGRvaW5nLiBUaGUgbWFzdGVyIGRvZXMgbm90IGhhdmUgdG8gYmUgYSBNaWNyb01pdGUgLSBJIGhhdmUgd29ya2luZyBWQiBjb2RlIHdoaWNoIHVzZXMgYSBIQy0xMiBvbiBhIFVTQjwtPlNlcmlhbCBhZGFwdGVyIHNvIGEgV2luZG93cyBzZXJ2ZXIgY2FuIGNvbnRyb2wgdGhlIG5ldHdvcmsgLSB0aGlzIG9wZW5zIHVwIGFsbCBzb3J0cyBvZiBwb3NzaWJpbGl0aWVzIGFuZCBpcyB1c2VkIGluIHRoZSBTbm9va2VyIEhhbGwgbWV0ZXJpbmcgZm9yIGNsdWIgbWVtYmVyc2hpcCBhbmQgdGltZSBjaGFyZ2luZyBldGMuPGJyIC8+PGJyIC8+U2xhdmVzIGFuZCAobWljcm9taXRlKW1hc3RlciBsb2cgdG8gdGhlaXIgY29uc29sZSBidXQgdGhpcyBtYXkgYmUgZGlzY29ubmVjdGVkIGluIGdlbmVyYWwgdXNlLiBUaGUgbW9kdWxlcyBkZXRlY3QgImZpcnN0IHJ1biIgYW5kIHdpbGwgcHJvbXB0IGZvciBjb25maWcgKGkuZS4gdGhlaXIgYWRkcmVzcyBhbmQgbmFtZSAtIHdoaWNoIGlzIHVzdWFsbHkgdGhlIGxvY2F0aW9uKSBhdCB0aGUgY29uc29sZSwgYWZ0ZXIgdGhhdCBpdCBzdG9yZXMgaXQncyBjb25maWcgYW5kIGp1c3QgZ2V0cyBvbiB3aXRoIHRoaW5ncy4gU28gdXNlIHRoZSBjb25zb2xlIHRvIHNldCB0aGUgdGhpbmcgdXAgYW5kIHRoZW4ganVzdCBsZWF2ZSBpdCB0byBydW4uIFRoZSBtb2R1bGVzIEkgYnVpbHQgaGF2ZSB0aGVpciBjb25zb2xlIGNvbm5lY3Rpb25zIGJyb3VnaHQgdG8gYSAzLjVtbSBzdGVyZW8gamFjayB3aGljaCBnb2VzIHRvIGEgVVNCPC0+U2VyaWFsIGpvYmJ5IHBsdWdnZWQgaW4gdGhlIGluc3RhbGxlcnMgbGFwdG9wLCBqdXN0IHBsdWcgaW4gdG8gZWFjaCBhbmQgdHVybiBvbiwgY29uZmlndXJlIGFuZCBydW4gdGhlbiB1bnBsdWcgYW5kIG1vdmUgb24gdG8gdGhlIG5leHQuPGJyIC8+PGJyIC8+VGhlIG1hc3RlciAicGluZ3MiIGV2ZXJ5IGFkZHJlc3MgZnJvbSAwMDEgdG8gOTk4IGV2ZXJ5IHNvIG9mdGVuIGFuZCBpZiBhIG1vZHVsZSByZXNwb25kcywgaXQgaXMgbWFya2VkIGFzICJsaXZlIiBhbmQgcmVjb3JkZWQgYWxvbmcgd2l0aCBpdCdzIG5hbWUuIExpdmUgU2xhdmUgbW9kdWxlcyBhcmUgcG9sbGVkIGluIG9yZGVyIGZvciBhbnkgbWVzc2FnZXMgaW50ZXJzcGVyc2VkIHdpdGggdGhlIG5leHQgZGlzY292ZXJ5LiBTbyB0aGUgY3ljbGUgbWlnaHQgbG9vayBsaWtlOjxiciAvPjxiciAvPjxjb2RlPlBpbmcgMSAocmVzcG9uZHMpPGJyIC8+UG9sbCAxPGJyIC8+UGluZyAyPGJyIC8+UG9sbCAxPGJyIC8+UGluZyAzIChyZXNwb25kcyk8YnIgLz5Qb2xsIDM8YnIgLz5QaW5nIDQ8YnIgLz5Qb2xsIDE8YnIgLz5QaW5nIDU8YnIgLz5Qb2xsIDM8YnIgLz5QaW5nIDY8YnIgLz5Qb2xsIDE8YnIgLz4uLi4gPGJyIC8+UGluZyA5OTg8YnIgLz5UaW1lPC9jb2RlPjxiciAvPjxiciAvPnNvIG9ubHkga25vd24gbGl2ZSBzYWx2ZXMgYXJlIHJlZ3VsYXJseSBwb2xsZWQgYnV0IG5ld2x5IGRpc2NvdmVyZWQgc2xhdmVzIGFyZSBhZGRlZCBhcyB0aGV5IGFyZSBkaXNjb3ZlcmVkLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBkaXNjb3ZlciBhbGwgbW9kdWxlcyBvdmVyIHRpbWUgYnV0IGRvIG5vdCBkZWxheSBwb2xsaW5nIGtub3duIGxpdmUgbW9kdWxlcy48YnIgLz48YnIgLz5BdCB0aGUgZW5kIG9mIHRoZSBjeWNsZSwgYSBUSU1FIHBhY2tldCBpcyBzZW50IG9uIHRoZSBicm9hZGNhc3QgYWRkcmVzcyBhbmQgYWxsIHNsYXZlcyBzZXQgdGhlaXIgY2xvY2tzLjxiciAvPjxiciAvPklOSVQgbWVzc2FnZXMgY2FuIGJlIHNlbnQgdG8gcmVzdGFydCBhbiBpbmRpdmlkdWFsIG1vZHVsZSwgU0FGRSBtZXNzYWdlcyBjYW4gYmUgc2VudCB0byBpbmRpdmlkdWFsIG9yIGFsbCBtb2R1bGVzIHRvIHNldCB0aGVtIHRvIHRoZWlyIHNhZmUgbW9kZSAobWF5YmUgYW4gZW5naW5lZXIgaXMgYWJvdXQgdG8gb3BlbiB0aGVtIHVwIGFuZCBkb2Vzbid0IHdhbnQgYSBtYWlucyBjaXJjdWl0IHVwIGhpcyBhcm0pLiBBIEZJUkUgbWVzc2FnZSBjYW4gYmUgc2VudCB0byBhbGwgbW9kdWxlcyAtIHRoaXMgc2V0cyB0aGUgbW9kdWxlIHRvIGl0J3MgZW1lcmdlbmN5IG1vZGUgLSBwZXJoYXBzIHR1cm4gYWxsIHRoZSBsaWdodHMgb24sIHBsYXkgYSByZWNvcmRlZCBtZXNzYWdlIHRvIGV2YWN1YXRlIHRoZSBidWlsZGluZyBldGMuLi48YnIgLz48YnIgLz48YnIgLz48Yj5TbGF2ZSBtb2R1bGUuIDwvYj48YnIgLz48YnIgLz5Zb3Ugd2lsbCBuZWVkIHRvIGFkYXB0IGl0IGFzIHlvdSBzZWUgZml0IGJ1dCBpdCB3b3JrcyByZWFsbHkgd2VsbCBhbmQgb2ZmZXJzIHNvbWUgbmljZSBmZWF0dXJlcy48YnIgLz48YnIgLz5TbGF2ZSBtb2R1bGVzIGxpc3RlbiBmb3IgcmFkaW8gdHJhbnNtaXNzaW9ucyBmb3IgdGhlaXIgYWRkcmVzcyBvciB0aGUgYnJvYWRjYXN0IGFkZHJlc3MgYW5kIHJlc3BvbmQgYWNjb3JkaW5nbHkuIEkgaGF2ZSB1c2VkIHRoaXMgZm9yIGEgbnVtYmVyIG9mIGRpZmZlcmVudCBwcm9qZWN0czogU25vb2tlci9Qb29sIHRhYmxlIGxpZ2h0IGNvbnRyb2wsIEN1c3RvbWVyIGZlZWRiYWNrIHBvZHMgZXRjLjxiciAvPjxiciAvPlRoZSBNYXN0ZXIgaW5pdGlhdGVzIGFsbCBjb21tdW5pY2F0aW9uIGFuZCB0cmFuc21pdHMgc3RydWN0dXJlZCBhbmQgZW5jcnlwdGVkIHBhY2tldHMgZm9yIHNwZWNpZmljIHNsYXZlIGFkZHJlc3Nlcy4gU2VlIHRoaXMgYXJ0aWNsZSBoZXJlIGZvciBkZXRhaWxzIG9mIHRoZSBwcm90b2NvbC48YnIgLz48YnIgLz5UaGUgTWFzdGVyIGlzIGFsd2F5cyBhZGRyZXNzIDAwMCBhbmQgc2xhdmVzIGNhbiBiZSBhbnkgZnJvbSAwMDEgdG8gOTk4IChkb2Vzbid0IGhhdmUgdG8gYmUgY29udGlndW91cykuIDk5OSBpcyB0aGUgYnJvYWRjYXN0IGFkZHJlc3MuIFlvdSBjb3VsZCBlYXNpbHkgZXh0ZW5kIHRoaXMgYnV0IHByb2JhYmx5IGEgdGhvdXNhbmQgc2xhdmUgbW9kdWxlcyB3aWxsIGNvdmVyIG1vc3QgaW5zdGFsbGF0aW9ucy4gWW91IGRvbid0IGhhdmUgdG8gdXNlIHRoZW0gYWxsIGFuZCB0aGUgbWFzdGVyIHdvbid0IHdhc3RlIHRpbWUgdHJ5aW5nIHRvIHRhbGsgdG8gYWRkcmVzc2VzIHRoYXQgZG9uJ3QgcmVzcG9uZCB0byBkaXNjb3ZlcnkuPGJyIC8+PGJyIC8+VGhlIG1hc3RlciBhbHNvIHNlbmRzIG91dCBUSU1FIHBhY2tldHMgc28gc2xhdmVzIGRvbid0IG5lZWQgUlRDcyAobXVjaCBjaGVhcG5lc3MhKSwgb25seSBhIHNpbmdsZSBSVEMgb24gYSBuZXR3b3JrIG9mIDEwMDAgbW9kdWxlcyE8YnIgLz48YnIgLz48YnIgLz48YnIgLz48cHJlPg0KDQoJT1BUSU9OIEFVVE9SVU4gT04NCg0KCVBSSU5UICJOb2RlIGJvb3QiDQoJdGltZXI9MA0KDQoJT1BUSU9OIEJBU0UgMA0KCSdPUFRJT04gRVhQTElDSVQNCg0KCUNPTlNUIEtFWSQ9IiZndDs0ITF4NHEzejQrNyU0JiMxMjM7OT81XDNIaEheNSQ5PTZAMX42LDdfN3wxKTcnMyYjOTM7NyYjOTE7OSYjNTg7OCZsdDszJiM0Mjs4UzlJOWw3WjFlVDByMSINCglDT05TVCBHUz0mYW1wO0gxRA0KICAgICAgICBDT05TVCBTVFg9Mg0KICAgICAgICBDT05TVCBFVFg9Mw0KCUNPTlNUIGlvPTENCglDT05TVCBEb1ByZWFtYmxlPTAJJyBOby4gb2YgcHJlYW1ibGUgYnl0ZXMuIHNldCB0byAyKyB3aGVuIHVzaW5nIGNoZWFwIG1vZHVsZXMgKG5vdCBIQy0xMikgYW5kIGRyb3AgdGhlIGJhdWQgcmF0ZSBiZWxvdw0KCUNPTlNUIExpbmskPSJDT00xJiM1ODs5NjAwLDI2MCINCg0KCURJTSBNeUFkZHIgQVMgSU5URUdFUg0KCURJTSBNeUpvYiBBUyBTVFJJTkcNCg0KCURJTSBTVFJJTkcgYSQsIHRtJCBMRU5HVEggOCwgY21kJCBMRU5HVEggNCxwbCQgTEVOR1RIIDExNSwgUiBMRU5HVEggMjU1ICcgUiBpcyB0aGUgc2VyaWFsIGJ1ZmZlcg0KCURJTSBJTlRFR0VSIGMsc3JjLGRzdCxuDQoJRElNIElOVEVHRVIgRkxBR1M9MCAgJyAwIFNUWA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDEgR1MNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyAyIEVUWA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDMgSW5pdC4gZGV2aWNlIGhhcyByZXN0YXJ0ZWQgYW5kIG5ldmVyIGhlYXJkIGZyb20gdGhlIG1hc3Rlcg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDQgaW4gRklSRSBtb2RlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgNSBpbiBTQUZFIG1vZGUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyA2IGp1c3QgYmVlbiBjb25maWd1cmVkDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgNw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIDgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyA5DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMTENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzEyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxMw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMTQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzE1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxNg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMTcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzE4DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcxOQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMjANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzIxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcyMg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMjMNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzI0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcyNQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMjYNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzI3DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICcyOA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnMjkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzMwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICczMQ0KDQoJVkFSIFJFU1RPUkUNCgkNCglGbGFnU2V0IDMgJyBqdXN0IGJvb3RlZA0KDQoJSUYgTXlBZGRyPTAgVEhFTg0KCQlETw0KCQkJRE8NCgkJCQlJTlBVVCAiRW50ZXIgTm9kZSBhZGRyZXNzICgxLTk5OCkgJmd0OyIsIGEkDQoJCQkJTXlBZGRyPWludCh2YWwoIjAiK2EkKSkNCgkJCUxPT1AgVU5USUwgTXlBZGRyICZndDswIEFORCBNeUFkZHImbHQ7OTk5DQoNCgkJCURPDQoJCQkJSU5QVVQgIkVudGVyIE5vZGUgVGFzayBOYW1lICAgICAgICZndDsiLCBhJA0KCQkJCU15Sm9iPWEkDQoJCQlMT09QIFVOVElMIE15Sm9iJmx0OyZndDsiIg0KDQoJCQlQUklOVCAiSXMgdGhpcyBjb3JyZWN0PyAoWS9OKSI7DQoJCQlETyYjNTg7SU5QVVQgYSQmIzU4O2EkPVVDQVNFJChhJCkmIzU4O0xPT1AgVU5USUwgYSQ9IlkiIE9SIGEkPSJOIg0KCQlMT09QIFdISUxFIGEkPSJOIg0KDQoJCVZBUiBTQVZFIE15QWRkcixNeUpvYg0KCQkNCgkJRmxhZ1NldCA2ICcgSnVzdCBjb21wbGV0ZWQgc2V0dXAgLSBuZWVkIElOSVQNCglFTkQgSUYNCg0KCU9QRU4gTGluayQgQVMgJiMzNTtpbyAnIG1heSBuZWVkIHRvIGRyb3AgdGhpcyBmb3IgY2hlYXAgVHhSeCBtb2R1bGVzLCBIQzEyIGV0YyBkbyBub3QgcmVxdWlyZQ0KCUZsdXNoSU8gaW8NCg0KCVBSSU5UICJOb2RlIjtNeUFkZHI7IiB1cCBpbiI7VGltZXI7Im1TIE5hbWUgIjtNeUpvYg0KDQoJRE8NCgkJSUYgTE9DKCYjMzU7aW8pJmx0OyZndDswIFRIRU4NCgkJCUM9QVNDKElOUFVUJCgxLCYjMzU7aW8pKQ0KCQkJU0VMRUNUIENBU0UgQw0KCQkJCUNBU0UgMg0KCQkJCQlSPSIiDQoJCQkJCUlGIEZMQUdTJmx0OyZndDswIFRIRU4gR09UTyBTYWZlRXhpdA0KCQkJCQlGbGFnU2V0IDANCgkJCQlDQVNFICZhbXA7SDFECScgdGVzdCBHUw0KCQkJCQlJRiBGbGFndGVzdCgwKSZsdDsmZ3Q7MSBBTkQgRmxhZ1Rlc3QoMikmbHQ7Jmd0OzAgVEhFTiBHT1RPIFNhZmVFeGl0DQoJCQkJCUZsYWdTZXQgMQ0KCQkJCQlSPVIrIiwiDQoJCQkJQ0FTRSAzDQoJCQkJCUlGIEZsYWd0ZXN0KDApJmx0OyZndDsxIEFORCBGbGFnVGVzdCgyKSZsdDsmZ3Q7MSBUSEVOIEdPVE8gU2FmZUV4aXQNCgkJCQkJRmxhZ1NldCAyDQoJCQkJQ0FTRSAmYW1wO0gzMCBUTyAmYW1wO2gzOQ0KCQkJCQlJRiBGbGFndGVzdCgwKSZsdDsmZ3Q7MSBUSEVOIEdPVE8gU2FmZUV4aXQgJyBvbmx5IGFjY2VwdCBjaGFycyBhZnRlciBTVFgNCgkJCQkJUj1SK0NIUiQoQykNCgkJCQlDQVNFICZhbXA7aDQxIFRPICZhbXA7SDQ2DQoJCQkJCUlGIEZsYWd0ZXN0KDApJmx0OyZndDsxIFRIRU4gR09UTyBTYWZlRXhpdA0KCQkJCQlSPVIrQ0hSJChDKQ0KCQkJCUNBU0UgRUxTRQ0KCQkJCQknaWdub3JlIGFueXRoaW5nIGVsc2UNCgkJCUVORCBTRUxFQ1QNCgkJRU5EIElGDQoNCgkJSUYgKEZMQUdTIEFORCA3KSA9IDcgVEhFTgknU1RYLEdTLEVUWA0KDQoNCgkJCScgY2hlY2sgR1MgcG9zaXRpb24oNSkNCgkJCWM9SU5TVFIoUiwiLCIpDQoJCQlJRiBjJmx0OyZndDs1IFRIRU4gR09UTyBCYWRGcmFtZSAnPyAiR1MgYmFkIHBvc2l0aW9uIiYjNTg7DQoNCgkJCScgZGF0YSBhZnRlciBHUyBzaG91bGQgYWx3YXlzIGJlIGV2ZW4gY291bnQNCgkJCWM9TEVOKE1JRCQoUiw2KSkNCgkJCUlGIChjIEFORCAxKSBUSEVOIEdPVE8gQmFkRnJhbWUgJz8gIkRhdGEgbGVuZ3RoIGlzIG9kZCImIzU4O0dPVE8gQmFkRnJhbWUgJyBpZiBiaXQwIHNldCBUSEVOIG9kZCBudW1iZXINCg0KCQkJJ2NhbGN1bGF0ZSBjaGVja3N1bSBvZiByZWMnZCBkYXRhDQoJCQljPXZhbCgiJmFtcDtIIiArIGxlZnQkKHIsNCkpDQoJCQlhJD1NSUQkKFIsNikgJ3BheWxvYWQNCg0KCQkJRk9SIG49MSBUTyBMRU4oYSQpJiM1ODtjPWMtQVNDKE1JRCQoYSQsbiwxKSkmIzU4O05FWFQNCg0KCQkJSUYgYyZsdDsmZ3Q7MCBUSEVOIEdPVE8gQmFkRnJhbWUgJz8gImJhZCBjaGVja3N1bSAiO3ImIzU4O0dPVE8gQmFkRnJhbWUNCgkJCScgZm9yIHNvbWUgcmVhc29uLCBzbGF2ZXMgY2FsY3VsYXRlIGJhZCBjaGVja3N1bXMgZm9yIGVhY2ggb3RoZXJzIHJlcGx5IHBhY2tldHMuDQoJCQknIGhhdmVuJ3QgZGV0ZXJtaW5lZCB3aHkgYnV0IGl0IGdpdmVzIGEgcXVpY2sgZXhpdCBpZiB0aGUgcGFja2V0IGlzbid0IGZvciBtZQ0KDQoJCQknZGVjb2RlIHZhbGlkIGZyYW1lDQoNCgkJCVRJTUVSPTANCgkJCWEkPURFQ1JZUFQkKGEkKQ0KCQkJZHN0PXZhbChsZWZ0JChhJCwzKSkmIzU4O3NyYz12YWwoTUlEJChhJCw0LDMpKSYjNTg7Y21kJD1NSUQkKGEkLDcsNCkmIzU4O3BsJD1NSUQkKGEkLDExKQ0KDQoJCQlJRiBkc3Q9TXlBZGRyIFRIRU4gJyBzcGVjaWZpYw0KCQkJCXByaW50IHN0ciQoZHN0LDMpOyIgIjtUSU1FJDsiICI7Y21kJDsiICI7cGwkJztUSU1FUg0KDQoJCQkJU0VMRUNUIENBU0UgY21kJA0KCQkJCQlDQVNFICJTVEFUIiAnIG11c3QgcmVwbHkgd2l0aCBpbmZvDQoJCQkJCQlSYWRpb1NlbmQgc3JjLE15QWRkciwiQUNLMCYjNTg7U1RBVCIrQklOJChGTEFHUywzMikrIiYjNTg7TkFNRT0iK015Sm9iKyImIzU4O05UWVA9IitNTS5ERVZJQ0UkKyIsIitTVFIkKE1NLlZFUikNCgkJCQkJQ0FTRSAiUE9MTCIgJyBtYXkgcmVwbHkgd2l0aCBkYXRhDQoJCQkJCQlJRiBGbGFnVGVzdCA2PTAgVEhFTiAnaWYgMSB3ZSBhcmUgd2FpdGluZyBJTklUIHNvIGRvIG5vdCBhbnN3ZXINCgkJCQkJCQlpZiBpbnQocm5kJiM0MjsyKSkmZ3Q7MCBUSEVOICcgZGVjaWRlIHRvIGFuc3dlciBvciBub3QNCgkJCQkJCQkJUmFkaW9TZW5kIHNyYyxNeUFkZHIsIkFDSzAiDQoJCQkJCQkJZW5kIGlmDQoJCQkJCQlFTkQgSUYNCgkJCQkJQ0FTRSAiSU5JVCINCgkJCQkJCUNQVSBSRVNUQVJUDQoJCQkJCUNBU0UgIlNBRkUiDQoJCQkJCQlNb2RlIDUscGwkDQoJCQkJCScgaWdub3JlIGFueXRoaW5nIGVsc2UNCgkJCQlFTkQgU0VMRUNUDQoNCgkJCUVMU0VJRiBkc3Q9OTk5IFRIRU4gJyBicm9hZGNhc3Qgb25seQ0KCQkJCVByaW50IHN0ciQoZHN0LDMpOyIgIjtUSU1FJDsiICI7Y21kJDsiICI7cGwkDQoJCQkJU0VMRUNUIENBU0UgY21kJA0KCQkJCQlDQVNFICJUSU1FIg0KCQkJCQkJSUYgTEVOKHBsJCk9MTkgVEhFTg0KCQkJCQkJCUlGIE1JRCQocGwkLDksMSk9IiwiIFRIRU4NCgkJCQkJCQkJT04gRVJST1IgU0tJUCAxJiM1ODtUSU1FJD1MRUZUJChwbCQsOCkNCgkJCQkJCQkJT04gRVJST1IgU0tJUCAxJiM1ODtEQVRFJD1SSUdIVCQocGwkLDEwKQ0KCQkJCQkJCUVORCBJRg0KCQkJCQkJRU5EIElGDQoJCQkJCUNBU0UgIklOSVQiDQoJCQkJCQlDUFUgUkVTVEFSVA0KCQkJCQlDQVNFICJTQUZFIgknIHNhZmUgbW9kZSBmb3Igd29ya2luZyBvbiBub2RlDQoJCQkJCQlNb2RlIDUscGwkDQoJCQkJCUNBU0UgIkZJUkUiICcgZW1lcmdlbmN5IG1vZGUgLSBpLmUuIGFsbCBub2RlcyB0dXJuIG9uIGxpZ2h0cw0KCQkJCQkJTW9kZSA0LHBsJA0KCQkJCQknIG90aGVyIGJyb2FkY2FzdCBDQVNFcyBnbyBoZXJlDQoJCQkJRU5EIFNFTEVDVA0KCQkJRU5EIElGDQoNCgkJCUdPVE8gU2FmZUV4aXQNCgkJRU5EIElGDQoNCgkJR09UTyBMb29wRW5kDQpCYWRGcmFtZSYjNTg7DQoJJyBpZ25vcmUgaXQNClNhZmVFeGl0JiM1ODsNCglGbHVzaElPKGlvKQ0KTG9vcEVuZCYjNTg7DQoJTE9PUA0KDQoJU1VCIE1vZGUoZmcgYXMgaW50ZWdlcix4JCkNCgkJSUYgeCQ9Ik9GRiIgdGhlbg0KCQkJRmxhZ1JlcyBmZw0KCQlFTFNFDQoJCQlGbGFnU2V0IGZnDQoJCUVORCBJRg0KCUVORCBTVUINCgkNCglGVU5DVElPTiBaUGFkJCh4IEFTIElOVEVHRVIpDQoJCVpQYWQkID0gUklHSFQkKCIwMDAiICsgU1RSJCh4KSwgMykNCglFTkQgRlVOQ1RJT04NCg0KCVNVQiBSYWRpb1NlbmQoZCBBUyBJTlRFR0VSLHMgQVMgSU5URUdFUixtc2cgQVMgU1RSSU5HKQ0KCQlMT0NBTCBTVFJJTkcgcXEkDQoJCUxPQ0FMIElOVEVHRVIgY2hrLG0NCgkJcXEkPVpQYWQkKGQpK1pQYWQkKHMpK21zZw0KCQlGT1IgbT0xIFRPIExFTihxcSQpJiM1ODtjaGs9Y2hrK0FTQyhNSUQkKHFxJCxtLDEpKSYjNTg7TkVYVA0KCQlxcSQ9Q0hSJChTVFgpK0hFWCQoY2hrLDQpK0NIUiQoR1MpK0VOQ1JZUFQkKHFxJCkrQ0hSJChFVFgpDQoJCVBSSU5UJiMzNTtpbywgU1RSSU5HJChEb1ByZWFtYmxlLGNociQoJmFtcDtIRkUpKStxcSQ7DQoJCVBBVVNFIExFTihxcSQpJyB3YWl0IGZvciB0aGUgcGFja2V0IHRvIGdvDQoJRU5EIFNVQg0KDQoJRlVOQ1RJT04gRU5DUllQVCQoQSQpDQoJCUxPQ0FMIE4sUCBBUyBJTlRFR0VSDQoJCUxPQ0FMIEIkDQoJCVA9MQ0KCQlGT1IgTj0xIFRPIExFTihBJCkNCgkJCUIkPUIkK0hFWCQoQVNDKE1JRCQoQSQsTiwxKSwyKSBYT1IgQVNDKE1JRCQoS0VZJCxQLDEpKSwyKQ0KCQkJUD1QKzEmIzU4O0lGIFAmZ3Q7TEVOKEtFWSQpIFRIRU4gUD0xDQoJCU5FWFQNCgkJRU5DUllQVCQ9QiQNCglFTkQgRlVOQ1RJT04NCg0KCUZVTkNUSU9OIERFQ1JZUFQkKEEkKQ0KCQlMT0NBTCBOLFAgQVMgSU5URUdFUg0KCQlMT0NBTCBCJA0KCQlQPTENCgkJRk9SIE49MSBUTyBMRU4oQSQpIFNURVAgMg0KCQkJQiQ9QiQrY2hyJCh2YWwoIiZhbXA7SCIrTUlEJChBJCxOLDIpKSB4b3IgYXNjKE1JRCQoS0VZJCxQLDEpKSkNCgkJCVA9UCsxJiM1ODtJRiBQJmd0O0xFTihLRVkkKSBUSEVOIFA9MQ0KCQlORVhUDQoJCURFQ1JZUFQkPUIkDQoJRU5EIEZVTkNUSU9ODQoNCglTVUIgRmxhZ1NldChiaXQgQVMgSU5URUdFUikNCgkJRkxBR1M9RkxBR1MgT1IgKDJeYml0KQ0KCUVORCBTVUINCg0KCVNVQiBGbGFnUmVzKGJpdCBBUyBJTlRFR0VSKQ0KCQlGTEFHUz0oRkxBR1MgT1IgKDJeYml0KSkgWE9SICgyXmJpdCkNCglFTkQgU1VCDQoNCglGVU5DVElPTiBGbGFnVGVzdChiaXQgQVMgSU5URUdFUikgQVMgSU5URUdFUg0KCQlGbGFnVGVzdD1BQlMoU0dOKEZMQUdTIEFORCAoMl5iaXQpKSkNCglFTkQgRlVOQ1RJT04NCg0KCVNVQiBGbHVzaElPKENIKQ0KCQlMT0NBTCBTVFJJTkcgQSQNCgkJRE8gV0hJTEUgTE9DKCYjMzU7Q0gpJmd0OzANCgkJCUEkPUlOUFVUJChNSU4oTE9DKCYjMzU7Q0gpLDI1NSksJiMzNTtDSCkNCgkJCVBBVVNFIDIwDQoJCUxPT1ANCgkJUj0iIiYjNTg7RkxBR1M9RkxBR1MgQU5EICZhbXA7SEZGRkZGRkZGRkZGRkZGRjgNCglFTkQgU1VCDQoNCg0KDQo8L3ByZT5kZBg/8jSjBdprTydeZUnNydB7nyGR" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="2068001F" />
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBQL07qP3BAKiz/TSAwK3j57gBwLd5ta/BQL9yYWiCVWZkbgJjgZfTC94J7hIY4N1NqW4" />
</div>
		<script type="text/javascript">
<!--
__BaseName = "ctl00_CphMaster_";
__ConfirmMessage = "Are you sure you want to proceed?";
// -->
</script>
		<script type="text/javascript">
		<!--
			function __GetServerElementById(id) {
				return document.getElementById(__BaseName + id);
			}
			function __RequestConfirm() {
				return confirm(__ConfirmMessage);
			}
		// -->
		</script>
    
        <div id="HeaderDiv">
            <div style="float: right;">Welcome <a href="MMBasic.Language.html" class="systemlink" title="Select your language">Guest</a>, you are in: <select class="namespacedropdown" onchange="javascript:var sel = this.value; document.location = (sel != '' ? (sel + '.') : '') + 'Default.aspx';"><option value="">&lt;root&gt;</option><option value="Circuit Ideas">Circuit Ideas</option><option value="Colour MaxiMite 2 (CMM2)">Colour MaxiMite 2 (CMM2)</option><option value="GCB">GCB</option><option value="MicroMite ArmMite and MMX Hardware">MicroMite ArmMite and MMX Hardware</option><option selected="selected" value="MMBasic">MMBasic</option><option value="PIC ASM">PIC ASM</option><option value="Platform Agnostic">Platform Agnostic</option></select> &bull; <a href="MMBasic.Login456b.html?Redirect=http%3a%2f%2ffruitoftheshed.com%2fHistory.aspx%3fNS%3dMMBasic%26Page%3dMMBasic.Short-range-radio-network-not-WiFi-SLAVE-module-Uses-cheapie-433MHz-modules-or-HC-12%26Revision%3d0" class="systemlink" title="Login">Login</a></div><h1>Fruit Of The Shed</h1>
        </div>
                   
        <div id="ContainerDiv">
                 
            <div id="SidebarDiv">
                <div id="SidebarHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="SidebarContentDiv">
                    <div style="float: right;"> </div><h3 class="separator">Navigation (MMBasic)<a class="headeranchor" id="Navigation_NAMESPACE_0" href="#Navigation_NAMESPACE_0" title="Link to this Section">&#0182;</a></h3><ul><li><b><a class="pagelink" href="MMBasic.MainPage.html" title="_MMBasic Code Library">Main Page</a></b></li><li><a class="pagelink" href="MainPage.html" title="Home Page">Main Page (root)</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.EggDrop-part-of-the-original-MMBasic-libraryc674.html" title="Random Page">Random Page</a></li><li><a class="systemlink" href="MMBasic.AllPages.html" title="All Pages">All Pages</a><br /> </li><li><a class="systemlink" href="Logina75d.html" title="Create a new Page">Create a new Page</a><br /></li></ul><br /><ul><li><a class="systemlink" href="Logine894.html" title="Administration">Administration</a></li><li><a class="systemlink" href="MMBasic.Upload.html" title="File Management">File Management</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="My Account">My Account</a><br /></li></ul><br /><ul><li><a class="systemlink" href="MMBasic.Register.html" title="Create Account">Create Account</a><br /></li></ul><br /><small><b>Search the wiki</b></small><br /><br /><script type="text/javascript"><!--
function _DoSearch_SBf63524b4df3e46d58daced6fab3b588b() { document.location = 'MMBasic.Search.aspx?AllNamespaces=1&FilesAndAttachments=1&Query=' + encodeURI(document.getElementById('SBf63524b4df3e46d58daced6fab3b588b').value); }
// -->
</script><input class="txtsearchbox" type="text" id="SBf63524b4df3e46d58daced6fab3b588b" onkeydown="javascript:var keycode; if(window.event) keycode = event.keyCode; else keycode = event.which; if(keycode == 10 || keycode == 13) { _DoSearch_SBf63524b4df3e46d58daced6fab3b588b(); return false; }" /> <big><a href="#" onclick="javascript:_DoSearch_SBf63524b4df3e46d58daced6fab3b588b(); return false;">&raquo;</a></big><br /><br /><br />
                </div>
                <div id="SidebarFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>
            <div id="MainDiv">
                <div id="MainHeaderDiv">
                    <!-- Used for layout purposes only -->
                </div>
                <div id="PageInternalHeaderDiv"></div>
                

    <h1 class="pagetitlesystem">Page History: Short range radio network (not WiFi). SLAVE module. Uses cheapie 433MHz modules or HC-12</h1>
    <p>Compare Page Revisions</p> 
    <select name="ctl00$CphMaster$lstRev1" id="ctl00_CphMaster_lstRev1">
	<option value="0">0</option>

</select>
    <select name="ctl00$CphMaster$lstRev2" id="ctl00_CphMaster_lstRev2">
	<option value="Current">Current</option>
	<option value="0">0</option>

</select>
    <input type="submit" name="ctl00$CphMaster$btnCompare" value="Compare" id="ctl00_CphMaster_btnCompare" />
    <br /><br />
    
    <table class="box" cellpadding="0" cellspacing="0"><tr><td><p style="text-align: center;"><b>&laquo; Older Revision - <a href="MMBasic.Historyfb13.html?Page=MMBasic.Short-range-radio-network-not-WiFi-SLAVE-module-Uses-cheapie-433MHz-modules-or-HC-12">Back to Page History</a> - <a href="MMBasic.Short-range-radio-network-not-WiFi-SLAVE-module-Uses-cheapie-433MHz-modules-or-HC-12.html">Current Revision</a></b></p></td></tr></table><br /><h3 class="separator">Page Revision: 2017/08/03 20:35</h3><br />Stub article - unfinished<br /><br />The following is a protocol I developed for a short range radio network without all the fluff associated with establishing and using a WiFi Ethernet presence. It is a simple star network with a master device initiating all communications to addressed slave modules. Messages may be passed back and forth - the content and interpretation of which is down to the application.<br /><br /><pre>
Master is always address 0
Slaves are address 1 - 998
Broadcast is address 999

Master initiates all communication and slaves only ever respond to Master requests for interaction (STAT or POLL).
Packets consist of a 4 character verb and then the payload.

All devices must be on the same "channel". It was explored that each slave might exist on its own channel but this was abandoned
early on because the cons outweighed the pros&#58;

Separate channel&#58; 	Pro    slave does not need to parse the addresses from the packet - if it hears the packet then it must be for that slave.
                        Con    Broadcast becomes impossible.
                               Device addresses limited to 127.
                               Cheap RxTx modules have no concept of channel.

Single channel&#58;         Pro    Slave address is encoded as part of the packet header with a theoretical maximum of 998 devices. Different channels
                               permit single master with multiple slave zones if required, thus giving &lt; 128000 devices (but broadcast and use of
                               cheapie modules will be impacted).
                               Broadcast is simple - all devices hear the broadcast and pick the addresses from the packet as normal.
                               Can use cheapie 433MHz TxRx pairs with no onboard processing (see preamble).
                        Con    HC-12 module is more expensive


Command		Source  Details
&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-+&#45;&#45;&#45;&#45;&#45;&#45;-+&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
STAT&#58;           Master	Master STATs address.
		        Slave MUST respond within 1.5 seconds and may send back data, thus a STAT contains an implicit POLL.
		        Nil response will result in the slave marked as not available in the status register (master will not POLL).
		        Slave must reply with ACK0 only - If the Slave has more to say, it must wait for a poll.
POLL&#58;           Master	Master POLLs address.
		        Slave may respond but must do so within within 1.5 seconds if it has something to say but keeps quiet otherwise.
ACK0&#58;           Slave	This is the terminating response to a STAT or POLL. This packet will cause the Master to accept the response and
		        move on to the next section of the cycle.
ACK1&#58;           Slave	This is the response to a POLL only but signifies the slave has more to report. This packet will cause the
		        Master to accept the response and then immediately issue another POLL to the same slave. Multiple ACK1's may be
		        sent and the Master will continue to POLL and accept packets until receipt of ACK0 or a timeout occurs, at which
		        point the master will move on to the next section of the cycle. The slave must pause for 1.5 seconds between each
		        ACKx packet.
INIT&#58;		Master	The slave must restart.
SAFE&#58;		Master	The slave must go to its safe mode state.

Broadcasts&#58;	Any packet with destination address 999 is assumed to be a broadcast. Usually only the Master Broadcasts. Slaves must not reply to broadcasts.
TIME&#58;		Master	Is a broadcast only packet. The payload is hh&#58;mm&#58;ss,dd/mm/yyyy
		        All slaves will respond to this packet and synchronise their clocks to the payload.
INIT&#58;		Master	The slave must restart.
SAFE&#58;		Master	The slave must go to its safe mode state.
FIRE&#58;		Master	The slave must go to its FIRE mode state.


Slaves must respond to STAT. The response (or lack of it) updates the internal status register for that slave. Slaves that do not
respond to a STAT will be skipped in the POLL cycle.

Master&#58; STAT (NN)
	Slave&#58;	Must reply with ACK0 (or ACK1 if there are multiple return packets) to the Master. The payload may be empty.

Master&#58;	POLL (nn)
	Slave&#58;	May reply with ACK0 (or ACK1 if there are multiple payloads) to the Master. The payload may be empty but it is
	recommended the slave not respond to a POLL if it has nothing to report. This reduces the cycle time and processing load.

Packet format (master and slave)&#58;
&#91;pp.pp.&#93;STX&lt;checksum&gt;GS&#123;RC4&lt;dest address&gt;&lt;src address&gt;&lt;PackLen&gt;&lt;&lt;Packet&gt;&#125;ETX

the data between the GS and ETX is encrypted before transmission.
RC4 (elsewhere on this wiki) is a complex algorithm with a moderate data requirement (0.5K). A simpler encryption algorithm XORing a
variable length key is available if the simple nature of the slaves cannot support it i.e. simple PIC/Atmel chips. 
Smaller Micromites struggle to maintain the timing constraints with RC4 and large packets - use simple encryption or slow the cycle.

so a typical Tx from the master to device 05 looks like

Preamble      When using cheap TxRx modules with no onboard processing, it is necessary to send a stream of 1's to the Tx so the Rx
              can set it's levels before the actual data arrives. Because of this, some of those bits mat be lost so anything before
              STX must be discarded. Chr FE has a large amount of "1" space and the trailing 0 ensures the levels are set on Rx devices
              immediately before they are required to be accurate. A tring of at least 2 FE chars is effective.
              Using devices like HC-12 where there is onboard processing to assure data integrity, a preamble is not necessary as it is
              taken care of by the radio module.

              &#91;FE FE ...&#93;

Packet structure
              02 = STX, sync marker, only recognised is preceeded by at least two FE bytes
              CHK_HI ascii Hex of checksum of packet between GS and ETX
              CHK_LO
              1D = GS group separator
              &#91;	30 = attention device 005 in ascii
              &#91;	30
              &#91;	35
              &#91;	30 = from the master 000 in ascii
              &#91;	30
              &#91;	30
              &#91;	50 Command verb, STAT, POLL, ACK0 etc...
              &#91;	49
              &#91;	4E
              &#91;	47
              &#91; any message here &#93;
              03 = ETX, end of transmission

Any response must begin transmission in the next 1.5 seconds
</pre><br /><br /><b>Master module.</b><br /><br />You need to add your own code to interpret the content of the packets (both master and slaves) but standardise functionality so the master and slaves know what each other is doing. The master does not have to be a MicroMite - I have working VB code which uses a HC-12 on a USB<->Serial adapter so a Windows server can control the network - this opens up all sorts of possibilities and is used in the Snooker Hall metering for club membership and time charging etc.<br /><br />Slaves and (micromite)master log to their console but this may be disconnected in general use. The modules detect "first run" and will prompt for config (i.e. their address and name - which is usually the location) at the console, after that it stores it's config and just gets on with things. So use the console to set the thing up and then just leave it to run. The modules I built have their console connections brought to a 3.5mm stereo jack which goes to a USB<->Serial jobby plugged in the installers laptop, just plug in to each and turn on, configure and run then unplug and move on to the next.<br /><br />The master "pings" every address from 001 to 998 every so often and if a module responds, it is marked as "live" and recorded along with it's name. Live Slave modules are polled in order for any messages interspersed with the next discovery. So the cycle might look like:<br /><br /><code>Ping 1 (responds)<br />Poll 1<br />Ping 2<br />Poll 1<br />Ping 3 (responds)<br />Poll 3<br />Ping 4<br />Poll 1<br />Ping 5<br />Poll 3<br />Ping 6<br />Poll 1<br />... <br />Ping 998<br />Time</code><br /><br />so only known live salves are regularly polled but newly discovered slaves are added as they are discovered. This ensures that we discover all modules over time but do not delay polling known live modules.<br /><br />At the end of the cycle, a TIME packet is sent on the broadcast address and all slaves set their clocks.<br /><br />INIT messages can be sent to restart an individual module, SAFE messages can be sent to individual or all modules to set them to their safe mode (maybe an engineer is about to open them up and doesn't want a mains circuit up his arm). A FIRE message can be sent to all modules - this sets the module to it's emergency mode - perhaps turn all the lights on, play a recorded message to evacuate the building etc...<br /><br /><br /><b>Slave module. </b><br /><br />You will need to adapt it as you see fit but it works really well and offers some nice features.<br /><br />Slave modules listen for radio transmissions for their address or the broadcast address and respond accordingly. I have used this for a number of different projects: Snooker/Pool table light control, Customer feedback pods etc.<br /><br />The Master initiates all communication and transmits structured and encrypted packets for specific slave addresses. See this article here for details of the protocol.<br /><br />The Master is always address 000 and slaves can be any from 001 to 998 (doesn't have to be contiguous). 999 is the broadcast address. You could easily extend this but probably a thousand slave modules will cover most installations. You don't have to use them all and the master won't waste time trying to talk to addresses that don't respond to discovery.<br /><br />The master also sends out TIME packets so slaves don't need RTCs (much cheapness!), only a single RTC on a network of 1000 modules!<br /><br /><br /><br /><pre>

	OPTION AUTORUN ON

	PRINT "Node boot"
	timer=0

	OPTION BASE 0
	'OPTION EXPLICIT

	CONST KEY$="&gt;4!1x4q3z4+7%4&#123;9?5\3HhH^5$9=6@1~6,7_7|1)7'3&#93;7&#91;9&#58;8&lt;3&#42;8S9I9l7Z1eT0r1"
	CONST GS=&amp;H1D
        CONST STX=2
        CONST ETX=3
	CONST io=1
	CONST DoPreamble=0	' No. of preamble bytes. set to 2+ when using cheap modules (not HC-12) and drop the baud rate below
	CONST Link$="COM1&#58;9600,260"

	DIM MyAddr AS INTEGER
	DIM MyJob AS STRING

	DIM STRING a$, tm$ LENGTH 8, cmd$ LENGTH 4,pl$ LENGTH 115, R LENGTH 255 ' R is the serial buffer
	DIM INTEGER c,src,dst,n
	DIM INTEGER FLAGS=0  ' 0 STX
                             ' 1 GS
                             ' 2 ETX
                             ' 3 Init. device has restarted and never heard from the master
                             ' 4 in FIRE mode
                             ' 5 in SAFE mode
                             ' 6 just been configured
                             ' 7
                             ' 8
                             ' 9
                             '10
                             '11
                             '12
                             '13
                             '14
                             '15
                             '16
                             '17
                             '18
                             '19
                             '20
                             '21
                             '22
                             '23
                             '24
                             '25
                             '26
                             '27
                             '28
                             '29
                             '30
                             '31

	VAR RESTORE
	
	FlagSet 3 ' just booted

	IF MyAddr=0 THEN
		DO
			DO
				INPUT "Enter Node address (1-998) &gt;", a$
				MyAddr=int(val("0"+a$))
			LOOP UNTIL MyAddr &gt;0 AND MyAddr&lt;999

			DO
				INPUT "Enter Node Task Name       &gt;", a$
				MyJob=a$
			LOOP UNTIL MyJob&lt;&gt;""

			PRINT "Is this correct? (Y/N)";
			DO&#58;INPUT a$&#58;a$=UCASE$(a$)&#58;LOOP UNTIL a$="Y" OR a$="N"
		LOOP WHILE a$="N"

		VAR SAVE MyAddr,MyJob
		
		FlagSet 6 ' Just completed setup - need INIT
	END IF

	OPEN Link$ AS &#35;io ' may need to drop this for cheap TxRx modules, HC12 etc do not require
	FlushIO io

	PRINT "Node";MyAddr;" up in";Timer;"mS Name ";MyJob

	DO
		IF LOC(&#35;io)&lt;&gt;0 THEN
			C=ASC(INPUT$(1,&#35;io))
			SELECT CASE C
				CASE 2
					R=""
					IF FLAGS&lt;&gt;0 THEN GOTO SafeExit
					FlagSet 0
				CASE &amp;H1D	' test GS
					IF Flagtest(0)&lt;&gt;1 AND FlagTest(2)&lt;&gt;0 THEN GOTO SafeExit
					FlagSet 1
					R=R+","
				CASE 3
					IF Flagtest(0)&lt;&gt;1 AND FlagTest(2)&lt;&gt;1 THEN GOTO SafeExit
					FlagSet 2
				CASE &amp;H30 TO &amp;h39
					IF Flagtest(0)&lt;&gt;1 THEN GOTO SafeExit ' only accept chars after STX
					R=R+CHR$(C)
				CASE &amp;h41 TO &amp;H46
					IF Flagtest(0)&lt;&gt;1 THEN GOTO SafeExit
					R=R+CHR$(C)
				CASE ELSE
					'ignore anything else
			END SELECT
		END IF

		IF (FLAGS AND 7) = 7 THEN	'STX,GS,ETX


			' check GS position(5)
			c=INSTR(R,",")
			IF c&lt;&gt;5 THEN GOTO BadFrame '? "GS bad position"&#58;

			' data after GS should always be even count
			c=LEN(MID$(R,6))
			IF (c AND 1) THEN GOTO BadFrame '? "Data length is odd"&#58;GOTO BadFrame ' if bit0 set THEN odd number

			'calculate checksum of rec'd data
			c=val("&amp;H" + left$(r,4))
			a$=MID$(R,6) 'payload

			FOR n=1 TO LEN(a$)&#58;c=c-ASC(MID$(a$,n,1))&#58;NEXT

			IF c&lt;&gt;0 THEN GOTO BadFrame '? "bad checksum ";r&#58;GOTO BadFrame
			' for some reason, slaves calculate bad checksums for each others reply packets.
			' haven't determined why but it gives a quick exit if the packet isn't for me

			'decode valid frame

			TIMER=0
			a$=DECRYPT$(a$)
			dst=val(left$(a$,3))&#58;src=val(MID$(a$,4,3))&#58;cmd$=MID$(a$,7,4)&#58;pl$=MID$(a$,11)

			IF dst=MyAddr THEN ' specific
				print str$(dst,3);" ";TIME$;" ";cmd$;" ";pl$';TIMER

				SELECT CASE cmd$
					CASE "STAT" ' must reply with info
						RadioSend src,MyAddr,"ACK0&#58;STAT"+BIN$(FLAGS,32)+"&#58;NAME="+MyJob+"&#58;NTYP="+MM.DEVICE$+","+STR$(MM.VER)
					CASE "POLL" ' may reply with data
						IF FlagTest 6=0 THEN 'if 1 we are waiting INIT so do not answer
							if int(rnd&#42;2))&gt;0 THEN ' decide to answer or not
								RadioSend src,MyAddr,"ACK0"
							end if
						END IF
					CASE "INIT"
						CPU RESTART
					CASE "SAFE"
						Mode 5,pl$
					' ignore anything else
				END SELECT

			ELSEIF dst=999 THEN ' broadcast only
				Print str$(dst,3);" ";TIME$;" ";cmd$;" ";pl$
				SELECT CASE cmd$
					CASE "TIME"
						IF LEN(pl$)=19 THEN
							IF MID$(pl$,9,1)="," THEN
								ON ERROR SKIP 1&#58;TIME$=LEFT$(pl$,8)
								ON ERROR SKIP 1&#58;DATE$=RIGHT$(pl$,10)
							END IF
						END IF
					CASE "INIT"
						CPU RESTART
					CASE "SAFE"	' safe mode for working on node
						Mode 5,pl$
					CASE "FIRE" ' emergency mode - i.e. all nodes turn on lights
						Mode 4,pl$
					' other broadcast CASEs go here
				END SELECT
			END IF

			GOTO SafeExit
		END IF

		GOTO LoopEnd
BadFrame&#58;
	' ignore it
SafeExit&#58;
	FlushIO(io)
LoopEnd&#58;
	LOOP

	SUB Mode(fg as integer,x$)
		IF x$="OFF" then
			FlagRes fg
		ELSE
			FlagSet fg
		END IF
	END SUB
	
	FUNCTION ZPad$(x AS INTEGER)
		ZPad$ = RIGHT$("000" + STR$(x), 3)
	END FUNCTION

	SUB RadioSend(d AS INTEGER,s AS INTEGER,msg AS STRING)
		LOCAL STRING qq$
		LOCAL INTEGER chk,m
		qq$=ZPad$(d)+ZPad$(s)+msg
		FOR m=1 TO LEN(qq$)&#58;chk=chk+ASC(MID$(qq$,m,1))&#58;NEXT
		qq$=CHR$(STX)+HEX$(chk,4)+CHR$(GS)+ENCRYPT$(qq$)+CHR$(ETX)
		PRINT&#35;io, STRING$(DoPreamble,chr$(&amp;HFE))+qq$;
		PAUSE LEN(qq$)' wait for the packet to go
	END SUB

	FUNCTION ENCRYPT$(A$)
		LOCAL N,P AS INTEGER
		LOCAL B$
		P=1
		FOR N=1 TO LEN(A$)
			B$=B$+HEX$(ASC(MID$(A$,N,1),2) XOR ASC(MID$(KEY$,P,1)),2)
			P=P+1&#58;IF P&gt;LEN(KEY$) THEN P=1
		NEXT
		ENCRYPT$=B$
	END FUNCTION

	FUNCTION DECRYPT$(A$)
		LOCAL N,P AS INTEGER
		LOCAL B$
		P=1
		FOR N=1 TO LEN(A$) STEP 2
			B$=B$+chr$(val("&amp;H"+MID$(A$,N,2)) xor asc(MID$(KEY$,P,1)))
			P=P+1&#58;IF P&gt;LEN(KEY$) THEN P=1
		NEXT
		DECRYPT$=B$
	END FUNCTION

	SUB FlagSet(bit AS INTEGER)
		FLAGS=FLAGS OR (2^bit)
	END SUB

	SUB FlagRes(bit AS INTEGER)
		FLAGS=(FLAGS OR (2^bit)) XOR (2^bit)
	END SUB

	FUNCTION FlagTest(bit AS INTEGER) AS INTEGER
		FlagTest=ABS(SGN(FLAGS AND (2^bit)))
	END FUNCTION

	SUB FlushIO(CH)
		LOCAL STRING A$
		DO WHILE LOC(&#35;CH)&gt;0
			A$=INPUT$(MIN(LOC(&#35;CH),255),&#35;CH)
			PAUSE 20
		LOOP
		R=""&#58;FLAGS=FLAGS AND &amp;HFFFFFFFFFFFFFFF8
	END SUB



</pre>
    
    


                <div id="PageInternalFooterDiv"></div>
                <div id="MainFooterDiv">
                    <!-- Used for layout purposes only -->
                </div>
            </div>

        </div>
            
        <div id="FooterDiv">
             
        </div>

    </form>  
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.History.aspx?Page=MMBasic.Short-range-radio-network-not-WiFi-SLAVE-module-Uses-cheapie-433MHz-modules-or-HC-12&Revision=0 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:53:13 GMT -->
</html>
