

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.DS1307-Real-Time-Clock-part-of-the-original-MMBasic-library by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:16:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	DS1307 Real Time Clock - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.DS1307-Real-Time-Clock-part-of-the-original-MMBasic-library" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQF6D48aDEgY2xhc3M9InBhZ2V0aXRsZSI+RFMxMzA3IFJlYWwgVGltZSBDbG9jazwvaDE+PHNtYWxsPk1vZGlmaWVkIG9uIDIwMTYvMTIvMjMgMjM6MjcgYnkgQWRtaW5pc3RyYXRvciAmbWRhc2g7IENhdGVnb3JpemVkIGFzOiBEYXRlcywgVGltZSBhbmQgQ2xvY2tzLCBFbGVjdHJvbmljcywgaTJjLCBfTElCIE9yaWdpbmFsIE1NQmFzaWM8L3NtYWxsPjxiciAvPjxiciAvPjxoMiBjbGFzcz0ic2VwYXJhdG9yIj5UaGlzIG1vZHVsZSBpcyBwYXJ0IG9mIHRoZSBvcmlnaW5hbCBNTUJhc2ljIGxpYnJhcnkuIEl0IGlzIHJlcHJvZHVjZWQgaGVyZSB3aXRoIGtpbmQgcGVybWlzc2lvbiBvZiBIdWdoIEJ1Y2tsZSBhbmQgR2VvZmYgR3JhaGFtLiBCZSBhd2FyZSBpdCBtYXkgcmVmZXJlbmNlIGZ1bmN0aW9uYWxpdHkgd2hpY2ggaGFzIGNoYW5nZWQgb3IgaXMgZGVwcmVjYXRlZCBpbiB0aGUgbGF0ZXN0IHZlcnNpb25zIG9mIE1NQmFzaWMuPGEgY2xhc3M9ImhlYWRlcmFuY2hvciIgaWQ9IlRoaXNfbW9kdWxlX2lzX3BhcnRfb2ZfdGhlX29yaWdpbmFsX01NQmFzaWNfbGlicmFyeV9JdF9pc19yZXByb2R1Y2VkX2hlcmVfd2l0aF9raW5kX3Blcm1pc3Npb25fb2ZfSHVnaF9CdWNrbGVfYW5kX0dlb2ZmX0dyYWhhbV9CZV9hd2FyZV9pdF9tYXlfcmVmZXJlbmNlX2Z1bmN0aW9uYWxpdHlfd2hpY2hfaGFzX2NoYW5nZWRfb3JfaXNfZGVwcmVjYXRlZF9pbl90aGVfbGF0ZXN0X3ZlcnNpb25zX29mX01NQmFzaWNfMCIgaHJlZj0iI1RoaXNfbW9kdWxlX2lzX3BhcnRfb2ZfdGhlX29yaWdpbmFsX01NQmFzaWNfbGlicmFyeV9JdF9pc19yZXByb2R1Y2VkX2hlcmVfd2l0aF9raW5kX3Blcm1pc3Npb25fb2ZfSHVnaF9CdWNrbGVfYW5kX0dlb2ZmX0dyYWhhbV9CZV9hd2FyZV9pdF9tYXlfcmVmZXJlbmNlX2Z1bmN0aW9uYWxpdHlfd2hpY2hfaGFzX2NoYW5nZWRfb3JfaXNfZGVwcmVjYXRlZF9pbl90aGVfbGF0ZXN0X3ZlcnNpb25zX29mX01NQmFzaWNfMCIgdGl0bGU9IkxpbmsgdG8gdGhpcyBTZWN0aW9uIj4mIzAxODI7PC9hPjwvaDI+PGI+Tm90ZTwvYj46IEFueSByZXF1aXJlZCBmaWxlKHMpIGFyZSBhdmFpbGFibGUgaW4gdGhlIGF0dGFjaG1lbnRzIHRhYiAodG9wIHJpZ2h0KS48YnIgLz48YnIgLz48Yj5JMkNUaW1lLkJBUzwvYj48YnIgLz48cHJlPg0KJyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyBQcm9ncmFtIGZvciBzZXR0aW5nIGFuZCByZWFkaW5nIHRpbWUgb24gRFMxMzA3IFJlYWwgVGltZSBDbG9jaw0KJyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyBBdXRob3ImIzU4OyBJYW4gUXVpcmsgDQogQ0xTDQoNCiBJTlBVVCAiRG8geW91IHdhbnQgdG8gc2V0IHRoZSBleHRlcm5hbCBjbG9jayI7IHRlbXAkDQogaWYgdGVtcCQgJmx0OyZndDsgInkiIGFuZCB0ZW1wJCAmbHQ7Jmd0OyAiWSIgR09UTyBSZWFkdGltZQ0KIFN0YXJ0X2kyY19jbG9jaw0KIElOUFVUICJEbyB5b3Ugd2FudCB0byBzZXQgVGltZSAoVCkgRGF0ZSAoRCkgb3IgQm90aCAoQikiOyB0ZW1wJA0KIGlmIHRlbXAkID0gIlQiIG9yIHRlbXAkID0gInQiIHRoZW4NCiBTZXRUaW1lDQogZWxzZWlmIHRlbXAkID0gIkQiIG9yIHRlbXAkID0gImQiIHRoZW4NCiBTZXREYXRlDQogRWxzZUlmIHRlbXAkID0gIkIiIG9yIHRlbXAkID0gImIiIHRoZW4NCiBTZXRUaW1lDQogU2V0RGF0ZQ0KICBFTkRJRg0KJyBDTFMNClJlYWR0aW1lJiM1ODsNCiBkZWxheSA9IDEwMDAwDQogDQpETyBXSElMRSBhJCA9ICIiDQogICBhJCA9IElOS0VZJA0KIHJlYWRfaTJjUlRDIChtaW51dGVzLGhvdXJzLGRheXMsbW9udGhzLHllYXIpDQogIA0KICAgJ0xPQ0FURSA1MCwgNTANCiAgIFBSSU5UICJDb25maXJtaW5nIEkyQyBUaW1lIg0KICAgUFJJTlQgSG91cnM7IiYjNTg7ICI7bWludXRlczsiICAgIjtkYXlzOyIvIjttb250aHM7Ii8iO3llYXIrMjAwMA0KICAgUFJJTlQgImludGVybmFsIHRpbWUiDQogICBwcmludCBUSU1FJCwgREFURSQNCiAgIFBBVVNFIGRlbGF5DQogTE9PUA0KCSYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsNCidnZXQgdGltZSBzdWJyb3V0aW5lICBpbnNlcnQgdGhpcyBzdWJyb3V0aW5lIHRvIHNldCBNYXhpbWl0ZSB0aW1lIGZyb20gZHNpMzA3DQonIHJlYWRpMmNSVEMgYW5kIGJjZF9iaW4gYWxzbyByZXF1aXJlZC4NCiYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5Ow0KICBHZXRUaW1lJiM1ODsgICAgICAgICAgJyBHZXQgdGltZSBhbmQgZGF0ZQ0KICByZWFkX2kyY1JUQyAobWludXRlcyxob3VycyxkYXlzLG1vbnRocyx5ZWFyKQ0KICBpbiQgPSBGT1JNQVQkKGRheXMpKyItIisgRk9STUFUJChtb250aHMpICsiLSIrIEZPUk1BVCQoeWVhcisyMDAwKQ0KICAgICBEYXRlJCA9IGluJA0KICAgIGluJCA9IEZPUk1BVCQoSG91cnMpICsiJiM1ODsiKyBGT1JNQVQkKG1pbnV0ZXMpDQogICAgIFRpbWUkID0gaW4kDQogICAgIFJldHVybg0KDQomIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7DQonc2V0IHRpbWUgc3Vicm91dGluZQ0KJiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7DQogU1VCIFNldFRpbWUmIzU4OyAgICAgICAgICAnIHNldCB0aW1lIA0KICBsb2NhbCB0MSQsIGhycywgbWlucw0KICBQcmludCAiRW50ZXIgVGltZSAgSEggJiM1ODsgTU0gIg0KICBJbnB1dCBpbiQNCiAgIFRpbWUkID0gaW4kDQogIHQxJCA9ICImYW1wO2giK0xFRlQkKGluJCwyKQ0KICBocnMgPSBWQUwodDEkKQ0KICB0MSQgPSAiJmFtcDtoIitSSUdIVCQoaW4kLDIpDQogIG1pbnMgPSBWQUwodDEkKQ0KJyBiaW5fYmNkIChtaW5zLGhycykgDQoJcHJpbnQgaHJzOyImIzU4OyAiO21pbnMsDQoJIFNldF9pMmNSVEMgKCAxLG1pbnMsaHJzLDApDQoJIA0KICAgICBFTkQgU1VCDQogICAgIA0KCSAJJiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5Ow0KJ3NldCBEYXRlIHN1YnJvdXRpbmUNCiYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5OyYjMzk7JiMzOTsmIzM5Ow0KIFNVQiBTZXREYXRlJiM1ODsgICAgICAgICAgJyBzZXQgIGRhdGUNCiAgbG9jYWwgdDEkLCB0ZW1wLCBpbiQNCiAgUHJpbnQgIkVudGVyIERhdGUgREQvTU0vWVkgIg0KICBJbnB1dCBpbiQNCiAgdDEkID0gIiZhbXA7aCIrTEVGVCQoaW4kLDIpICAgJyBtYWtlIGVxdWl2ZWxlbnQgaGV4IHN0cmluZyA9IEJDRA0KICBkeXMgPSBWQUwodDEkKQ0KICB0MSQgPSAiJmFtcDtoIittaWQkKGluJCw0LDIpDQogIG10aHMgPSBWQUwodDEkKQ0KICB0MSQgPSAiJmFtcDtoIitSSUdIVCQoaW4kLDIpDQogIHlyID0gVkFMKHQxJCkNCiAgRGF0ZSQgPSAoTEVGVCQoaW4kLDYpICsiMjAiK1JJR0hUJChpbiQsMikpDQoJIHRlbXAgPSAwDQogICBTZXRfaTJjUlRDICggNCxkeXMsbXRocyx5cikNCiAgICAgRU5EIFNVQg0KICAgJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Ow0KJyBJbml0YWxpc2UgUlRDIGFuZCB0dXJtIG9mZiBzcXVhcmUgd2F2ZSBvdXQgYW5kIHplcjAgU2Vjb25kcyByZWdlc3RlcnMgIA0KJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Oy0gDQogICBTVUIgU3RhcnRfaTJjX2Nsb2NrJiM1ODsNCiAgIEkyQ0VOIDEwMCwgMTAwCQkJJyBpMmMgZW5hYmxlIDEwMGtIeiwgMTAwbXMgdGltZW91dA0KICBJMkNTRU5EICAmYW1wO2g2OCwgMCwgMiwwLDAJJyBpMmMgc2VuZCBhZHJlc3MsIG9wdGlvbiwgc2VuZCBsZW5ndGgsIGRhdGEsZGF0YS4uDQogICBJMkNTRU5EICAmYW1wO2g2OCwgMCwgMiw3LDAJJyBpMmMgc2VuZCBhZHJlc3MsIG9wdGlvbiwgc2VuZCBsZW5ndGgsIGRhdGEsZGF0YS4uDQogIEkyQ0RJUwkJCScgaTJjIGRpc2FibGUgICANCiAgICAgIEVORCBTVUINCiAgJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Oy0NCicmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyO1N1YiB0byBSZWFkIERTMTMwNyBSVEMgYW5kIHJldHVybiAmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOw0KJyAgICAgICBNaW51dGVzDQonICAgICAgIEhvdXJzDQonICAgICAgIERhdGUgKGRheSBvZiBNb250aCkNCicgICAgICAgTW9udGgNCicgICAgICAgWWVhciAoIDIgZGlkZ2V0IGNhbiBhZGQgMjAgdG8gZnJvbnQpDQonJiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyAgDQogIFNVQiByZWFkX2kyY1JUQyAobWluLGhycyxkeXMsbXRoLHlyKQ0KICBMb2NhbCB0ZW1wKDgpLCB0bXANCiAnIE1TYiBCaXQ2IEJpdDUgQml0NCBCaXQzIEJpdDIgQml0MSBMU2INCiBJMkNFTiAxMDAsIDEwMAkJCScgaTJjIGVuYWJsZSAxMDBrSHosIDIwMG1zIHRpbWVvdXQNCiBJMkNSQ1YgJmFtcDtoNjgsIDAsIDYsIHRlbXAoMCksMSwmYW1wO2gwMQkJJyBpMmMgcmVhZCBhZHJlc3MsIG9wdGlvbiwgcmVjaWV2ZSBsZW5ndGgsIHJlYyBidWZmZXINCiBwcmludCAiUmVzdWx0ID0gIjsgTU0uaTJjDQogSTJDRElTCQkJJyBpMmMgZGlzYWJsZQ0KCXRtcCA9IHRlbXAoMCkNCiAgYmNkX2JpbiAodG1wLG1pbikNCgl0bXAgPSB0ZW1wKDEpDQogIGJjZF9iaW4gKHRtcCxocnMpDQoJdG1wID0gdGVtcCgzKQ0KICBiY2RfYmluICh0bXAsZHlzKQ0KCXRtcCA9IHRlbXAoNCkNCiAgYmNkX2JpbiAodG1wLG10aCkNCgl0bXAgID0gdGVtcCg1KQ0KICBiY2RfYmluICh0bXAseXIpDQogDQogICBFTkQgU1VCDQogICANCiAnJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsNCicmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjtTdWIgUHJvY2VkdXJlIFdyaXRlIGRhdGEgdG8gRFMxMzIwNyBSVEMmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7DQonJiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7LSANCiAgICBTVUIgU2V0X2kyY1JUQyAoU0FkcnMsRGF0MSxEYXQyLERhdDMpDQogIExvY2FsIHRlbXAoNCkgDQogICB0ZW1wKDApID0gU0FkcnMNCgkgIHRlbXAoMSkgPSBEYXQxDQoJICB0ZW1wKDIpID0gRGF0Mg0KICAgIHRlbXAoMykgPSAgRGF0Mw0KICAgIHByaW50DQogICAgcHJpbnQgdGVtcCgwKSwgdGVtcCgxKSwgdGVtcCgyKSwgdGVtcCgzKQ0KICcgTVNiIEJpdDYgQml0NSBCaXQ0IEJpdDMgQml0MiBCaXQxIExTYg0KIEkyQ0VOIDEwMCwgMTAwCQkJJyBpMmMgZW5hYmxlIDEwMGtIeiwgMTAwbXMgdGltZW91dA0KIEkyQ1NFTkQgJmFtcDtoNjgsIDAsIDIsdGVtcCgwKQkJJyBpMmMgc2VuZCBhZHJlc3MsIG9wdGlvbiwgc2VuZCBsZW5ndGgsIGRhdGEsZGF0YS4uDQogIEkyQ0RJUwkJCScgaTJjIGRpc2FibGUNCiAgRU5EIFNVQg0KICANCicmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1Oy0NCicmIzQyOyYjNDI7JiM0MjsmIzQyOyYjNDI7IFN1YiBQcm9jZWR1cmUgLSBjb252ZXJ0IEJDRCB0byBiaW5hcnkgJiM0MjsmIzQyOyYjNDI7JiM0MjsmIzQyOw0KJyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7JiM0NTsmIzQ1OyYjNDU7DQpTVUIgYmNkX2JpbiAoVmFsLFZvdXQpDQpsb2NhbCB0ZW1wDQoJJyBjb252ZXJ0IHRoZSBEUzEzMDcgQkNEIHZhbHVlcyB0byBiaW5hcnkNCgl0ZW1wID0gdmFsIEFORCAmYW1wO2IwMDAwMTExMQ0KCVZvdXQgPSAodmFsIEFORCAmYW1wO2IxMTExMDAwMCkgJiM0MjsgMTAgLyAxNiArIHRlbXANCgkNCiAJRU5EIFNVQg0KDQo8L3ByZT48YnIgLz5kZBFGWNqFG33pjaRLdjoatuz866GK" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">DS1307 Real Time Clock</h1><small>Modified on 2016/12/23 23:27 by Administrator &mdash; Categorized as: Dates, Time and Clocks, Electronics, i2c, _LIB Original MMBasic</small><br /><br /><h2 class="separator">This module is part of the original MMBasic library. It is reproduced here with kind permission of Hugh Buckle and Geoff Graham. Be aware it may reference functionality which has changed or is deprecated in the latest versions of MMBasic.<a class="headeranchor" id="This_module_is_part_of_the_original_MMBasic_library_It_is_reproduced_here_with_kind_permission_of_Hugh_Buckle_and_Geoff_Graham_Be_aware_it_may_reference_functionality_which_has_changed_or_is_deprecated_in_the_latest_versions_of_MMBasic_0" href="#This_module_is_part_of_the_original_MMBasic_library_It_is_reproduced_here_with_kind_permission_of_Hugh_Buckle_and_Geoff_Graham_Be_aware_it_may_reference_functionality_which_has_changed_or_is_deprecated_in_the_latest_versions_of_MMBasic_0" title="Link to this Section">&#0182;</a></h2><b>Note</b>: Any required file(s) are available in the attachments tab (top right).<br /><br /><b>I2CTime.BAS</b><br /><pre>
'&#42;&#42;&#42;&#42;&#42;&#42; Program for setting and reading time on DS1307 Real Time Clock
'&#42;&#42;&#42;&#42;&#42;&#42; Author&#58; Ian Quirk 
 CLS

 INPUT "Do you want to set the external clock"; temp$
 if temp$ &lt;&gt; "y" and temp$ &lt;&gt; "Y" GOTO Readtime
 Start_i2c_clock
 INPUT "Do you want to set Time (T) Date (D) or Both (B)"; temp$
 if temp$ = "T" or temp$ = "t" then
 SetTime
 elseif temp$ = "D" or temp$ = "d" then
 SetDate
 ElseIf temp$ = "B" or temp$ = "b" then
 SetTime
 SetDate
  ENDIF
' CLS
Readtime&#58;
 delay = 10000
 
DO WHILE a$ = ""
   a$ = INKEY$
 read_i2cRTC (minutes,hours,days,months,year)
  
   'LOCATE 50, 50
   PRINT "Confirming I2C Time"
   PRINT Hours;"&#58; ";minutes;"   ";days;"/";months;"/";year+2000
   PRINT "internal time"
   print TIME$, DATE$
   PAUSE delay
 LOOP
	&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;
'get time subroutine  insert this subroutine to set Maximite time from dsi307
' readi2cRTC and bcd_bin also required.
&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;
  GetTime&#58;          ' Get time and date
  read_i2cRTC (minutes,hours,days,months,year)
  in$ = FORMAT$(days)+"-"+ FORMAT$(months) +"-"+ FORMAT$(year+2000)
     Date$ = in$
    in$ = FORMAT$(Hours) +"&#58;"+ FORMAT$(minutes)
     Time$ = in$
     Return

&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;
'set time subroutine
&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;
 SUB SetTime&#58;          ' set time 
  local t1$, hrs, mins
  Print "Enter Time  HH &#58; MM "
  Input in$
   Time$ = in$
  t1$ = "&amp;h"+LEFT$(in$,2)
  hrs = VAL(t1$)
  t1$ = "&amp;h"+RIGHT$(in$,2)
  mins = VAL(t1$)
' bin_bcd (mins,hrs) 
	print hrs;"&#58; ";mins,
	 Set_i2cRTC ( 1,mins,hrs,0)
	 
     END SUB
     
	 	&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;
'set Date subroutine
&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;
 SUB SetDate&#58;          ' set  date
  local t1$, temp, in$
  Print "Enter Date DD/MM/YY "
  Input in$
  t1$ = "&amp;h"+LEFT$(in$,2)   ' make equivelent hex string = BCD
  dys = VAL(t1$)
  t1$ = "&amp;h"+mid$(in$,4,2)
  mths = VAL(t1$)
  t1$ = "&amp;h"+RIGHT$(in$,2)
  yr = VAL(t1$)
  Date$ = (LEFT$(in$,6) +"20"+RIGHT$(in$,2))
	 temp = 0
   Set_i2cRTC ( 4,dys,mths,yr)
     END SUB
   '&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
' Initalise RTC and turm off square wave out and zer0 Seconds regesters  
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;- 
   SUB Start_i2c_clock&#58;
   I2CEN 100, 100			' i2c enable 100kHz, 100ms timeout
  I2CSEND  &amp;h68, 0, 2,0,0	' i2c send adress, option, send length, data,data..
   I2CSEND  &amp;h68, 0, 2,7,0	' i2c send adress, option, send length, data,data..
  I2CDIS			' i2c disable   
      END SUB
  '&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-
'&#42;&#42;&#42;&#42;&#42;&#42;&#42;Sub to Read DS1307 RTC and return &#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;
'       Minutes
'       Hours
'       Date (day of Month)
'       Month
'       Year ( 2 didget can add 20 to front)
'&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;  
  SUB read_i2cRTC (min,hrs,dys,mth,yr)
  Local temp(8), tmp
 ' MSb Bit6 Bit5 Bit4 Bit3 Bit2 Bit1 LSb
 I2CEN 100, 100			' i2c enable 100kHz, 200ms timeout
 I2CRCV &amp;h68, 0, 6, temp(0),1,&amp;h01		' i2c read adress, option, recieve length, rec buffer
 print "Result = "; MM.i2c
 I2CDIS			' i2c disable
	tmp = temp(0)
  bcd_bin (tmp,min)
	tmp = temp(1)
  bcd_bin (tmp,hrs)
	tmp = temp(3)
  bcd_bin (tmp,dys)
	tmp = temp(4)
  bcd_bin (tmp,mth)
	tmp  = temp(5)
  bcd_bin (tmp,yr)
 
   END SUB
   
 '&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
'&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;Sub Procedure Write data to DS13207 RTC&#42;&#42;&#42;&#42;&#42;&#42;&#42;&#42;
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;- 
    SUB Set_i2cRTC (SAdrs,Dat1,Dat2,Dat3)
  Local temp(4) 
   temp(0) = SAdrs
	  temp(1) = Dat1
	  temp(2) = Dat2
    temp(3) =  Dat3
    print
    print temp(0), temp(1), temp(2), temp(3)
 ' MSb Bit6 Bit5 Bit4 Bit3 Bit2 Bit1 LSb
 I2CEN 100, 100			' i2c enable 100kHz, 100ms timeout
 I2CSEND &amp;h68, 0, 2,temp(0)		' i2c send adress, option, send length, data,data..
  I2CDIS			' i2c disable
  END SUB
  
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-
'&#42;&#42;&#42;&#42;&#42; Sub Procedure - convert BCD to binary &#42;&#42;&#42;&#42;&#42;
'&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
SUB bcd_bin (Val,Vout)
local temp
	' convert the DS1307 BCD values to binary
	temp = val AND &amp;b00001111
	Vout = (val AND &amp;b11110000) &#42; 10 / 16 + temp
	
 	END SUB

</pre><br />
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.DS1307-Real-Time-Clock-part-of-the-original-MMBasic-library by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:16:05 GMT -->
</html>
