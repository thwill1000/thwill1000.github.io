

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.ColourMM-Sprites-test-part-of-the-original-MMBasic-library by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:14:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	ColourMM Sprites test - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.ColourMM-Sprites-test-part-of-the-original-MMBasic-library" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQF0CE8aDEgY2xhc3M9InBhZ2V0aXRsZSI+Q29sb3VyTU0gU3ByaXRlcyB0ZXN0PC9oMT48c21hbGw+TW9kaWZpZWQgb24gMjAxNi8xMi8yMyAyMzoyMiBieSBBZG1pbmlzdHJhdG9yICZtZGFzaDsgQ2F0ZWdvcml6ZWQgYXM6IEdyYXBoaWNzLCBfTElCIE9yaWdpbmFsIE1NQmFzaWM8L3NtYWxsPjxiciAvPjxiciAvPjxoMiBjbGFzcz0ic2VwYXJhdG9yIj5UaGlzIG1vZHVsZSBpcyBwYXJ0IG9mIHRoZSBvcmlnaW5hbCBNTUJhc2ljIGxpYnJhcnkuIEl0IGlzIHJlcHJvZHVjZWQgaGVyZSB3aXRoIGtpbmQgcGVybWlzc2lvbiBvZiBIdWdoIEJ1Y2tsZSBhbmQgR2VvZmYgR3JhaGFtLiBCZSBhd2FyZSBpdCBtYXkgcmVmZXJlbmNlIGZ1bmN0aW9uYWxpdHkgd2hpY2ggaGFzIGNoYW5nZWQgb3IgaXMgZGVwcmVjYXRlZCBpbiB0aGUgbGF0ZXN0IHZlcnNpb25zIG9mIE1NQmFzaWMuPGEgY2xhc3M9ImhlYWRlcmFuY2hvciIgaWQ9IlRoaXNfbW9kdWxlX2lzX3BhcnRfb2ZfdGhlX29yaWdpbmFsX01NQmFzaWNfbGlicmFyeV9JdF9pc19yZXByb2R1Y2VkX2hlcmVfd2l0aF9raW5kX3Blcm1pc3Npb25fb2ZfSHVnaF9CdWNrbGVfYW5kX0dlb2ZmX0dyYWhhbV9CZV9hd2FyZV9pdF9tYXlfcmVmZXJlbmNlX2Z1bmN0aW9uYWxpdHlfd2hpY2hfaGFzX2NoYW5nZWRfb3JfaXNfZGVwcmVjYXRlZF9pbl90aGVfbGF0ZXN0X3ZlcnNpb25zX29mX01NQmFzaWNfMCIgaHJlZj0iI1RoaXNfbW9kdWxlX2lzX3BhcnRfb2ZfdGhlX29yaWdpbmFsX01NQmFzaWNfbGlicmFyeV9JdF9pc19yZXByb2R1Y2VkX2hlcmVfd2l0aF9raW5kX3Blcm1pc3Npb25fb2ZfSHVnaF9CdWNrbGVfYW5kX0dlb2ZmX0dyYWhhbV9CZV9hd2FyZV9pdF9tYXlfcmVmZXJlbmNlX2Z1bmN0aW9uYWxpdHlfd2hpY2hfaGFzX2NoYW5nZWRfb3JfaXNfZGVwcmVjYXRlZF9pbl90aGVfbGF0ZXN0X3ZlcnNpb25zX29mX01NQmFzaWNfMCIgdGl0bGU9IkxpbmsgdG8gdGhpcyBTZWN0aW9uIj4mIzAxODI7PC9hPjwvaDI+PGI+Tm90ZTwvYj46IFRoZSByZXF1aXJlZCBmaWxlKHMpIGFyZSBhdmFpbGFibGUgaW4gdGhlIGF0dGFjaG1lbnRzIHRhYiAodG9wIHJpZ2h0KS48YnIgLz48YnIgLz5Db2xvdXIgTWF4aW1pdGUgVjQuMCBEZW1vcyBmcm9tIEZhYnJpY2UgTXVsbGVyLCBGcmFuY2U8YnIgLz48YnIgLz48Yj5TcHJpdGVzMzwvYj46PGJyIC8+SXQgd2FzIG9uZSBvZiBteSBmaXJzdCB0ZXN0cyBvZiBTcHJpdGVzIGFuZCBCbGl0dGVyIGF0IHNhbWUgdGltZSBhbmQgbXVzaWMgbW9kdWxlcyBmb3IgdGhlIGJhY2tncm91bmQgbXVzaWMuIEhlcmUgaXQncyBub3RoaW5nIHRvIGRvLiBKdXN0IGxvb2sgYXQgdGhlIHNvdXJjZSB0byBsZWFybiBob3cgdG8gdXNlIGV2ZXJ5dGhpbmcgdG9nZXRoZXIuPGJyIC8+PGJyIC8+RG9uJ3QgZm9yZ2V0IHRvIGNvcHkgdGhlICoubW9kIGZpbGVzIHRvICJhOiIgYmVmb3JlIHN0YXJ0aW5nIHRoZSBkZW1vcyB0aGF0IG5lZWQgdGhlbS48YnIgLz48YnIgLz48cHJlPg0KJ0NvbG91ck1NIFNwcml0ZXMgdGVzdA0KT3B0aW9uIEJhc2UgMQ0KRGltIFNwck51bSg1KQ0KRGltIFhDb29yZCg1KQ0KRGltIFlDb29yZCg1KQ0KRGltIFNwckRpcig1KQ0KRGltIFBpeENvbCg1KQ0KRGltIFBpeExSKDUpDQpEaW0gTGVtUnVuKDUpDQpTY3JlZW5ZID0gMA0KU2NyZWVuRGlyID0gMQ0KTW9kTnVtID0gMQ0KU3ByT2ZmcyA9IDE2DQpOdW1TcHJpdGVzID0gNQ0KTWF4U3ByID0gNQ0KTW9kZSA0DQpDbHMNCkRyaXZlICJiJiM1ODsiDQpMb2FkQk1QICJsZXZlbDAwMS5ibXAiLDAsU2NyZWVuWSArIDINClNwcml0ZSBMb2FkICJsZW1taW5ncy5zcHIiDQpSYW5kb21pemUgVGltZXINCkZvciBhID0gMSBUbyBNYXhTcHINCiBTcHJOdW0oYSkgPSAxICsgKFNwck9mZnMgJiM0MjsgKGEtMSkpDQogU3ByRGlyKGEpID0gMQ0KIFhDb29yZChhKSA9IDUyDQogWUNvb3JkKGEpID0gMzUNCiBQaXhDb2woYSkgPSAwDQogUGl4TFIoYSkgPSAwDQogTGVtUnVuKGEpID0gMA0KTmV4dCBhDQpNYXhTcHIgPSAxDQpUaW1lciA9IDANCkRyaXZlICJhJiM1ODsiDQpQbGF5TU9EICJ0cmFja18wMS5tb2QiDQpEbyBXaGlsZSAxDQogSWYgKE1vZE51bSA9IDEpIEFuZCAoVGltZXIgJmd0Oz0gNTMwMDApIFRoZW4NCiAgUGxheU1PRCBzdG9wDQogIE1vZE51bSA9IDINCiAgVGltZXIgPSAwDQogIFBsYXlNT0QgInRyYWNrXzAzLm1vZCINCiBFbmRJZg0KIElmIChNb2ROdW0gPSAyKSBBbmQgKFRpbWVyICZndDs9IDUzMDAwKSBUaGVuDQogIFBsYXlNT0Qgc3RvcA0KICBNb2ROdW0gPSAzDQogIFRpbWVyID0gMA0KICBQbGF5TU9EICJ0cmFja18wOS5tb2QiDQogRW5kSWYNCiBJZiAoTW9kTnVtID0gMykgQW5kIChUaW1lciAmZ3Q7PSA2MDkwMCkgVGhlbg0KICBQbGF5TU9EIHN0b3ANCiAgTW9kTnVtID0gMQ0KICBUaW1lciA9IDANCiAgUGxheU1PRCAidHJhY2tfMDEubW9kIg0KIEVuZElmDQogSWYgTWF4U3ByICZsdDsgTnVtU3ByaXRlcyBUaGVuDQogIElmIFRpbWVyICZndDsgMTUwMCBBbmQgTWF4U3ByID0gMSBUaGVuIE1heFNwciA9IDINCiAgSWYgVGltZXIgJmd0OyAzMDAwIEFuZCBNYXhTcHIgPSAyIFRoZW4gTWF4U3ByID0gMw0KICBJZiBUaW1lciAmZ3Q7IDQ1MDAgQW5kIE1heFNwciA9IDMgVGhlbiBNYXhTcHIgPSA0DQogIElmIFRpbWVyICZndDsgNjAwMCBBbmQgTWF4U3ByID0gNCBUaGVuIE1heFNwciA9IDUNCiBFbmRJZg0KIEZvciBhID0gMSBUbyBNYXhTcHINCiAgUGl4Q29sKGEpID0gUGl4ZWwoWENvb3JkKGEpICsgOCxZQ29vcmQoYSkgKyAxNyArIFNjcmVlblkpDQogIElmIFNwckRpcihhKSA9IDEgVGhlbg0KICAgUGl4TFIoYSkgPSBQaXhlbChYQ29vcmQoYSkgKyAxMixZQ29vcmQoYSkgKyA1ICsgU2NyZWVuWSkNCiAgIElmIChQaXhMUihhKSAmbHQ7Jmd0OyAwKSBPciAoWENvb3JkKGEpICZndDsgKE1NLkhSZXMgLSAxMCkpIFRoZW4NCiAgICBTcHJEaXIoYSkgPSAtMQ0KICAgIFNwck51bShhKSA9IDkgKyAoU3ByT2ZmcyAmIzQyOyAoYS0xKSkNCiAgIEVuZElmDQogIEVsc2UNCiAgIFBpeExSKGEpID0gUGl4ZWwoWENvb3JkKGEpICsgNCxZQ29vcmQoYSkgKyA1ICsgU2NyZWVuWSkNCiAgIElmIChQaXhMUihhKSAmbHQ7Jmd0OyAwKSBPciAoWENvb3JkKGEpICZsdDsgLTUpIFRoZW4NCiAgICBTcHJEaXIoYSkgPSAxDQogICAgU3ByTnVtKGEpID0gMSArIChTcHJPZmZzICYjNDI7IChhLTEpKQ0KICAgRW5kSWYNCiAgRW5kSWYNCiBOZXh0IGENCiBGb3IgYSA9IDEgVG8gTWF4U3ByDQogIFNwcml0ZSBvbiBTcHJOdW0oYSksIFhDb29yZChhKSAsIFlDb29yZChhKSArIFNjcmVlblkNCiBOZXh0IGENCiBTY3JlZW5ZID0gU2NyZWVuWSArIFNjcmVlbmRpcg0KIElmIFNjcmVlblkgJmd0OyA1MCBUaGVuIFNjcmVlbkRpciA9IC0xDQogSWYgU2NyZWVuWSAmbHQ7IDIgVGhlbiBTY3JlZW5EaXIgPSAxDQogRG8gV2hpbGUgKFRpbWVyIE1vZCA5MCkgJmx0OyA4MA0KIExvb3ANCiBGb3IgYSA9IE1heFNwciBUbyAxIFN0ZXAgLTENCiAgU3ByaXRlIG9mZiBTcHJOdW0oYSkNCiBOZXh0IGENCiBCTElUIDAsU2NyZWVuWSAsMCxTY3JlZW5ZICsgU2NyZWVuRGlyLE1NLkhSZXMsMTU0DQogRm9yIGEgPSAxIFRvIE1heFNwcg0KICBJZiBMZW1SdW4oYSkgPSAxIFRoZW4NCiAgIFNwck51bShhKSA9IFNwck51bShhKSArIDENCiAgRW5kSWYNCiAgSWYgU3ByRGlyKGEpID0gMSBUaGVuDQogICBJZiBTcHJOdW0oYSkgJmd0OyAoOCArIChTcHJPZmZzICYjNDI7IChhLTEpKSkgVGhlbiBTcHJOdW0oYSkgPSAxICsgKFNwck9mZnMgJiM0MjsgKGEtMSkpDQogIEVsc2UNCiAgIElmIFNwck51bShhKSAmZ3Q7ICgxNiArKFNwck9mZnMgJiM0MjsgKGEtMSkpKSBUaGVuIFNwck51bShhKSA9IDkgKyAoU3ByT2ZmcyAmIzQyOyAoYS0xKSkNCiAgRW5kSWYNCiBOZXh0IGENCiBGb3IgYSA9IDEgVG8gTWF4U3ByDQogIElmIExlbVJ1bihhKSA9IDEgVGhlbg0KICAgWENvb3JkKGEpID0gWENvb3JkKGEpICsgU3ByRGlyKGEpDQogICBJZiBQaXhDb2woYSkgJmx0OyZndDsgMCBUaGVuDQogICAgJ0xlbW1pbmcgaGF2ZSB0byBnbyB1cA0KICAgICAgIFlDb29yZChhKSA9IFlDb29yZChhKSAtIDENCiAgIEVsc2UNCiAgICAnTGVtbWluZyBoYXZlIHRvIGdvIGRvd24NCiAgICAgICBZQ29vcmQoYSkgPSBZQ29vcmQoYSkgKyAxDQogICBFbmRJZg0KICBFbHNlDQogICBJZiBQaXhDb2woYSkgJmx0OyZndDsgMCBUaGVuDQogICAgTGVtUnVuKGEpID0gMQ0KICAgRWxzZQ0KICAgIFlDb29yZChhKSA9IFlDb29yZChhKSArIDINCiAgIEVuZElmDQogIEVuZElmDQogTmV4dCBhDQpMb29wDQoNCjwvcHJlPmRkxfZChUr6hJrImfDNgrpaxMOZcYU=" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">ColourMM Sprites test</h1><small>Modified on 2016/12/23 23:22 by Administrator &mdash; Categorized as: Graphics, _LIB Original MMBasic</small><br /><br /><h2 class="separator">This module is part of the original MMBasic library. It is reproduced here with kind permission of Hugh Buckle and Geoff Graham. Be aware it may reference functionality which has changed or is deprecated in the latest versions of MMBasic.<a class="headeranchor" id="This_module_is_part_of_the_original_MMBasic_library_It_is_reproduced_here_with_kind_permission_of_Hugh_Buckle_and_Geoff_Graham_Be_aware_it_may_reference_functionality_which_has_changed_or_is_deprecated_in_the_latest_versions_of_MMBasic_0" href="#This_module_is_part_of_the_original_MMBasic_library_It_is_reproduced_here_with_kind_permission_of_Hugh_Buckle_and_Geoff_Graham_Be_aware_it_may_reference_functionality_which_has_changed_or_is_deprecated_in_the_latest_versions_of_MMBasic_0" title="Link to this Section">&#0182;</a></h2><b>Note</b>: The required file(s) are available in the attachments tab (top right).<br /><br />Colour Maximite V4.0 Demos from Fabrice Muller, France<br /><br /><b>Sprites3</b>:<br />It was one of my first tests of Sprites and Blitter at same time and music modules for the background music. Here it's nothing to do. Just look at the source to learn how to use everything together.<br /><br />Don't forget to copy the *.mod files to "a:" before starting the demos that need them.<br /><br /><pre>
'ColourMM Sprites test
Option Base 1
Dim SprNum(5)
Dim XCoord(5)
Dim YCoord(5)
Dim SprDir(5)
Dim PixCol(5)
Dim PixLR(5)
Dim LemRun(5)
ScreenY = 0
ScreenDir = 1
ModNum = 1
SprOffs = 16
NumSprites = 5
MaxSpr = 5
Mode 4
Cls
Drive "b&#58;"
LoadBMP "level001.bmp",0,ScreenY + 2
Sprite Load "lemmings.spr"
Randomize Timer
For a = 1 To MaxSpr
 SprNum(a) = 1 + (SprOffs &#42; (a-1))
 SprDir(a) = 1
 XCoord(a) = 52
 YCoord(a) = 35
 PixCol(a) = 0
 PixLR(a) = 0
 LemRun(a) = 0
Next a
MaxSpr = 1
Timer = 0
Drive "a&#58;"
PlayMOD "track_01.mod"
Do While 1
 If (ModNum = 1) And (Timer &gt;= 53000) Then
  PlayMOD stop
  ModNum = 2
  Timer = 0
  PlayMOD "track_03.mod"
 EndIf
 If (ModNum = 2) And (Timer &gt;= 53000) Then
  PlayMOD stop
  ModNum = 3
  Timer = 0
  PlayMOD "track_09.mod"
 EndIf
 If (ModNum = 3) And (Timer &gt;= 60900) Then
  PlayMOD stop
  ModNum = 1
  Timer = 0
  PlayMOD "track_01.mod"
 EndIf
 If MaxSpr &lt; NumSprites Then
  If Timer &gt; 1500 And MaxSpr = 1 Then MaxSpr = 2
  If Timer &gt; 3000 And MaxSpr = 2 Then MaxSpr = 3
  If Timer &gt; 4500 And MaxSpr = 3 Then MaxSpr = 4
  If Timer &gt; 6000 And MaxSpr = 4 Then MaxSpr = 5
 EndIf
 For a = 1 To MaxSpr
  PixCol(a) = Pixel(XCoord(a) + 8,YCoord(a) + 17 + ScreenY)
  If SprDir(a) = 1 Then
   PixLR(a) = Pixel(XCoord(a) + 12,YCoord(a) + 5 + ScreenY)
   If (PixLR(a) &lt;&gt; 0) Or (XCoord(a) &gt; (MM.HRes - 10)) Then
    SprDir(a) = -1
    SprNum(a) = 9 + (SprOffs &#42; (a-1))
   EndIf
  Else
   PixLR(a) = Pixel(XCoord(a) + 4,YCoord(a) + 5 + ScreenY)
   If (PixLR(a) &lt;&gt; 0) Or (XCoord(a) &lt; -5) Then
    SprDir(a) = 1
    SprNum(a) = 1 + (SprOffs &#42; (a-1))
   EndIf
  EndIf
 Next a
 For a = 1 To MaxSpr
  Sprite on SprNum(a), XCoord(a) , YCoord(a) + ScreenY
 Next a
 ScreenY = ScreenY + Screendir
 If ScreenY &gt; 50 Then ScreenDir = -1
 If ScreenY &lt; 2 Then ScreenDir = 1
 Do While (Timer Mod 90) &lt; 80
 Loop
 For a = MaxSpr To 1 Step -1
  Sprite off SprNum(a)
 Next a
 BLIT 0,ScreenY ,0,ScreenY + ScreenDir,MM.HRes,154
 For a = 1 To MaxSpr
  If LemRun(a) = 1 Then
   SprNum(a) = SprNum(a) + 1
  EndIf
  If SprDir(a) = 1 Then
   If SprNum(a) &gt; (8 + (SprOffs &#42; (a-1))) Then SprNum(a) = 1 + (SprOffs &#42; (a-1))
  Else
   If SprNum(a) &gt; (16 +(SprOffs &#42; (a-1))) Then SprNum(a) = 9 + (SprOffs &#42; (a-1))
  EndIf
 Next a
 For a = 1 To MaxSpr
  If LemRun(a) = 1 Then
   XCoord(a) = XCoord(a) + SprDir(a)
   If PixCol(a) &lt;&gt; 0 Then
    'Lemming have to go up
       YCoord(a) = YCoord(a) - 1
   Else
    'Lemming have to go down
       YCoord(a) = YCoord(a) + 1
   EndIf
  Else
   If PixCol(a) &lt;&gt; 0 Then
    LemRun(a) = 1
   Else
    YCoord(a) = YCoord(a) + 2
   EndIf
  EndIf
 Next a
Loop

</pre>
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.ColourMM-Sprites-test-part-of-the-original-MMBasic-library by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:14:49 GMT -->
</html>
