

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" >

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Shape-drawing-for-Complex-Lines-and-Polygons by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:23:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><title>
	Shape drawing for Complex Lines and Polygons - Fruit Of The Shed
</title><link rel="stylesheet" type="text/css" href="Themes/Print.css" /></head>
<body>
    <form name="frmPrint" method="post" action="http://fruitoftheshed.com/Print.aspx?NS=MMBasic&amp;Page=MMBasic.Shape-drawing-for-Complex-Lines-and-Polygons" id="frmPrint">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTIwMDg4Njc4MjcPZBYCAgEPZBYCAgEPFgIeBFRleHQFhBw8aDEgY2xhc3M9InBhZ2V0aXRsZSI+U2hhcGUgZHJhd2luZyBmb3IgQ29tcGxleCBMaW5lcyBhbmQgUG9seWdvbnM8L2gxPjxzbWFsbD5Nb2RpZmllZCBvbiAyMDE5LzA1LzI0IDEzOjIyIGJ5IENhcHRhaW5Cb2luZyAmbWRhc2g7IENhdGVnb3JpemVkIGFzOiBBcnJheXMsIEdyYXBoaWNzPC9zbWFsbD48YnIgLz48YnIgLz5UaGUgTU1YIGFuZCBTVCB2YXJpYW50cyBvZiBNTUJhc2ljIGltcGxlbWVudCBhIFBvbHlnb24gY29tbWFuZCB0aGF0IHRha2VzIGEgc2V0IG9mIHBvaW50cyBpbiB0d28gaW50ZWdlciBhcnJheXMgYW5kIGRyYXdzIGFuIG91dGxpbmUgb2YgdGhlIGFyZWEgd2l0aCB0aGUgb3B0aW9uIHRvIGZpbGwgdGhlIGludGVyaW9yLjxiciAvPjxiciAvPlRoZSBmb2xsb3dpbmcgaXMgaW5zcGlyZWQgYnkgdGhpcyBjb21tYW5kIGJ1dCBpbmNsdWRlcyBhbiBvcHRpb24gdG8gZHJhdyB0aGUgZGF0YSBhcyBlaXRoZXIgYSBsaW5lIG9yIGEgcG9seWdvbi4gVGhlcmUgaXMgbm8gb3B0aW9uIHRvIGZpbGwgdGhlIGVuY2xvc2VkIGFyZWEuPGJyIC8+PGJyIC8+QXMgd3JpdHRlbiBiZWxvdywgdGhlIHJvdXRpbmVzIHVzZSB0aGUgQ2FydGVzaWFuIGRyYXdpbmcgY29tbWFuZHMgKHNlZSBkZXBlbmRlbmNpZXMpIHRvIHByb3ZpZGUgY28tb3JkaW5hdGUgMCwwIGluIHRoZSBib3R0b20gbGVmdCBvZiB0aGUgZGlzcGxheS4gSXQgaXMgYW4gZWFzeSBlbm91Z2ggam9iIHRvIHJlcGxhY2UgdGhlIHJlbGV2YW50IGRyYXdpbmcgY29tbWFuZHMgd2l0aCB0aGUgbmF0aXZlIG9uZXMgb2YgTU1CYXNpYy48YnIgLz48YnIgLz5BbiBvZmZzZXQgY2FuIGJlIHNwZWNpZmllZCBmb3IgdGhlIERyYXcgY29tbWFuZCB0aHVzIGFsbG93aW5nIHRoZSBTaGFwZSBkYXRhIHRvIGJlIHBsYWNlZCB1c2luZyByZWxhdGl2ZSBjb29yZGluYXRlcy4gU2NhbGluZyBjb3VsZCBlYXNpbHkgYmUgYWRkZWQgYnV0IEkgaGF2ZSBhdm9pZGVkIGl0IGZvciBub3cgYmVjYXVzZSBpdCB3b3VsZCBzbG93IHRoaW5ncyBkb3duIHdpdGggYSAocHJvYmFibHkgbGFyZ2VseSkgdW4tbmVjZXNzYXJ5IGNhbGN1bGF0aW9uLjxiciAvPjxiciAvPlRoaXMgaXMgYSBwdXJlIE1NQmFzaWMgc2V0IG9mIHJvdXRpbmVzIGFuZCB0aHVzIHdpbGwgd29yayBvbiBhbnkgTU1CYXNpYyBwbGF0Zm9ybS48YnIgLz48YnIgLz48Yj5EZXBlbmRlbmNpZXM8L2I+PGJyIC8+PGEgY2xhc3M9InBhZ2VsaW5rIiB0YXJnZXQ9Il9ibGFuayIgaHJlZj0iTU1CYXNpYy5TZW5zaWJsZS1DYXJ0ZXNpYW4tQ28tb3JkaW5hdGUtZ3JhcGhpY3MtcGFjay5hc2h4IiB0aXRsZT0iU2Vuc2libGUgQ2FydGVzaWFuIENvLW9yZGluYXRlIGdyYXBoaWNzIHBhY2siPlNlbnNpYmxlIENhcnRlc2lhbiBDby1vcmRpbmF0ZSBncmFwaGljcyBwYWNrPC9hPjxiciAvPjxiciAvPjxiPlByZWFtYmxlPC9iPjxiciAvPlRoZSAgY29tbWFuZHMgYXNzdW1lIHRoYXQgYXJyYXlzIGFyZSBkaW1lbnNpb25lZCBmcm9tIHplcm8gKG5vdCAxKTxiciAvPjxwcmU+DQoJT3B0aW9uIEJhc2UgMA0KPC9wcmU+PGJyIC8+PGJyIC8+PGI+RXhhbXBsZTwvYj48YnIgLz48Y29kZT4ncHJlYW1ibGU8YnIgLz4gT3B0aW9uIEJhc2UgMDxiciAvPjxiciAvPiBDTFM8YnIgLz48YnIgLz4gQ29uc3QgR3htPU1NLkhSZXMtMSxHeW09TU0uVlJlcy0xICdzY3JlZW4gZGltZW5zaW9ucyBmb2xsb3cgTENEUEFORUwgc2V0dGluZ3M8YnIgLz4gRGltIEludGVnZXIgdHgsdHksb3R4LG90eSxHeCxHeSxuLHAgJ0d4IGFuZCBHeSBhcmUgdGhlIGN1cnJlbnQgbmF0aXZlIGNvLW9yZGluYXRlczxiciAvPkRvPGJyIC8+PGJyIC8+IEZvciBwPTAgVG8gMzIwPGJyIC8+IENvbG91ciAwPGJyIC8+IE1vdmUgcCwwOkRyYXdSIDAsMjQwPGJyIC8+PGJyIC8+IFNoYXBlLk5ldygxMCk8YnIgLz4gRm9yIG49MSBUbyAxMDxiciAvPiAgU2hhcGUuVmVydGV4KFJuZCpHeG0sUm5kKkd5bSkgJyBzb21lIHJhbmRvbSBzY3JpYmJsZTxiciAvPiBOZXh0PGJyIC8+PGJyIC8+IENvbG91ciBSR0IoV2hpdGUpPGJyIC8+IDxiciAvPiBTaGFwZS5EcmF3KG4sbiwwKSAnIDA9IHRoZSBsYXN0IHBvaW50IGlzbid0IGNvbm5lY3RlZCB0byB0aGUgZmlyc3QgLSAgYSBjb21wbGV4IGxpbmU8YnIgLz48YnIgLz4gU2hhcGUuTmV3KDQpICcgYSA1MCBwaXhlbCBzcXVhcmU8YnIgLz4gU2hhcGUuVmVydGV4KDAsMCk8YnIgLz4gU2hhcGUuVmVydGV4KDAsNTApPGJyIC8+IFNoYXBlLlZlcnRleCg1MCw1MCk8YnIgLz4gU2hhcGUuVmVydGV4KDUwLDApPGJyIC8+PGJyIC8+IENvbG91ciBSR0IoUmVkKTxiciAvPiBGb3Igbj0xIFRvIDIwICcgMjAgcmFuZG9tIHNxdWFyZXM8YnIgLz4gIFNoYXBlLkRyYXcoUm5kKihHeG0tNTApLFJuZCooR3ltLTUwKSwxKSAnIDE9IHRoZSBsYXN0IHBvaW50IGlzIGNvbm5lY3RlZCB0byB0aGUgZmlyc3QsIGVuY2xvc2luZyB0aGUgYXJlYSAocG9seWdvbik8YnIgLz4gTmV4dDxiciAvPjxiciAvPk5leHQ8YnIgLz5Mb29wPGJyIC8+PC9jb2RlPjxiciAvPjxiciAvPjxiciAvPjxiPlRoZSBDb2RlPC9iPjxiciAvPjxwcmU+DQonQ2xlYXIgdGhlIHNoYXBlIHN0YWNrIGFuZCBwb2ludGVycyBpbiByZWFkaW5lc3MgZm9yIGEgbmV3IHNoYXBlLg0KIFN1YiBTaGFwZS5OZXcoUG9pbnRzIEFzIEludGVnZXIpDQogIE9uIEVycm9yIFNraXAgMg0KICBFcmFzZSBTaA0KICBEaW0gSW50ZWdlciBTaFB0cg0KICBEaW0gSW50ZWdlciBTaCgxLFBvaW50cy0xKSAnMCxuIGlzIFgsIDEsbiBpcyBZDQogIFNoUHRyPTANCiBFbmQgU3ViDQoNCidBZGQgYSBuZXcgdmVydGV4IChjb3JuZXIpIHRvIHRoZSBzaGFwZSBzdGFjaw0KJ0NhcmUgbXVzdCBiZSB0YWtlbiBub3QgdG8gYWRkIG1vcmUgdmVydGljZXMgdGhhbiB3ZXJlIHNwZWNpZmllZCBpbiBTaGFwZS5OZXcNCiBTdWIgU2hhcGUuVmVydGV4KHggQXMgSW50ZWdlcix5IEFzIEludGVnZXIpDQogIFNoKDAsU2hQdHIpPXgmIzU4O1NoKDEsU2hQdHIpPXkNCiAgU2hQdHI9U2hQdHIrMQ0KIEVuZCBTdWINCg0KJ0RyYXcgdGhlIHNoYXBlLiBJZiBvcHQgaXMgbm9uLXplcm8sIHRoZSBzaGFwZSBpcyBjbG9zZWQgYnkgZHJhd2luZyBiZXR3ZWVuIHRoZSBmaXJzdCBhbmQgbGFzdCB2ZXJ0aWNlcyB0byBwcm9kdWNlIGEgcG9seWdvbg0KJ1RoZSBzaGFwZSBzdGFjayBpcyBwcmVzZXJ2ZWQgYW5kIHNvIGNhbiBiZSByZS11c2VkLg0KJ1gvWSBvZmZzZXQgaXMgYWRkZWQgdG8gdGhlIHNoYXBlIHZlcnRpY2VzIGFsbG93aW5nIHRoZSBzaGFwZSB0byBiZSBkcmF3biBpbiBtdWx0aXBsZSBsb2NhdGlvbnMgd2l0aCB0aGUgc2FtZSBkYXRhLg0KIFN1YiBTaGFwZS5EcmF3KHhPZmZzZXQgQXMgSW50ZWdlcix5T2Zmc2V0IEFzIEludGVnZXIsT3B0IEFzIEludGVnZXIpDQogIExvY2FsIG4gQXMgSW50ZWdlcg0KICBNb3ZlIHhPZmZzZXQrU2goMCwwKSx5T2Zmc2V0K1NoKDEsMCkNCiAgRm9yIG49MSBUbyBTaFB0ci0xDQogICBEcmF3IHhPZmZzZXQrU2goMCxuKSx5T2Zmc2V0K1NoKDEsbikNCiAgTmV4dA0KICBJZiBPcHQgVGhlbiBEcmF3IHhPZmZzZXQrU2goMCwwKSx5T2Zmc2V0K1NoKDEsMCkNCiBFbmQgU3ViDQo8L3ByZT48YnIgLz5kZAaocK+aTVFeTTYIHbaFzgrIpFQQ" />
</div>

<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="03CF0AB7" />
</div>
        <h1 class="pagetitle">Shape drawing for Complex Lines and Polygons</h1><small>Modified on 2019/05/24 13:22 by CaptainBoing &mdash; Categorized as: Arrays, Graphics</small><br /><br />The MMX and ST variants of MMBasic implement a Polygon command that takes a set of points in two integer arrays and draws an outline of the area with the option to fill the interior.<br /><br />The following is inspired by this command but includes an option to draw the data as either a line or a polygon. There is no option to fill the enclosed area.<br /><br />As written below, the routines use the Cartesian drawing commands (see dependencies) to provide co-ordinate 0,0 in the bottom left of the display. It is an easy enough job to replace the relevant drawing commands with the native ones of MMBasic.<br /><br />An offset can be specified for the Draw command thus allowing the Shape data to be placed using relative coordinates. Scaling could easily be added but I have avoided it for now because it would slow things down with a (probably largely) un-necessary calculation.<br /><br />This is a pure MMBasic set of routines and thus will work on any MMBasic platform.<br /><br /><b>Dependencies</b><br /><a class="pagelink" target="_blank" href="MMBasic.Sensible-Cartesian-Co-ordinate-graphics-pack.html" title="Sensible Cartesian Co-ordinate graphics pack">Sensible Cartesian Co-ordinate graphics pack</a><br /><br /><b>Preamble</b><br />The  commands assume that arrays are dimensioned from zero (not 1)<br /><pre>
	Option Base 0
</pre><br /><br /><b>Example</b><br /><code>'preamble<br /> Option Base 0<br /><br /> CLS<br /><br /> Const Gxm=MM.HRes-1,Gym=MM.VRes-1 'screen dimensions follow LCDPANEL settings<br /> Dim Integer tx,ty,otx,oty,Gx,Gy,n,p 'Gx and Gy are the current native co-ordinates<br />Do<br /><br /> For p=0 To 320<br /> Colour 0<br /> Move p,0:DrawR 0,240<br /><br /> Shape.New(10)<br /> For n=1 To 10<br />  Shape.Vertex(Rnd*Gxm,Rnd*Gym) ' some random scribble<br /> Next<br /><br /> Colour RGB(White)<br /> <br /> Shape.Draw(n,n,0) ' 0= the last point isn't connected to the first -  a complex line<br /><br /> Shape.New(4) ' a 50 pixel square<br /> Shape.Vertex(0,0)<br /> Shape.Vertex(0,50)<br /> Shape.Vertex(50,50)<br /> Shape.Vertex(50,0)<br /><br /> Colour RGB(Red)<br /> For n=1 To 20 ' 20 random squares<br />  Shape.Draw(Rnd*(Gxm-50),Rnd*(Gym-50),1) ' 1= the last point is connected to the first, enclosing the area (polygon)<br /> Next<br /><br />Next<br />Loop<br /></code><br /><br /><br /><b>The Code</b><br /><pre>
'Clear the shape stack and pointers in readiness for a new shape.
 Sub Shape.New(Points As Integer)
  On Error Skip 2
  Erase Sh
  Dim Integer ShPtr
  Dim Integer Sh(1,Points-1) '0,n is X, 1,n is Y
  ShPtr=0
 End Sub

'Add a new vertex (corner) to the shape stack
'Care must be taken not to add more vertices than were specified in Shape.New
 Sub Shape.Vertex(x As Integer,y As Integer)
  Sh(0,ShPtr)=x&#58;Sh(1,ShPtr)=y
  ShPtr=ShPtr+1
 End Sub

'Draw the shape. If opt is non-zero, the shape is closed by drawing between the first and last vertices to produce a polygon
'The shape stack is preserved and so can be re-used.
'X/Y offset is added to the shape vertices allowing the shape to be drawn in multiple locations with the same data.
 Sub Shape.Draw(xOffset As Integer,yOffset As Integer,Opt As Integer)
  Local n As Integer
  Move xOffset+Sh(0,0),yOffset+Sh(1,0)
  For n=1 To ShPtr-1
   Draw xOffset+Sh(0,n),yOffset+Sh(1,n)
  Next
  If Opt Then Draw xOffset+Sh(0,0),yOffset+Sh(1,0)
 End Sub
</pre><br />
    </form>
</body>

<!-- Mirrored from fruitoftheshed.com/MMBasic.Print.aspx?Page=MMBasic.Shape-drawing-for-Complex-Lines-and-Polygons by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 09 Feb 2022 12:23:31 GMT -->
</html>
